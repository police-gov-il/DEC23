
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>מטה ארצי משטרת ישראל - Editor</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  <link rel="canonical" href="https://neartail.com/dashboard/116151664779909850301/editor/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com/" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link rel="stylesheet" href="/dashboard/assets/css/bootstrap.min.css"/>
  <link rel="preload" href="/dashboard/assets/css/custom.css?_=v3"
    as="style" onload="this.onload=null;this.rel='stylesheet'"/>
  <link rel="preload" href="/dashboard/assets/css/default.css"
    as="style" onload="this.onload=null;this.rel='stylesheet'"/>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
    as="style" onload="this.onload=null;this.rel='stylesheet'"/>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
    as="style" onload="this.onload=null;this.rel='stylesheet'"/>
  <link rel="stylesheet" media="print" class="lazyLoad"
    href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
  <link rel="stylesheet" media="print" class="lazyLoad"
    href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".lazyLoad").forEach(el => {
        el.media = "all"
      });
    });
  </script>
  <style type="text/css">
    body {
      font-display:swap;
      --mdc-theme-primary: #522AE9;
      --mdc-theme-secondary: #522AE9;
      --mdc-theme-on-primary: #fff;
      --mdc-theme-on-secondary: #fff;
      --mdc-theme-secondary:#5D33FB;
    }
    .mdc-fab{ position:absolute; right:60px; bottom:60px; z-index:1001; }
    .card-body{ padding:15px; }
    .swiper-pagination{ bottom:0px !important; }
    .icontext{ display:flex; align-items:center; }
    .icontext .material-icons{ padding-right:4px; }
    red{ color:red; }
    @media (min-width: 992px)
    {
      .compact{ max-width: 720px; }
    }
  </style>
  <div id="DashboardDialog" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Dashboard</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Loading...</p>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <script>
    window.Dashboard = {
      progress:'<div id="progressbar" class="d-flex justify-content-center padding-100">'
      +'<div class="spinner-border text-primary padding-30"></div>'
      +'<div style="position:absolute; margin-top:18px;"><img src="/img/flat_logo.png" style="width:36px; height:auto;"/></div>'
      +'</div>',
      createField:function(opts={})
      {
        var val = opts.value?opts.value:'';
        var plc = opts.placeholder?opts.placeholder:'';
        var attrs = '';
        ['name', 'placeholder', 'required', 'minlength'].forEach(attr=>{
          if(opts[attr]) attrs += attr+'="'+opts[attr]+'" ';
        });
        var htm = '<form onsubmit="jQuery(\'#DashboardDialog .btn-primary\').click(); return false;">';
        if(opts.type =='checkbox'){
          htm += '';
          htm += `<div> 
            <label for="${opts.name}">
              <input type="checkbox" id="${opts.name}" ${attrs} value="${val}">
              ${opts.label}
            </label>
          </div> <br>`;
        } 
        else if(opts.type =='select'){
          htm += `<div><select id="${opts.name}" ${attrs} class="form-control">`;
          if(Array.isArray(opts.choices))
          {
            opts.choices.forEach(choice=>{
              htm += "<option value='" + choice + "'"+ ((choice==opts.value)?'selected':'') + ">" + choice + "</option>"
            });
          }
          else
          {
            Object.entries(opts.choices).forEach(entry=>{
              var [choice, display] = entry;
              htm += "<option value='" + choice + "'"+ ((choice==opts.value)?'selected':'') + ">" + display + "</option>"
            });
          }
          htm += `</select></div> <br>`;
        } 
        else if(opts.type =='hidden'){
          htm += '<input type="hidden" '+attrs+' autofocus class="form-control" value="'+val+'"/>';
        }
        else if(opts.type =='textarea'){
          htm += '<textarea '+attrs+' autofocus class="form-control" rows="'+(opts.rows||4)+'">'
          +val+'</textarea>';
        }
        else {
          htm += '<input type="text" '+attrs+' autofocus class="form-control" value="'+val+'" placeholder="'+plc+'"/>';
        }
        htm += '</form>';
        return htm;
      },
      confirm:function(ttl, msg, btns={}, opts={closable:true})
      {
        jQuery('#DashboardDialog .modal-title').html(ttl);
        jQuery('#DashboardDialog .modal-body').html(msg);
        var bhtms = [];
        for(var bnm in btns)
        {
          var btyp = bhtms.length==0?'btn-primary':'btn-outline-primary';
          var bhtm = '<button type="button" class="btn '+btyp+'" title="'+bnm+'">'+bnm+'</button>';
          bhtms.push(bhtm);
        }
        jQuery('#DashboardDialog .modal-footer').html(bhtms.reverse().join('\n'));
        jQuery('#DashboardDialog').modal({backdrop:'static', keyboard:false});
        jQuery('#DashboardDialog .modal-footer .btn-primary').focus();
        if(!opts.closable) jQuery('#DashboardDialog .close').hide();
        for(var bnm in btns)
        {
          jQuery('#DashboardDialog button[title="'+bnm+'"]').click(function(){
            var frm = document.querySelector('#DashboardDialog form');
            var valid = frm?frm.reportValidity():true;
            if(valid==false) return;
            var jso = {};
            var pairs = jQuery('#DashboardDialog form').serializeArray();
            pairs.forEach(pair=>{ jso[pair.name] = pair.value; });
            var dialog = jQuery('#DashboardDialog');
            var btitle = jQuery(this).attr('title');
            var rs = btns[btitle](jso, dialog);
            Promise.resolve(rs).then(_=>{
              if(opts.closable) dialog.modal('hide');
            });
          });
        }
      },
      signout:function()
      {
        firebase.auth().signOut().then(function(){
          location.href = '/';
        });
        return void(0);
      }
    }
    
  </script>
  

    <script>
      if(window.localStorage) localStorage.tagSession = "{\"email\":\"il.police.ma@gmail.com\",\"userid\":\"116151664779909850301\",\"displayName\":\"מטה ארצי משטרת ישראל\",\"product\":\"ff\",\"plan\":\"free\",\"publishId\":\"1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ\"}";
    </script>



    <script defer async src="https://www.googletagmanager.com/gtag/js?id=G-QJMXF6DX05"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  var host = location.host;
  var configId = 'G-QJMXF6DX05';

  if(host.indexOf('hipaache') > -1){
    configId = 'G-ELBR9GV27X';
  } else if(host.indexOf('neartail') > -1 || host.indexOf('whatstarget') > -1 || host.indexOf('peergateway') > -1 || host.indexOf('localhost') > -1) {
    configId = 'G-FC6YGZ6C7Z';
  }
  gtag('config', configId);

    window.onerror = function (msg, url, lineNo, columnNo, error) {
        var string = msg.toLowerCase();
        var substring = 'script error';
        // ignore script error
        if (string.indexOf(substring) == -1){
            url = url && url.split('/').pop()
            var value = [
                'URL: ' + url,
                'Line: ' + lineNo,
                'Column: ' + columnNo,
                'Error object: ' + JSON.stringify(error)
                ].join(' - ');

            if (window.gtag) {
                window.gtag('event', 'exception', {
                    description: msg,
                    event_value: value
                });
            }
        }
        return false;
    };
</script>
  



    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '3554158214844605', {'extern_id': 116151664779909850301});
        fbq('track', 'PageView', {"funnel":"trialing","used":0,"install":["formfacade"]});
    </script>
    <noscript><img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=3554158214844605&ev=PageView&noscript=1"
    /></noscript>



    <script type="text/javascript">
    _linkedin_partner_id = "5214650";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);
    </script><script type="text/javascript">
    (function(l) {
    if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
    window.lintrk.q=[]}
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})(window.lintrk);
    </script>
    <noscript>
    <img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=5214650&fmt=gif" />
    </noscript>



<style type="text/css">
  #ff-compose{ padding-top:10px; padding-bottom:10px; }
  .ff-preview{ 
    max-width: 740px; padding: 15px 30px;
    margin-left:auto; margin-right:auto; 
  }
</style>

  <link rel="stylesheet" media="print" onload="this.media='all'"
    id="/css/open-props.min.css" href="/css/open-props.min.css?nocache=37" />

  <link rel="stylesheet" media="print" onload="this.media='all'"
    id="/css/formfacade.css" href="/css/formfacade.css?nocache=37" />

  <link rel="stylesheet" media="print" onload="this.media='all'"
    id="/css/formfacade.rest.css" href="/css/formfacade.rest.css?nocache=37" />

  <link rel="stylesheet" media="print" onload="this.media='all'"
    id="/css/formfacade.editor.css" href="/css/formfacade.editor.css?nocache=37" />

</head>
<body>



<nav class="navbar navbar-expand-lg navbar-light sticky-top">
  <div class="container-fluid p-l-0">
    <a href="/dashboard/116151664779909850301/home.html" class="back">
      <span class="material-icons">home</span>
    </a>
    <h5>מחלקת מתנדבים - משטרת ישראל</h5>
    <a class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></a>
    <div class="collapse navbar-collapse justify-content-end"  id="navbarNavDropdown">
      <ul class="navbar-nav">
        
          <li class="nav-item active">
            <a class="nav-link" href="/dashboard/116151664779909850301/editor/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ">
              Edit
            </a>
          </li>
        
          <li class="nav-item ">
            <a class="nav-link" href="/dashboard/116151664779909850301/preview/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ">
              Preview
            </a>
          </li>
        
          <li class="nav-item ">
            <a class="nav-link" href="/dashboard/116151664779909850301/share/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ">
              Share
            </a>
          </li>
        
          <li class="nav-item ">
            <a class="nav-link" href="/dashboard/116151664779909850301/response/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ">
              Responses
            </a>
          </li>
        
          <li class="nav-item ">
            <a class="nav-link" href="/dashboard/116151664779909850301/reports/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ">
              Reports
            </a>
          </li>
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle userprofile" href="#" id="profileDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="profile-icon"><img src="https://cdn.formfacade.com/116151664779909850301/theme/logo/IMG_8875.JPG"></div>
            הודעה למחלקת מתנדבים, מטה ארצי, משטרת ישראל
          </a>
          <div id="accountDropdown" class="dropdown-menu" aria-labelledby="profileDropdown">
            
              <img src="https://lh3.googleusercontent.com/a/ACg8ocIsEBtn4bk1q7DaiuTM8ZzahEe7n36CGreuyjrsVBpARA=s96-c" class="rounded-circle profilePhoto">
            
            
              <img src="https://cdn.formfacade.com/116151664779909850301/theme/logo/IMG_8875.JPG" onclick="editFacade.showTheme('#pills-title-tab')"
                class="rounded-circle border border-white accountPhoto">
              <a class="theme-title" onclick="editFacade.showTheme('#pills-title-tab')" href="javascript:void(0)">
                הודעה למחלקת מתנדבים, מטה ארצי, משטרת ישראל
              </a>
            
            <p class="tilte-12">il.police.ma@gmail.com</p>
            
              <a onclick="editFacade.showTheme()" href="javascript:void(0)">Change Theme</a>
            
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/dashboard/116151664779909850301/account.html?tab=plan">Manage plan</a>
            <a class="dropdown-item" href="javascript:Dashboard.signout()">Logout</a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>

<style>
  .theme-title{ font-family:'Poppins', sans-serif; font-size:14px; line-height:26px; }
  .profile-icon img{ margin-top:-4px; margin-left:6px; margin-right:-4px; }
  #accountDropdown{ left:auto; right:0px; text-align:center; }
  #accountDropdown .profilePhoto{ position:absolute; margin:-4px 12px; width:30px; height:auto; }
  #accountDropdown .accountPhoto{ display:block; margin:auto; width:70px; height:auto; border:solid 3px #eee !important; }
  .floatPrimary{ position:fixed; right:30px; bottom:60px; z-index:1001; }
  .navbar-toggler{ -webkit-appearance:none; }
  .navbar h5{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .navbar .material-icons{ font-size:24px; }
  .progress-item{ height:32px; width:80px; border-radius:5px; margin-top:3px; font-size:12px; }
  .progress-item .progress-bar{ height:100%; border-radius:5px 0 0 5px; padding:5px; }
  @media only screen and (max-device-width: 480px){
    .navbar h5{ max-width:200px; }
    .progress-item{ margin-left:15px; margin-top:10px; margin-bottom:14px; }
  }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="/js/ejs.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-auth.js"></script>
<script>
  var firebaseConfig = {
    apiKey: "AIzaSyCcbdBCI-Kgcz3tE1N4paeF9a-vdi3Uzz8",
    authDomain: location.hostname=='localhost'?'formfacade.firebaseapp.com':(location.hostname=='hipaache.com'?'formfacade.com':location.hostname),
    databaseURL: "https://formfacade.firebaseio.com",
    projectId: "formfacade",
    storageBucket: "",
    messagingSenderId: "743872305260",
    appId: "1:743872305260:web:c5f7c23ccfa724447be049"
  };
  firebase.initializeApp(firebaseConfig);
</script>
<script>
  var params = {"userId":"116151664779909850301","page":"editor","publishId":"1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ"};
  firebase.auth().onAuthStateChanged(function(auth){
    var loggedIn = auth?auth.providerData[0]:null;
    if(loggedIn && loggedIn.uid==params.userId)
    {
      console.log('Logged in as '+loggedIn.uid);
    }
    else
    {
        console.log('Logged in as '+loggedIn.uid);
    }
  });
  window.Info = {"bgimage":"https://cdn.neartail.com/116151664779909850301/theme/bgimage/bg.jpg","bgimageorg":"https://cdn.neartail.com/116151664779909850301/theme/bgimageorg/bg.jpg","colorfulhead":"Poppins","colorfulpara":"Roboto","colorfulpri":"#5d33fb","colorfulsec":"#b161fc","colorfulsize":"14","language":"en","logo":"https://cdn.neartail.com/116151664779909850301/theme/logo/IMG_8875.JPG","logoorg":"https://cdn.neartail.com/116151664779909850301/theme/logoorg/IMG_8875.JPG","minimalhead":"Work Sans","minimalpara":"Work Sans","minimalpri":"#77cde3","minimalsec":"#f5f5f5","minimalsize":"14","theme":"colorful","themePrimary":"#000000","themeSecondary":"#000000","title":"הודעה למחלקת מתנדבים, מטה ארצי, משטרת ישראל"};
  
</script>

<script type="text/javascript">
  
  window.$crisp=[];window.CRISP_WEBSITE_ID="2053e68a-3829-4801-9a34-00ac4c824b14";(function(){ d=document;s=d.createElement("script"); s.src="https://client.crisp.chat/l.js"; s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();
  $crisp.push(["set", "user:email", ["il.police.ma@gmail.com"]]);
  $crisp.push(["set", "user:avatar", ["https://lh3.googleusercontent.com/a/ACg8ocIsEBtn4bk1q7DaiuTM8ZzahEe7n36CGreuyjrsVBpARA=s96-c"]]);
  $crisp.push(["set", "user:nickname", ["מטה ארצי משטרת ישראל"]]);
  $crisp.push(["set", "session:segments", [["funnel-trialing","used-0","install-formfacade"], true]]);

  $crisp.push(['do', 'chat:hide']);

</script>



<div id="ff-compose">
  
	<style>
		:root{
			--ff-bgcolor: #fff;
			--ff-font-color: #202124;
			--ff-font-size: 14px;
			--ff-head-size: 28px;
			--ff-font-small: 12.6px;
			--ff-field-bgcolor: #f5f7f8;
			--ff-size-1: 3.5px;
			--ff-size-1: 7px;
			--ff-size-3: 14px;
		}
		.ff-public-mode{ line-height:1.75; }
		.ff-partial, .ff-add-cart, .ff-editwidget, .ff-edittheme, 
		.ff-editsection, .ff-button-bar{ display:none !important; }
	</style>
	




  <form id="Publish1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ" 
  class="ff-form ff-layout-default ff-public-mode" method="POST" 
  action="https://docs.google.com/forms/u/1/d/e/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ/formResponse">
    <input type="hidden" name="id" value="1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ">
    <input type="hidden" name="pageHistory" value="">
    
    
    
    <input type="hidden" id="Payment1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ" name="paymentId" value="">
    <input type="hidden" id="PaymentData1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ" name="paymentData" value="">
    
    <div class="ff-section" id="ff-sec-root" 
      style="display:block;">
      
      
        <img src="https://lh5.googleusercontent.com/-T2sJrSzTkPa-y-KlIyVWNf4ElE0IUhpivaVe2ZnnAbLRKcSXVm50_ngDjlgkolr54fiKg7Rm4Rb1kE3x0fJ1Gbf1UY72IxQY52HHycBkrzXp6U019TdjLpy0vM7DvEm4w=w3578" class="ff-banner-image ff-image"/>
      
      <h3 class="ff-title" id="ff-title-root">
        הודעה למחלקת מתנדבים - משטרת ישראל
        
      </h3>
      
        <div class="ff-description mdViewer" id="ff-desc-root">
          <p>אנא מלאו את כל השדות באופן ברור, בכדי שנוכל לטפל בפנייתכם ביעילות. כל מידע אישי שתכתבו בטופס זה יישמר באופן מאובטח ופרטי במחלקת מתנדבים של משטרת ישראל בלבד. שליחת הודעה זו למחלקת מתנדבים של משטרת ישראל מהווה את אישורך והסכמתך לקבל מענה באמצעות הטלפון ו/או האימייל כפי שמצויין בטופס זה או כפי ששמור במערכות של משטרת ישראל. יש לפנות למב״סים שלכם לגבי כל נושא, בטרם פניה למחלקת המתנדבים וליידע אותם על הפניה (מלבד במקרים חריגים). המב״סים בקיאים בכל הנהלים והתהליכים ואמורים לסייע לכם בכל נושא. במידה ואכן ניסיתם ולא קיבלתם מענה מספק, אנא מלאו את הפרטים בהמשך הטופס ונשמח לסייע. לפני פניה למחלקת המתנדבים בנושאי מדים, רישיון כלי יריה פרטי, קרנות השוטרים וכדומה, אנא קראו את הנהלים המעודכנים וכל שאר המידע הזמין באתר מחלקת המתנדבים של משטרת ישראל בכתובת: מחלקת מתנדבים - משטרת ישראל נשמח לסייע לכם בשאר הנושאים. שליחת הודעה באמצעות דף זה אינה מהווה תחליף לפניה למוקד 100 של משטרת ישראל בכל נושא הדורש טיפול משטרתי מבצעי. הודעתך תטופל בהתאם לעדיפויות מחלקת המתנדבים ובשעות הפעילות של מחלקת המתנדבים.</p>
        </div>
      
    <div class="ff-secfields">
    
    
      
      
        <div class="rest-form-group ff-item    ff-text ff-part-width  ff-item-noprd" id="ff-id-1205157977">
          
            <label class="ff-item-qs " for="Widget1205157977">
                
                  שם פרטי
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static1205157977" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
              <input type="text" class="ff-widget-control rest-form-control" id="Widget1205157977" name="entry.1909766344"
                
            
            
            value="" placeholder="" required>
          
          
          <div id="Error1205157977" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-text ff-part-width  ff-item-noprd" id="ff-id-215898395">
          
            <label class="ff-item-qs " for="Widget215898395">
                
                  שם משפחה
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static215898395" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
              <input type="text" class="ff-widget-control rest-form-control" id="Widget215898395" name="entry.369297289"
                
            
            
            value="" placeholder="" required>
          
          
          <div id="Error215898395" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-text ff-part-width  ff-item-noprd" id="ff-id-238232561">
          
            <label class="ff-item-qs " for="Widget238232561">
                
                  טלפון נייד
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static238232561" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
              <input type="text" class="ff-widget-control rest-form-control" id="Widget238232561" name="entry.737700233"
                
            
            
            value="" placeholder="" required>
          
          
          <div id="Error238232561" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-text ff-part-width  ff-item-noprd" id="ff-id-1101569925">
          
            <label class="ff-item-qs " for="Widget1101569925">
                
                  אימייל
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static1101569925" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
              <input type="email" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,63}$"
                class="ff-widget-control rest-form-control ff-email-widget" id="Widget1101569925" name="entry.1474689753"
                
            
            
            value="" placeholder="" required>
          
          
          <div id="Error1101569925" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-list ff-part-width  ff-item-noprd" id="ff-id-723909357">
          
            <label class="ff-item-qs " for="Widget723909357">
                
                  סטטוס התנדבות
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static723909357" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
            
              <select class="ff-widget-control rest-form-control" id="Widget723909357" 
                name="entry.264769925" required>
              <option value="">- Choose -</option>
              
                <option  value="מתנדב.ת פעיל.ה">מתנדב.ת פעיל.ה</option>
              
                <option  value="בתהליך גיוס / קליטה">בתהליך גיוס / קליטה</option>
              
                <option  value="מתנדב.ת בהקפאת פעילות">מתנדב.ת בהקפאת פעילות</option>
              
                <option  value="בתהליך גריעה / פרישה">בתהליך גריעה / פרישה</option>
              
                <option  value="מתנדב.ת לשעבר">מתנדב.ת לשעבר</option>
              
                <option  value="לא מתנדב.ת">לא מתנדב.ת</option>
              
              </select>
            
          
          
          <div id="Error723909357" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-text ff-part-width  ff-item-noprd" id="ff-id-1080415128">
          
            <label class="ff-item-qs ff-qs-html" for="Widget1080415128">
                
                  <div class="ff-qs-html-text">
                    יחידה (נא לציין מחוז/מרחב/תחנה).         <div>(או לכתוב ״<b><u>ללא</u></b>״ במקרה שאין שיוך לתחנה)</div>
                  </div>
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static1080415128" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
              <input type="text" class="ff-widget-control rest-form-control" id="Widget1080415128" name="entry.2079345655"
                
            
            
            value="" placeholder="" required>
          
          
          <div id="Error1080415128" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-list ff-part-width  ff-item-noprd" id="ff-id-1906904522">
          
            <label class="ff-item-qs " for="Widget1906904522">
                
                  נושא הפניה. (לאחר בירור עם המב״ס)
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static1906904522" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            
            
              <select class="ff-widget-control rest-form-control" id="Widget1906904522" 
                name="entry.244175467" required>
              <option value="">- Choose -</option>
              
                <option  value="רעיונות, המלצות והצעות ייעול">רעיונות, המלצות והצעות ייעול</option>
              
                <option  value="תלונות">תלונות</option>
              
                <option  value="תנאי שירות המתנדבים">תנאי שירות המתנדבים</option>
              
                <option  value="הכשרות מתנדבים">הכשרות מתנדבים</option>
              
                <option  value="זכאות למדים">זכאות למדים</option>
              
                <option  value="זכאות לרישיון נשק פרטי בתבחין ״מתנדב משטרה״">זכאות לרישיון נשק פרטי בתבחין ״מתנדב משטרה״</option>
              
                <option  value="פניה בנושא קרנות השוטרים">פניה בנושא קרנות השוטרים</option>
              
                <option  value="תהליך יחב״מ">תהליך יחב״מ</option>
              
                <option  value="בקשות מיוחדות">בקשות מיוחדות</option>
              
              </select>
            
          
          
          <div id="Error1906904522" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-paragraph_text ff-full-width  ff-item-noprd" id="ff-id-924483075">
          
            <label class="ff-item-qs " for="Widget924483075">
                
                  תוכן הפניה
                
                <span class="ff-required">*</span> 
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static924483075" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            <textarea class="ff-widget-control rest-form-control" id="Widget924483075" name="entry.853080008"
              
              placeholder="" required rows="3"></textarea>
          
          
          <div id="Error924483075" class="ff-widget-error"></div>
        </div>
      
        <div class="rest-form-group ff-item    ff-file ff-full-width  ff-item-noprd" id="ff-id-1292588225">
          
            <label class="ff-item-qs " for="Widget1292588225">
                
                  אופציה להעלות קבצים ותמונות רלוונטיות
                
                
                
                
                
                
                  <i  class="ff-editwidget material-icons">
                    settings
                  </i>
                
            </label>
            
              <small  id="Static1292588225" class="ff-help-empty ff-help form-text mdViewer"></small>
            
            
            
          
          
            <input type="hidden" id="Widget1292588225" name="entry.1006129979" value="">
            <div id="Display1292588225" class="ff-widget-control ff-file-upload" 
              data-files="" data-entry="1006129979" data-id="1292588225">
            </div>
          
          
          <div id="Error1292588225" class="ff-widget-error"></div>
        </div>
      
      
    
    </div>

    <div class="ff-button-bar">
    
    
        <button type="button" class="rest-btn rest-btn-lg rest-btn-primary ff-submit" id="ff-submit-root" onclick="formFacade.submit(this.form, 'root')">
          
            <img src="https://formfacade.com/img/send.svg" class="ff-submit-icon"/>
          
          <span>
            Submit
          </span>
        </button>
      
    

    
    
      
        
          <a href="https://formfacade.com/website/customize-google-forms.html?product=website&utm_source=madewith&utm_medium=116151664779909850301&utm_campaign=1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ&plan=free&userId=116151664779909850301&by=%D7%94%D7%95%D7%93%D7%A2%D7%94%20%D7%9C%D7%9E%D7%97%D7%9C%D7%A7%D7%AA%20%D7%9E%D7%AA%D7%A0%D7%93%D7%91%D7%99%D7%9D%20-%20%D7%9E%D7%A9%D7%98%D7%A8%D7%AA%20%D7%99%D7%A9%D7%A8%D7%90%D7%9C" target="_blank" 
            class="ff-powered-img" style="display:inline-block !important;"
            title="Try it for Free">
            
              <img src="https://formfacade.com/logo/madewith/formfacade.svg" loading="lazy"/>
            
          </a>
        
      
    
    </div>
    </div>

    

    

    
    <div class="ff-section" id="ff-sec-ending" style="display:none">
    <div class="ff-secfields">
      <h3 class="ff-title">הודעה למחלקת מתנדבים - משטרת ישראל</h3>
      <p style="padding-bottom:80px;">Click Submit to finish.</p>
    </div>
    <div class="ff-button-bar">
      <button type="button" class="rest-btn rest-btn-lg rest-btn-secondary ff-back" 
        onclick="formFacade.gotoSection(this.form, 'root', 'back')">
        <span class="material-icons">arrow_back</span>
        <span>Back</span>
      </button>
      <button type="button" class="rest-btn rest-btn-lg rest-btn-primary ff-submit"
        onclick="formFacade.submit(this.form, '-3')">
        <span class="material-icons">send</span>
        <span>Submit</span>
      </button>
    </div>
    </div>

  </form>




<div id="ff-addprd-overlay" onclick="formFacade.closePopup()"></div>
<div id="ff-addprd-popup"></div>

</div>
<script src="/include/116151664779909850301/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ/classic.js?div=ff-compose&callback=initEdit"></script>
<script src="//pay.peergateway.com/js/admin/admin-forms.js?_=v13"></script>


<div class="modal" tabindex="-1" role="dialog" id="EditDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content" id="EditModal">
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="CropDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content" id="CropModal">
      <div class="modal-body">
        <div class="img-container">
            <div class="row">
              <img id="crop-image">
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <div>
          <div class="btn-group">
            <button type="button" class="btn btn-secondary" title="Zoom In" onclick="cropImage.zoom(0.1)">
              <span class="fa fa-search-plus"></span>
            </button>
            <button type="button" class="btn btn-secondary" title="Zoom Out" onclick="cropImage.zoom(-0.1)">
              <span class="fa fa-search-minus"></span>
            </button>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-secondary" onclick="cropImage.move(-10, 0)" title="Move Left">
              <span class="fa fa-arrow-left"></span>
            </button>
            <button type="button" class="btn btn-secondary" onclick="cropImage.move(10, 0)" title="Move Right">
              <span class="fa fa-arrow-right"></span>
            </button>
            <button type="button" class="btn btn-secondary" onclick="cropImage.move(0, -10)" title="Move Up">
              <span class="fa fa-arrow-up"></span>
            </button>
            <button type="button" class="btn btn-secondary" onclick="cropImage.move(0, 10)" title="Move Down">
              <span class="fa fa-arrow-down"></span>
            </button>
          </div>
        </div>
        <div>
          <button type="button" class="btn btn-secondary crop-button" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary crop-button" id="crop" onClick="editFacade.cropImage()">Crop</button>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  #CropDialog img {
    display: block;
    max-width: 100%;
    max-height: 800px;
    height: auto;
  }
  #CropDialog  .crop-preview {
    overflow: hidden;
    width: 160px; 
    height: 160px;
    margin: 10px;
    border: 1px solid red;
  }
  #CropDialog .modal-footer .btn-group{
    margin-top: 5px;
  }
  #CropDialog .modal-footer .crop-button{
    margin-top: 5px;
  }
</style>

<style>
  .sticky-top{ z-index:499; }
  .modal-backdrop{ z-index:500; }
  #EditDialog{ z-index:501; }
  #EditModal{
    position:fixed; right:0px; top:0px; bottom:0px; height:-webkit-fill-available; width:480px;
    display:grid; grid-template-rows:57px 1fr 68px;
    border:none; border-radius:0px; z-index:502; background-color:#fff; 
  }
  #EditModal .CodeMirror{ min-height: 60px; }
  #EditModal .CodeMirror-scroll{ min-height: 60px; }
  #EditModal .editor-statusbar{ display:none; }
  #EditModal .modal-header{ padding:.5rem 1rem; }
  #EditModal .modal-header .modal-title{ line-height:2.5; }
  #EditModal .modal-header .close{ margin-top:-0.5rem; }
  #EditModal .modal-body{ padding:.5rem 1rem; overflow-x:auto; }
  #EditModal .modal-body::-webkit-scrollbar { width:10px; }
  #EditModal .modal-body::-webkit-scrollbar-track { background:#f1f1f1; }
  #EditModal .modal-body::-webkit-scrollbar-thumb { background:#ccc; }
  #EditModal .modal-body::-webkit-scrollbar-thumb:hover { background:#aaa; }
  #EditModal .modal-body .input-group-text{ padding:0rem .5rem; }
  #EditModal .modal-body .form-group label .material-icons{ float:right; cursor:pointer; }
  #EditModal .modal-footer{ border-top:1px solid rgba(0,0,0,0.1); background-color:#fff; }
  #EditModal .modal-footer .quickbar{ width:100%; text-align:right; padding-right:15px; margin-right:20px; border-right:solid 1px #aaa; }
  #EditModal .modal-footer .quickbar .material-icons{ padding:5px 8px; cursor:pointer; }
  #EditModal .modal-footer .quickbar .material-icons:hover{ color:#522AE9; }

  #EditModal .trash{ float:left; color:#dc3545; }
  #EditModal .trash:hover{ color:#c82333 !important; }
  #EditModal input[type="checkbox"].pull-right{ margin-top:7px; }
  #EditModal .pull-right{ text-align:right; float:right; }
  #EditModal .shorten{ width:120px; }
  #EditModal .addbar{ cursor:pointer; line-height:28px; font-size:14px; padding-bottom:12px; }
  #EditModal .addright{ cursor:pointer; line-height:28px; font-size:14px; text-align:right; }
  #EditModal .addbar .material-icons, 
  #EditModal .addright .material-icons{ cursor:pointer; vertical-align:middle; font-size:18px; }
  #EditModal .soldby.material-icons{ float:none !important; vertical-align:middle; font-size:18px; }
  #EditModal .choices .input-group,
  #EditModal .variants .input-group,
  #EditModal .configurables .input-group,
  #EditModal .addons .input-group{ margin-bottom:3px; }
  #EditModal .choices .choice .input-group-append,
  #EditModal .variants .variant .input-group-append,
  #EditModal .configurables .configurable .input-group-append,
  #EditModal .addons .addon .input-group-append{ cursor:pointer; }
  #EditModal .choices .choice .input-group-prepend .input-group-text{ padding:.5rem; }
  #EditModal .configurables .configurable .input-group-prepend .input-group-text{ padding:.5rem; }
  #EditModal .addons .addon .input-group-prepend .input-group-text{ padding:.5rem; }
  #EditModal .nav-link{ padding-left:0px; padding-right:40px; }
  #EditModal ::placeholder { color:#ccc; font-size:14px; }

  #WidgetTab .tab-pane button{ float:right; min-width:80px; }

  #EditModal .form-control{ color:#111; }
  #EditModal .form-group label{ line-height:32px; }
  #EditModal .form-group .ellipsis{ max-width:200px; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; }
  #EditModal .back-discard{ padding:8px; cursor:pointer; }
  #EditModal .back-discard:hover{ color:#000; }

  .card-img-top{ height:auto; }
  .material-icons{ font-size:16px; }
  .ffc-color{ display:inline; width:80px; float:right; }
  .preview-if .pif{ font-weight:500; }
  .preview-if .pre{ padding:10px 0px 0px 20px }

  #CropModal .modal-footer {
    justify-content: space-between;
  }
  @media only screen and (max-device-width: 480px){
    #EditModal{ width:100%; }
    #EditModal .nav-link{ padding:10px 30px 10px 0px; }
    .floatPrimary{ display:none; }
  }
</style>
<script src="/js/formsapi.js?_=v143"></script>
<script src="/js/editform.js?_=v143"></script>
<script async defer src="/js/editcalc.js?_=v143"></script>

<script type="text/javascript">
  editFacade.getPages = function(forms)
{
	var pages = {};
	for(var publishId in forms)
	{
		var frm = forms[publishId];
		if(!frm.deleted)
		{
			frm.publishId = publishId;
			var pgnm = frm.page?frm.page:'home';
			var pg = pages[pgnm];
			if(!pg) pg = {name:pgnm, forms:[]};
			pg.forms.push(frm);
			pg.forms.sort((a,b)=>{
				return (a.index>=0?a.index:a.at)-(b.index>=0?b.index:b.at);
			});
			pages[pgnm] = pg;
		}
	}
	return pages;
};
  editFacade.template = {"title":"<%\r\n  var frm = scraped?scraped:form;\r\n  var fc = facade?facade:{};\r\n  if(!fc) fc = {};\r\n  var ttl = {};\r\n  if(titleId=='root')\r\n    ttl = {title:frm.title, description:frm.description};\r\n  if(frm && frm.items && frm.items[titleId])\r\n    ttl = frm.items[titleId];\r\n  var ottl = {};\r\n  if(fc.titles && fc.titles[titleId])\r\n    ottl = fc.titles[titleId];\r\n%>\r\n<style>\r\n  .titleHelp{ margin-top:10px; }\r\n  .titleHelp a{ color:blue; text-decoration:underline; }\r\n  .titleFeedback{ margin-top:10px; color:red; }\r\n  .titleFeedback a{ color:red; text-decoration:underline; }\r\n</style>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">\r\n    Edit <%-ttl.type=='SECTION_HEADER'?'Header':'Page'%>\r\n  </h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<form class=\"modal-body\" id=\"TitleTab\" onsubmit=\"return false;\">\r\n    <div class=\"form-group\">\r\n      <label for=\"field\">Title</label>\r\n      <input type=\"text\" name=\"title\" placeholder=\"<%=ttl.title%>\" value=\"<%=ottl.title?ottl.title:(hasCreator()?ttl.title:null)%>\"\r\n        class=\"form-control\"/>\r\n    </div>\r\n    <div class=\"form-group pt-3\">\r\n      <label for=\"primary\">Description</label>      \r\n      <% \r\n        var hlp = ttl.help?ttl.help:(ttl.description?ttl.description:'');\r\n      %>\r\n      <div id=\"mdEditor\"><%-ottl.messageMark?ottl.messageMark:(hasCreatorOrEditor()?hlp:null)%></div>\r\n      <textarea name=\"messageMD\" id=\"md-input\" hidden><%-ottl.messageMD?ottl.messageMD:(hasCreatorOrEditor()?hlp:null)%></textarea>\r\n      <textarea name=\"messageMark\" id=\"md-input-html\" hidden><%-ottl.messageMark?ottl.messageMark:(hasCreatorOrEditor()?hlp:null)%></textarea>\r\n      <div class=\"titleHelp\"></div>\r\n      <div class=\"titleFeedback\">\r\n          <%\r\n            var ntfuncs = ['TOTAL(','AMT(','AMOUNT('].filter(function(ntfunc){ \r\n              if(ottl.messageMD) return ottl.messageMD.toUpperCase().indexOf(ntfunc)>=0;\r\n            });\r\n            if(!user.neartail && ntfuncs.length>0){\r\n          %>\r\n            Install\r\n            <a href=\"https://gsuite.google.com/marketplace/app/neartail/743172720058\" target=\"_blank\">Neartail</a>\r\n            addon for order forms.\r\n          <% } %>\r\n      </div>\r\n    </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n<% \r\n  if(hasCreatorOrEditor()){ \r\n    var typ = ttl.type=='SECTION_HEADER'?'header':'page';\r\n%>\r\n  <div class=\"quickbar\">\r\n    <span class=\"material-icons trash\" onclick=\"editFacade.deleteTitle(<%-titleId%>)\" title=\"Delete this <%-typ%>\">\r\n      delete\r\n    </span>\r\n    <span class=\"material-icons\" onclick=\"editFacade.duplicateTitle(<%-titleId%>)\" title=\"Duplicate this <%-typ%>\">\r\n      content_copy\r\n    </span>\r\n    <span class=\"material-icons\" onclick=\"<% if(ttl.type=='SECTION_HEADER'){ %>editFacade.rearrangeItems('<%-ttl.section.id%>')<% } else{ %>editFacade.rearrangePages()<% } %>\" title=\"Rearrange <%-typ%>\">\r\n      move_up\r\n    </span>\r\n  </div>\r\n<% } %>\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveTitle(this)\">\r\n  \tSave\r\n  </button>\r\n</div>\r\n\r\n","widget":"<% \r\n\tvar frm = scraped?scraped:form;\r\n\tvar fc = facade||{};\r\n\tvar setting = fc.setting||{};\r\n\tvar item = getItem();\r\n\tvar fitem = getFacadeItem();\r\n\tvar freeforms = ['TEXT', 'PARAGRAPH_TEXT', 'DATE', 'TIME'];\r\n\tvar advn = hasCreator() && item.type=='TEXT' && price(item.help, setting.currency)>0;\r\n\tvar sections = getGoToSections();\r\n\tvar validTypes = validationsList();\r\n  \tvar validation = fitem.validation;\r\n  \tvar allowedFieldValidations = ['TEXT', 'PARAGRAPH_TEXT', 'LIST', 'MULTIPLE_CHOICE']\r\n\tvar sitems = [];\r\n\tfor(var sid in frm.items){\r\n\t\tvar sitm = frm.items[sid];\r\n\t\tsitm.id = sid;\r\n\t\tsitems.push(sitm);\r\n\t}\r\n  \tvar itms = sitems\r\n    .filter(function(itm){ return allowedFieldValidations.indexOf(itm.type)>-1 && itm.id != itemId && itm.title && itm.entry?true:false })\r\n    .sort(function(a,b){ return a.index-b.index; });\r\n\tvar isSignature = (fitem && fitem.subtype == 'SIGNATURE');\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n\t<ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link active\" id=\"pills-question-tab\" data-toggle=\"pill\" href=\"#pills-question\" role=\"tab\" aria-controls=\"pills-question\" aria-selected=\"true\">Question</a>\r\n\t  </li>\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link\" id=\"pills-answer-tab\" data-toggle=\"pill\" href=\"#pills-answer\" role=\"tab\" aria-controls=\"pills-answer\" aria-selected=\"false\">Answer</a>\r\n\t  </li>\r\n\t  <% if(advn){ %>\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link\" id=\"pills-advanced-tab\" data-toggle=\"pill\" href=\"#pills-advanced\" role=\"tab\" aria-controls=\"pills-advanced\" aria-selected=\"false\">Advanced</a>\r\n\t  </li>\r\n\t  <% } %>\r\n\t</ul>\r\n\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t<span aria-hidden=\"true\">&times;</span>\r\n\t</button>\r\n</div>\r\n<style>\r\n\t#WidgetTab .tab-pane{ position:relative; min-height:300px; }\r\n\t#WidgetTab textarea{ min-height:40px; height:auto; }\r\n\t#WidgetTab #calcEditable{ line-height:34px; font-size:12px; }\r\n\t#WidgetTab a[contenteditable=\"false\"]{ padding:2px; border-radius:1px; }\r\n\t#WidgetTab a[data-type=\"variable\"]{ background-color:#15c; color:#fff; }\r\n\t.widgetHelp{ line-height:30px; }\r\n\t.widgetHelp a{ color:blue; text-decoration:underline; }\r\n\t.widgetFeedback{ line-height:48px; color:#dc3545; }\r\n\t.widgetFeedback span{ color:#000; }\r\n\t.widgetFeedback a{ color:#15c; text-decoration:none; border-bottom:solid 1px #15c;  }\r\n\t.widgetFeedback .material-icons{ color:#dc3545; vertical-align:text-bottom; }\r\n\t#WidgetTab .tab-pane button{ float:right; min-width:80px; }\r\n\t#WidgetTab .tab-pane .dropdown{ float:right; min-width:80px; }\r\n\t#WidgetTab .imageItemBox, #WidgetTab .imageTitleBox { cursor: pointer; width: 120px; height: 120px; object-fit: cover;}\r\n\t#WidgetTab .choice-card,#WidgetTab .title-card {border: 1px solid #f0f0f0; text-align: center; background-color: #fefefe; margin:5px; padding: 5px 0px;}\r\n\t#WidgetTab .imagefile { display: none;}\r\n\t#WidgetTab .mauto {margin: auto;}\r\n</style>\r\n<form class=\"modal-body\" id=\"WidgetTab\" onsubmit=\"return false;\">\r\n\t<div class=\"tab-content\" id=\"pills-tabContent\">\r\n\t  <div class=\"tab-pane fade show active\" id=\"pills-question\" role=\"tabpanel\" aria-labelledby=\"pills-question\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t    <label class=\"col-12\" for=\"qsTitle\">Title</label>\r\n\t\t    </div>\r\n\t\t    <% var ttl = fitem.title?fitem.title:(hasCreatorOrEditor()?item.title:null) %>\r\n\t\t    <% if(hasCreatorOrEditor()){ %>\r\n\t\t    \t<input type=\"text\" id=\"qsTitle\" name=\"title\" class=\"form-control\"\r\n\t\t    \t\tplaceholder=\"<%=item.title?item.title:'Appears as label for the widget'%>\" value=\"<%=ttl%>\"/>\r\n\t\t    <% } else{ %>\r\n\t\t    \t<textarea id=\"qsTitle\" name=\"title\" class=\"form-control\"\r\n\t\t    \t\tplaceholder=\"<%=item.title?item.title:'Appears as label for the widget'%>\"><%-ttl%></textarea>\r\n\t\t    <% } %>\r\n\t\t  </div>\r\n\t  \t  <% if(hasCreatorOrEditor()){ %>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<input type=\"hidden\" id=\"reqfield\" name=\"required\" value=\"<%-item.required?'yes':'no'%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"reqcheckbox\" <%-item.required?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#reqfield').val(this.checked?'yes':'no')\"/>\r\n\t\t\t\t<label for=\"reqcheckbox\">Mark this as required field</label>\r\n\t\t\t</div>\r\n\r\n\t\t\t<% if(item.type=='DATE' && formsApiEnabled()){ %>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<input type=\"hidden\" id=\"timefield\" name=\"includeTime\" value=\"<%-item.time?'yes':'no'%>\"/>\r\n\t\t\t\t\t<input type=\"checkbox\" id=\"timecheckbox\" <%-item.time?'checked':''%> \r\n\t\t\t\t\t\tonchange=\"jQuery('#timefield').val(this.checked?'yes':'no')\"/>\r\n\t\t\t\t\t<label for=\"timecheckbox\">Include time</label>\r\n\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\r\n\t\t  <% } %>\r\n\r\n\t\t  <% if(fc.hipaache){ %>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<input type=\"hidden\" id=\"encryptfield\" name=\"encrypt\" value=\"<%-fitem.encrypt?'PHI':''%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"encryptcheckbox\" <%-fitem.encrypt?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#encryptfield').val(this.checked?'PHI':'')\"/>\r\n\t\t\t\t<label for=\"encryptcheckbox\">Mark this as Protected Health Information</label>\r\n\t\t\t</div>\r\n\t\t  <% } %>\r\n\r\n\t\t  <% \r\n\t\t  \tvar desc = fitem.helpMD ? fitem.helpMD : (hasCreatorOrEditor() ? item.help : null); \r\n\t\t  \tvar deschtml = fitem.helpMark ? fitem.helpMark : (hasCreatorOrEditor() ? item.help : null); \r\n\t\t  %>\r\n\t\t  <div class=\"addbar descMDCard\" style=\"display:<%-desc?'none':'block'%>\"\r\n\t\t  \tonclick=\"jQuery('.descMDCard').toggle()\">\r\n\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t  \tDescription\r\n\t\t  </div>\r\n\t\t    <div class=\"form-group descMDCard\" style=\"display:<%-desc?'block':'none'%>\">\r\n\t\t      <label for=\"primary\">Description</label>\r\n\t\t      <br/>\r\n\t\t      <div id=\"mdEditor\"><%-deschtml%></div>\r\n\t\t      <textarea name=\"helpMD\" id=\"md-input\" hidden><%-desc%></textarea>\r\n\t\t      <textarea name=\"helpMark\" id=\"md-input-html\" hidden><%-deschtml%></textarea>\r\n\t\t      <div class=\"helpFeedback\">\r\n\t\t          <%\r\n\t\t            var ntfuncs = ['TOTAL(','AMT(','AMOUNT('].filter(function(ntfunc){ \r\n\t\t              if(fitem.helpMark) return fitem.helpMark.toUpperCase().indexOf(ntfunc)>=0;\r\n\t\t            });\r\n\t\t            if(!user.neartail && ntfuncs.length>0){\r\n\t\t          %>\r\n\t\t            Install\r\n\t\t            <a href=\"https://gsuite.google.com/marketplace/app/neartail/743172720058\" target=\"_blank\">Neartail</a>\r\n\t\t            addon for order forms.\r\n\t\t          <% } %>\r\n\t\t      </div>\r\n\t\t    </div>\r\n\t\t\t\r\n      <% if(fitem.subtype != 'SIGNATURE') { %>\r\n        <div class=\"addbar placeholderCard\" style=\"display:<%-fitem.placeholder?'none':'block'%>\"\r\n          onclick=\"jQuery('.placeholderCard').toggle()\">\r\n          <span class=\"material-icons\">add_circle</span>\r\n          Placeholder\r\n        </div>\r\n        <div class=\"form-group placeholderCard\" style=\"display:<%-fitem.placeholder?'block':'none'%>\">\r\n          <label for=\"placeholder\"><%-fitem.type=='FILE_UPLOAD'?'Caption for upload button':'Placeholder'%></label>\r\n          <textarea name=\"placeholder\" class=\"form-control\"\r\n            placeholder=\"<%=item.placeholder?item.placeholder:(fitem.type=='FILE_UPLOAD'?'Add file':'Appears as placeholder when user hasn\\'t updated the widget')%>\"><%-fitem.placeholder%></textarea>\r\n        </div>\r\n      <% } %>\r\n\t\t\r\n\t\t<% if(hasCreatorOrEditor()){ %>\r\n\t\t\t<%\r\n\t\t\t\tvar hasTitleImage = item.titleImage && item.titleImage.image;\r\n\t\t\t\tvar titleImgSrc;\r\n\t\t\t\tvar alignmentPosition=0;\r\n\t\t\t\tif(hasTitleImage)\r\n\t\t\t\t\ttitleImgSrc = 'https://formfacade.com/itemload/item/'+encode(item.titleImage.image);\r\n\t\t\t\telse \r\n\t\t\t\t\ttitleImgSrc ='https://formfacade.com/img/insert_photo.svg';\r\n\t\t\t\t\r\n\t\t\t\tif(hasTitleImage && item.titleImage.size && item.titleImage.size.align)\r\n\t\t\t\t\talignmentPosition = item.titleImage.size.align;\r\n\t\t\t%>\r\n\r\n\t\t\t<%# tile Image upload %>\r\n\t\t\t<% if(formsApiEnabled()) {%>\r\n\t\t\t\t<div class=\"addbar titleImageCard\" style=\"display:block\" \r\n\t\t\t\t\t\tonclick=\"jQuery('.titleImageCard').toggle()\">\r\n\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\tTitle Image\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"form-group titleImageCard\" style=\"display:none\">\r\n\t\t\t\t\t<label for=\"primary\">Title Image</label>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<div class=\"row title-card\">\r\n\t\t\t\t\t\t<div class=\"col-6\"> \r\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"titleImage\" id=\"titleImageHdn\" class=\"form-control input-row titleImg\" value=\"<%=item.titleImage&&item.titleImage.image%>\"/>\r\n\t\t\t\t\t\t\t<img class=\"imageTitleBox\" \r\n\t\t\t\t\t\t\t\tonclick=\"$(this).parents('.title-card').find('.imagefile').click()\"\r\n\t\t\t\t\t\t\t\tsrc=\"<%-titleImgSrc%>\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"col-6 mauto\"> \r\n\t\t\t\t\t\t\t<label id=\"prdimagelbl\">\r\n\t\t\t\t\t\t\t\t<input type=\"file\" accept=\"image/*\" class=\"imagefile\" onchange=\"editFacade.uploadTitleImage(this)\" />\r\n\t\t\t\t\t\t\t\t<% if(hasTitleImage) { %>\r\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"$(this).parents('.title-card').find('.imagefile').click()\">\r\n\t\t\t\t\t\t\t\t\t\tChange\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" style=\"padding-left:10px; color:#dc3545;\"\r\n\t\t\t\t\t\t\t\t\t\tonclick=\"$('#titleImageHdn').val(''); $('.imageTitleBox').attr('src', '/img/insert_photo.svg');\">\r\n\t\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t<% } else { %>\r\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"$(this).parents('.title-card').find('.imagefile').click()\">\r\n\t\t\t\t\t\t\t\t\t\tAdd image\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t\t<div class=\"col-12 form-group txt-left\">\r\n\t\t\t\t\t\t\t<label for=\"title\"> Alignment </label>\r\n\r\n\t\t\t\t\t\t\t<select name=\"titleImageAlignment\" class=\"form-control\" />\r\n\t\t\t\t\t\t\t\t<option value=\"\">Default</option>\r\n\t\t\t\t\t\t\t\t<%  \r\n\t\t\t\t\t\t\t\t\tvar alignment;\r\n\t\t\t\t\t\t\t\t\tif(alignmentPosition==0) alignment='Left';\r\n\t\t\t\t\t\t\t\t\telse if(alignmentPosition==1) alignment='Center';\r\n\t\t\t\t\t\t\t\t\telse if(alignmentPosition==2) alignment='Right';\r\n\t\t\t\t\t\t\t\t\t['Left', 'Right' , 'Center' ].forEach((name, index)=>{\r\n\t\t\t\t\t\t\t\t%>\r\n\t\t\t\t\t\t\t\t\t<option value=\"<%-index+1%>\" <%-alignment==name?'selected':''%>>\r\n\t\t\t\t\t\t\t\t\t\t<%-name%>\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t<% }) %>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\r\n\t\t\t<% if(item.rows){ %>\r\n\t\t\t\t<div class=\"form-group variants pt-3\">\r\n\t\t\t\t\t<label for=\"rows\">\r\n\t\t\t\t\t\tRows\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div class=\"variant\">\r\n\t\t\t\t\t<% item.rows.forEach((rw, w)=>{ %>\r\n\t\t\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"rows\" class=\"form-control input-row\" value=\"<%=rw.value%>\" data-entry=\"<%=rw.entry%>\"/>\r\n\t\t\t\t\t\t\t<div class=\"input-group-append\" onclick=\"jQuery(this).parent().remove()\">\r\n\t\t\t\t\t\t\t\t<div class=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"material-icons\">close</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t<% }) %>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Add option\"\r\n\t\t\t\t\t\t\tonfocus=\"editFacade.addRow('.variants .variant .input-group')\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\r\n\t\t\t<% if(item.choices)\r\n\t\t\t  { \r\n\t\t\t\tvar navs = item.choices.filter(ch=> (ch.navigateTo<0 || ch.navigateTo>0)  );\r\n\t\t\t\tvar hasOtherChoice = item.choices.find(ch=> ch.isOther == true)||{};\r\n\t\t\t\tvar allowBranching = (item.type=='LIST'||item.type=='MULTIPLE_CHOICE');\r\n\t\t\t%>\r\n\t\t\t\t<div class=\"form-group choices pt-3\">\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<label class=\"col-6\" for=\"choices\">\r\n\t\t\t\t\t\t\tChoices\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<div class=\"col-6 addright priced pricedvar\" onclick=\"jQuery('.choicesection').toggle()\"\r\n\t\t\t\t\t\t\tstyle=\"display:<%-allowBranching&&navs.length==0&&formsApiEnabled()?'inline-block':'none'%>\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\t\t\tGo To Section\r\n\t\t\t\t\t\t\t<span class=\"material-icons soldby\" title=\"Go to section based on user answer\">help</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"choice\">\r\n\t\t\t\t\t<% item.choices.forEach((ch, c)=>{ %>\r\n\t\t\t\t\t\t<% if( formsApiEnabled() && ch.value != '') { %>\r\n\t\t\t\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t\t\t\t<% if(item.type=='LIST'||item.type=='MULTIPLE_CHOICE') { %>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"choice.value\" class=\"form-control input-row\" value=\"<%=ch.value%>\" onchange=\"editFacade.updateChoiceName(this)\"/>\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"choice.image\" class=\"form-control input-row choiceImageHdn\" value=\"<%=ch.image%>\"/>\r\n\t\t\t\t\t\t\t\t\t<select type=\"number\" name=\"choice.navigateTo\" class=\"form-control priced choicesection\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"display:<%-navs.length>0&&formsApiEnabled()?'inline-block':'none'%>\">\r\n\t\t\t\t\t\t\t\t\t\t<% for (var i=0; i < sections.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar section = sections[i];\r\n\t\t\t\t\t\t\t\t\t\t\tvar pos = i + 1;\r\n\t\t\t\t\t\t\t\t\t\t%>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"<%-section.id%>\" <%-section.id==ch.navigateTo?'selected=\"selected\"':''%>> \r\n\t\t\t\t\t\t\t\t\t\t\t\t<%-section.title%>\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t<% } else if(item.type=='CHECKBOX') { %>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"choice.value\" class=\"form-control input-row\" value=\"<%=ch.value%>\" onchange=\"editFacade.updateChoiceName(this)\"/>\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"choice.image\" class=\"form-control input-row choiceImageHdn\" value=\"<%=ch.image%>\"/>\r\n\t\t\t\t\t\t\t\t<% } else { %>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"choices\" class=\"form-control input-row\" value=\"<%=ch.value%>\"/>\r\n\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t\t<div class=\"input-group-append\" onclick=\"editFacade.removeChoiceImage(this);jQuery(this).parent().remove()\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"material-icons\">close</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t<% }) %>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Add option\"\r\n\t\t\t\t\t\t\tonfocus=\"editFacade.addRow('.choices .choice .input-group')\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<% if(formsApiEnabled() && (item.type=='MULTIPLE_CHOICE' || item.type=='CHECKBOX')) { %>\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t<input type=\"hidden\" id=\"otherChoice\" name=\"choice.isOther\" value=\"<%-hasOtherChoice.isOther?'yes':'no'%>\"/>\r\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"otherChoiceCheck\" <%-hasOtherChoice.isOther?'checked':''%> \r\n\t\t\t\t\t\t\t\tonchange=\"jQuery('#otherChoice').val(this.checked?'yes':'no')\"/>\r\n\t\t\t\t\t\t\t<label for=\"otherChoiceCheck\">Add 'Other' choice</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t<% } %>\r\n\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\r\n\t\t\t<%# choice Image upload %>\r\n\t\t\t<% if(formsApiEnabled() && item.choices && (item.type=='CHECKBOX'||item.type=='MULTIPLE_CHOICE'))\r\n\t\t\t   { \r\n\t\t\t\tvar chImages = item.choices.filter((ch)=> ch.image);\r\n\t\t\t\tvar hasChoiceImages = chImages.length > 0;\r\n\t\t\t%>\r\n\t\t\t\t<div class=\"addbar choiceImageCard\" style=\"display:block\" \r\n\t\t\t\t\tonclick=\"jQuery('.choiceImageCard').toggle()\">\r\n\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\t\tChoices Image\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"form-group choiceImageCard\" style=\"display:none;\">\r\n\t\t\t\t\t<label for=\"primary\">Choices Image</label>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<% item.choices.forEach((ch, c)=>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar imgSrc;\r\n\t\t\t\t\t\tif(ch.image)\r\n\t\t\t\t\t\t\timgSrc = 'https://formfacade.com/itemload/item/'+encode(ch.image+'=w260');\r\n\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\timgSrc ='https://formfacade.com/img/insert_photo.svg'\r\n\t\t\t\t\t%>\r\n\t\t\t\t\t\t<% if(ch.value != '') { %>\r\n\t\t\t\t\t\t\t<div class=\"choice-index-<%-c%> row choice-card\">\r\n\t\t\t\t\t\t\t\t<div class=\"col-6\"> \r\n\t\t\t\t\t\t\t\t\t<img class=\"imageItemBox\" \r\n\t\t\t\t\t\t\t\t\t\tonclick=\"$(this).parents('.choice-card').find('.imagefile').click()\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"<%-imgSrc%>\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"col-6 mauto\"> \r\n\t\t\t\t\t\t\t\t\t<h6 class=\"choice-title\"> <%- ch.value %> </h6>\r\n\t\t\t\t\t\t\t\t\t<label id=\"prdimagelbl\">\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"file\" accept=\"image/*\" class=\"imagefile\" onchange=\"editFacade.uploadChoiceImage(this)\" />\r\n\t\t\t\t\t\t\t\t\t\t<% if(ch.image) { %>\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"$(this).parents('.choice-card').find('.imagefile').click()\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tChange\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t<% } else { %>\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"$(this).parents('.choice-card').find('.imagefile').click()\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tAdd image\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t<% }) %>\r\n\t\t\t\t</div>\r\n\t\t\t<% } %>\r\n\t\t<% } %>\r\n\r\n\t\t<% if(fitem && fitem.type=='FILE_UPLOAD' && fitem.subtype != 'SIGNATURE'){ %>\r\n\t\t\t<div class=\"alert alert-secondary\" style=\"margin:0;text-align: left;padding-left: 3px\" role=\"alert\">\r\n\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t<span class=\"material-icons\" style=\"vertical-align: middle;font-size: 18px;padding-top: 2px;\">info</span>\r\n\t\t\t\t\t<span style=\"padding-left: 3px;\">File uploads are not supported in Facebook and Instagram in-app browsers.</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t<% } %>\r\n\t  </div>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-answer\" role=\"tabpanel\" aria-labelledby=\"pills-answer\">\r\n\t  \t<% if(fitem.type=='FILE_UPLOAD' && fitem.subtype != 'SIGNATURE'){ %>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"maxnum\">Maximum number of files</label><br/>\r\n\t\t    <strong id=\"filerange\"><i><%-fitem.maxnum?fitem.maxnum:1%></i> file(s)</strong>\r\n\t\t    <input type=\"range\" name=\"maxnum\" value=\"<%=fitem.maxnum?fitem.maxnum:1%>\" \r\n\t\t    \tclass=\"form-control-range\" class=\"pull-right\" onchange=\"jQuery('#filerange i').html(this.value)\"/>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"extension\">Allow file extension</label>\r\n\t\t    <textarea \r\n\t\t    \tplaceholder=\"pdf, doc, docx, xls, xlsx, ppt, pptx, csv, txt, rtf, html, zip, mp3, wma, mpg, flv, avi, 3gp, m4v, mov, mp4, wmv, jpg, jpeg, png, gif\"\r\n\t\t    \tname=\"extension\" class=\"form-control\"><%-fitem.extension%></textarea>\r\n\t\t  </div>\r\n\t\t  <% \r\n\t\t  \tvar mb = user.upload&&user.upload.filemb?user.upload.filemb:10;\r\n\t\t  \tvar plan = user.paid&&user.paid.website?user.paid.website:'free';\r\n\t\t  \tvar qry = {\r\n\t\t  \t\t'entry.1807587361':user.email, 'entry.2106134935':user.uid,\r\n\t\t  \t\t'entry.1011685296':'https://formfacade.com/public/'+user.uid+'/home/form/'+params.publishId\r\n\t\t  \t};\r\n\t\t  \tvar qrystr = jQuery.param(qry);\r\n\t\t  %>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label>\r\n\t\t    \tMax file size:\r\n\t\t    \t<span class=\"badge badge-secondary\"><%-mb>10?(mb>100?'1GB':'100MB'):'10MB'%></span>\r\n\t\t    </label>\r\n\t\t\t<a href=\"https://formfacade.com/file-upload/upgrade.html?<%-qrystr%>\" target=\"_blank\" class=\"btn-link\">Upgrade</a>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label>\r\n\t\t    \tMax file storage:\r\n\t\t    \t<span class=\"badge badge-secondary\">\r\n\t\t    \t\t<%-mb>10?(mb>100?'1TB':(plan=='10gb'?'10GB':'100GB')):(plan=='premium'?'2GB':(plan=='basic'?'1GB':'100MB'))%>\r\n\t\t    \t</span>\r\n\t\t    </label>\r\n\t\t\t<a href=\"https://formfacade.com/file-upload/upgrade.html?<%-qrystr%>\" target=\"_blank\" class=\"btn-link\">Upgrade</a>\r\n\t\t  </div>\r\n\t  \t<% } else{ %>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"mode\">Appearance</label>\r\n\t\t\t<select class=\"form-control\" id=\"mode\" name=\"mode\">\r\n\t\t    <%\r\n\t\t    \tvar selmode = fitem.mode?fitem.mode:'edit';\r\n\t\t    \tvar modes = {edit:'Editable', read:'Read only', officeuse:'Office use', hide:'Hidden'};\r\n\t\t    \tfor(var md in modes){\r\n\t\t    %>\r\n\t\t\t  <option <%-md==selmode?'selected':''%> value=\"<%=md%>\">\r\n\t\t\t  \t<%-modes[md]%>\r\n\t\t\t  </option>\r\n\t\t    <% } %>\r\n\t\t\t</select>\r\n\t\t  </div>\r\n\t\t  <% \r\n\t\t  \tvar scorable = freeforms.indexOf(item.type)<0;\r\n\t\t  \tif(scorable && fc.scorecery){ \r\n\t\t  \t\tvar ans = fitem&&fitem.score?fitem.score:[];\r\n\t\t  %>\r\n\t\t\t  \t<div class=\"form-group pt-3\">\r\n\t\t\t    \t<label>Assign points for each choice</label>\r\n\t\t\t  \t</div>\r\n\t\t\t  \t<% \r\n\t\t\t  \t\tvar validchs = item.choices.filter(ch=>ch.value);\r\n\t\t\t  \t\tvalidchs.forEach((ch,c)=>{ \r\n\t\t\t  \t%>\r\n\t\t\t\t  <div class=\"form-group\">\r\n\t\t\t\t    <label class=\"ellipsis\" for=\"score.<%-c%>\">\r\n\t\t\t\t    \t<%-ch.value?ch.value:'Other'%>\r\n\t\t\t\t    </label>\r\n\t\t\t\t\t<input type=\"number\" class=\"form-control pull-right shorten\" id=\"score.<%-c%>\" name=\"score\" value=\"<%-ans[c]%>\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t<% }) %>\r\n\r\n\t\t\t\t<% if(item.type=='CHECKBOX'){ %>\r\n\t\t\t\t<div class=\"addbar maxscoreCard\" style=\"display:<%-fitem.maxscore?'none':'block'%>\"\r\n\t\t\t\t\tonclick=\"jQuery('.maxscoreCard').toggle()\">\r\n\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\tMaximum score\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"form-group maxscoreCard\" style=\"display:<%-fitem.maxscore?'block':'none'%>\">\r\n\t\t\t\t<label for=\"maxscore\">Total score for this question can't exceed:</label>\r\n\t\t\t\t<input type=\"number\" name=\"maxscore\" class=\"form-control\" value=\"<%=fitem.maxscore%>\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<% } %>\r\n\r\n\t\t\t\t<div class=\"addbar tagCard pt-3\"\" style=\"display:<%-fitem.tag?'none':'block'%>\"\r\n\t\t\t\t\tonclick=\"jQuery('.tagCard').toggle()\">\r\n\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\tScore category\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"form-group tagCard pt-3\"\" style=\"display:<%-fitem.tag?'block':'none'%>\">\r\n\t\t\t\t<label for=\"tag\">Add this question's score to category:</label>\r\n\t\t\t\t<input type=\"text\" name=\"tag\" class=\"form-control\" value=\"<%=fitem.tag%>\"\r\n\t\t\t\t\tpattern=\"^[a-z0-9-]+$\" placeholder=\"Only alphabets & numbers\"\r\n\t\t\t\t\tlist=\"ListTag\" autocomplete=\"off\" onkeypress=\"return event.keyCode!=13;\">\r\n\t\t\t\t  <datalist id=\"ListTag\" class=\"ff-datalist\">\r\n\t\t\t\t  \t<% \r\n\t\t\t\t  \t\tvar tags = Object.values(fc.items||{}).map(fcitm=>fcitm.tag).filter(tg=>tg);\r\n\t\t\t\t  \t\t[... new Set(tags)].forEach(function(tg){ \r\n\t\t\t\t\t%>\r\n\t\t\t\t\t\t<option><%-tg%></option>\r\n\t\t\t\t  \t<% }) %>\r\n\t\t\t\t  </datalist>\r\n\t\t\t\t</div>\r\n\t\t  <% } %>\r\n\t\t  <% \r\n\t\t  \tvar isvalid = freeforms.indexOf(item.type)>=0;\r\n\t\t\tif(item.product || isSignature)\r\n\t\t\t\tisvalid = false;\r\n\t\t  \telse if(item.type=='MULTIPLE_CHOICE'||item.type=='LIST')\r\n\t\t  \t\tisvalid = item.choices.filter(ch=>ch.navigateTo).length>0;\r\n\t\t  \tif(isvalid || fitem.calculated){ \r\n\t\t  %>\r\n\t\t  <div class=\"form-group pt-3\">\r\n\t\t    <label for=\"calculated\">\r\n\t\t    \tCalculate <small>(Type <b>@</b> for form fields and <b>=</b> for functions)</small>\r\n\t\t    </label>\r\n\t\t    <div id=\"calcEditable\" class=\"form-control\" style=\"height:auto;\"\r\n\t\t    \toninput=\"editFacade.showHelp(jQuery(this).html(), '.widgetHelp', '.widgetFeedback')\"\r\n\t\t    \tcontenteditable=\"true\"><%-fitem.calculatedHTML?fitem.calculatedHTML:toEditable(fitem.calculated)%></div>\r\n\t\t\t<button type=\"button\" class=\"mt-1 btn btn-secondary\" onclick=\"editFacade.suggestFormula(this)\">\r\n\t\t\t\tGet Help\r\n\t\t\t</button>\r\n\t\t\t<textarea id=\"calculatedHTML\" name=\"calculatedHTML\" style=\"display:none;\"><%-fitem.calculatedHTML%></textarea>\r\n\t\t    <textarea id=\"calculated\" name=\"calculated\" style=\"display:none;\"><%-fitem.calculated%></textarea>\r\n\t\t\t<textarea id=\"prompted\" name=\"prompted\" style=\"display:none;\"><%-fitem.prompted%></textarea>\r\n            <div class=\"widgetHelp\"></div>\r\n\t\t    <div class=\"widgetFeedback\">\r\n\t\t    \t<%\r\n\t\t    \t\tvar ntfuncs = ['TOTAL(','AMT(','AMOUNT('].filter(function(ntfunc){ \r\n\t\t    \t\t\tif(fitem.calculated) return fitem.calculated.toUpperCase().indexOf(ntfunc)>=0;\r\n\t\t    \t\t});\r\n\t\t    \t\tif(!user.neartail && ntfuncs.length>0){\r\n\t\t    \t%>\r\n\t\t    \t\t<span class=\"material-icons\">warning</span>\r\n\t\t    \t\t<span>\r\n\t\t\t    \t\tInstall \r\n\t\t\t    \t\t<a href=\"https://gsuite.google.com/marketplace/app/neartail/743172720058\" target=\"_blank\">Neartail</a>\r\n\t\t\t    \t\taddon for order forms\r\n\t\t    \t\t</span>\r\n\t\t    \t<% } %>\r\n\t\t    \t<% \r\n\t\t    \t\tvar scfuncs = ['SCORE(', 'POINTS('].filter(function(scfunc){ \r\n\t\t    \t\t\tif(fitem.calculated) return fitem.calculated.toUpperCase().indexOf(scfunc)>=0;\r\n\t\t    \t\t});\r\n\t\t    \t\tif(!fc.scorecery && scfuncs.length>0){\r\n\t\t    \t%>\r\n\t\t    \t\t<span class=\"material-icons\">warning</span>\r\n\t\t    \t\t<span>\r\n\t\t\t    \t\tInstall \r\n\t\t\t    \t\t<a href=\"https://workspace.google.com/marketplace/app/scorecery/706030115252\" target=\"_blank\">Scorecery</a>\r\n\t\t\t    \t\taddon for score calculation\r\n\t\t    \t\t</span>\r\n\t\t    \t<% } %>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t\t  <% \r\n\t\t\t} else if(setting.currency){ \r\n\t\t\t\tvar hasCurrency = false;\r\n\t\t\t\tvar ttl = item.title||'';\r\n\t\t\t\tvar desc = item.description||'';\r\n\t\t\t\tif(ttl.indexOf(setting.currency)>=0||desc.indexOf(setting.currency)>=0) hasCurrency = true;\r\n\t\t\t\tvar chs = item.choices||[];\r\n\t\t\t\tif(chs.filter(ch=>ch.value.indexOf(setting.currency)>=0).length>0) hasCurrency = true;\r\n\t\t\t\tvar rws = item.rows||[];\r\n\t\t\t\tif(rws.filter(rw=>rw.value.indexOf(setting.currency)>=0).length>0) hasCurrency = true;\r\n\t\t\t\tif(hasCurrency){\r\n\t\t  %>\r\n\t\t\t<div class=\"form-group pt-3\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\t⚠️ You need to use <%-setting.currency%> in description or \r\n\t\t\t\t\t<%-item.type=='GRID'?'rows':'choices'%>\r\n\t\t\t\t\tfor this product to be included in TOTAL().\r\n\t\t\t\t\t<a onclick=\"jQuery('#EditDialog').modal('hide'); $crisp.push(['do', 'chat:open']);\"\r\n\t\t\t\t\thref=\"javascript:void(0)\">Need help?</a>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t  <% \r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t  %>\r\n\t\t  <% if(fitem.prefill){ %>\r\n\t\t  <div class=\"form-group pt-3\">\r\n\t\t    <label for=\"prefill\">Prefill</label>\r\n\t\t    <textarea name=\"prefill\" class=\"form-control\"\r\n\t\t    \tplaceholder=\"Answer in the widget when the form is loaded\"><%-fitem.prefill%></textarea>\r\n\t\t  </div>\r\n\t\t  <% } %>\r\n\t\t  \r\n      <% if(hasCreatorOrEditor() && !isSignature){%>\r\n        \r\n        <% if(item.validType) { %>\r\n          <div class=\"form-group pt-3\">\r\n            <label for=\"validation\">Validation</label>\r\n            <div class=\"form-group\">\r\n              <p style=\"margin:0;\">You are using google form validation. Do you want to migrate to enhanced validation? </p>\r\n              <button type=\"button\" id=\"clear-validation\" class=\"mt-1 btn btn-secondary\" onclick=\"editFacade.confirmClearValidation()\"\r\n                title=\"Enhanced validation will allows you to validate against dynamic field\"\r\n              >Migrate</button>\r\n            </div>\r\n          </div>\r\n\r\n        <% } else if(validTypes.length > 0) {\r\n            var validType = validation && validation.validType ;\r\n            var validOperator = validation && validation.validOperator;\r\n            var validValue = validation && validation.validValue;\r\n            var validValue2 = validation && validation.validValue2;\r\n            var validMessage = validation && validation.validMessage;\r\n            var validDynamic = validation && validation.validDynamic;\r\n            var validEntryId = validation && validation.validEntryId;\r\n            var validItemId = validation && validation.validItemId;\r\n            var operatorsList = validTypes.find((_) => _.value == (validType||validTypes[0].value));\r\n        %>\r\n          <div class=\"form-group pt-3\">\r\n            <label for=\"validation\">Validation</label>\r\n            <div class=\"valid-configure <%-validType?'d-none':''%>\" >\r\n              <div class=\"form-group\">\r\n                  <a href=\"javascript:void(0)\" onclick=\"editFacade.configureFacadeValidation()\" class=\"card-link\">\r\n                    Configure\r\n                  </a>\r\n              </div>\r\n            </div>\r\n            <div class=\"valid-section <%-!validType?'d-none':''%>\">\r\n              <div class=\"form-group <%-validTypes.length==1?'d-none':''%>\" id=\"validTypeForm\">\r\n                <select name=\"validType\" id=\"validType\" class=\"form-control\" onchange=\"editFacade.changeValidType(this)\">\r\n                  <% if(!validType) {%>\r\n                    <option disabled selected value=\"\"> Select Type </option>\r\n                  <%}%>\r\n                  <% validTypes.forEach(function(type) { %>\r\n                    <option value=\"<%-type.value%>\" <%-type.value==validType?'selected':''%>> <%-type.title%> </option>\r\n                  <% }) %>\r\n                </select>\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <select name=\"validOperator\" id=\"validOperator\" class=\"form-control\" onchange=\"editFacade.changeValidOperator(this)\">\r\n                  <% operatorsList.operators.forEach(function(operator) { %>\r\n                    <option value=\"<%-operator.value%>\" <%-operator.value==validOperator?'selected':''%>> <%-operator.title%> </option>\r\n                  <% }) %>\r\n                </select>\r\n\r\n                <input type=\"hidden\" name=\"validValue\" id=\"validValue\" value=\"<%-validValue%>\">\r\n                <input type=\"hidden\" name=\"validDynamic\" id=\"validDynamic\" value=\"<%-validDynamic?'1':'0'%>\">\r\n                <input type=\"hidden\" name=\"validItemId\" id=\"validItemId\" value=\"<%-validItemId%>\">\r\n                <input type=\"hidden\" name=\"validEntryId\" id=\"validEntryId\" value=\"<%-validEntryId%>\">\r\n              </div>\r\n\r\n              <div class=\"form-group\" id=\"validCombined\">\r\n                <div class=\"input-group\">\r\n                  <input type=\"number\" class=\"form-control\" value=\"<%-validValue%>\" placeholder=\"Number\" onchange=\"editFacade.setValidationData(this.value)\">\r\n                  <select class=\"form-control\" id=\"validItemSelect\" onchange=\"editFacade.setValidationData(this.value,true)\">\r\n                    <option disabled <%-validEntryId?'':'selected'%> value=\"\"> Select field </option>\r\n                    <% itms.forEach(function(itm) { %>\r\n                      <option value=\"<%-itm.entry%>\" <%-itm.entry==validEntryId?'selected':''%> data-item-id=\"<%-itm.id%>\"><%-itm.title%></option>\r\n                    <% }) %>\r\n                  </select>\r\n                  <div class=\"input-group-append\">\r\n                    <button class=\"btn btn-outline-secondary\" id=\"validCombNumber\" type=\"button\" onclick=\"editFacade.changeNumberAndField('Number')\">Number</button>\r\n                    <button class=\"btn btn-outline-secondary\" id=\"validCombField\" type=\"button\" onclick=\"editFacade.changeNumberAndField('Field')\">Field</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group\" id=\"validSingle\">\r\n                <input type=\"text\" autocomplete=\"off\" class=\"form-control\" value=\"<%-validValue%>\" placeholder=\"Number\" onchange=\"editFacade.setValidationData(this.value)\"/>\r\n              </div>\r\n\r\n              <div class=\"form-group\" id=\"validDouble\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-md-5\">\r\n                    <input type=\"<%-validType=='Date'?'date':'number'%>\" class=\"form-control\" Placeholder=\"Number\" value=\"<%-validValue%>\" onchange=\"editFacade.setValidationData(this.value)\"/>\r\n                  </div>\r\n                  <div class=\"col-md-2\" style=\"padding: 5px 20px;\">and</div>\r\n                  <div class=\"col-md-5\">\r\n                    <input type=\"<%-validType=='Date'?'date':'number'%>\" id=\"validValue2\" name=\"validValue2\" class=\"form-control\" Placeholder=\"Number\" value=\"<%-validValue2%>\"/>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <input type=\"text\" autocomplete=\"off\" id=\"validMessage\" name=\"validMessage\" class=\"form-control\" Placeholder=\"Custom error text\" value=\"<%-validMessage%>\"/>\r\n              </div>\r\n\r\n              <div class=\"form-group float-right\">\r\n                  <a href=\"javascript:void(0)\" onclick=\"editFacade.removeFacadeValidation()\" class=\"card-link\" id=\"deleteValidation\">\r\n                    Delete Validation\r\n                  </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        <% } %>\r\n\t  <% } %>\r\n\t  \t<% } %>\r\n\t  </div>\r\n\t  <% if(advn){ %>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-advanced\" role=\"tabpanel\" aria-labelledby=\"pills-profile-advanced\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label>Convert this into a product</label>\r\n\t\t\t<div class=\"dropdown\">\r\n\t\t\t  <div class=\"btn btn-xs btn-info dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">\r\n\t\t\t    Convert\r\n\t\t\t  </div>\r\n\t\t\t  <div class=\"dropdown-menu\">\r\n\t\t\t    <div class=\"dropdown-item\" onclick=\"editFacade.toProduct(this, {measure:'Quantity'})\">Quantity</div>\r\n\t\t\t    <div class=\"dropdown-item\" onclick=\"editFacade.toProduct(this, {measure:'Weight'})\">Weight</div>\r\n\t\t\t  </div>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t  </div>\r\n\t  <% } %>\r\n\t</div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n\t<div class=\"quickbar\">\r\n\t<% if(hasCreatorOrEditor()){ %>\r\n\t\t<span class=\"material-icons trash\" onclick=\"editFacade.deleteItem()\" title=\"Delete this field\">\r\n\t\t\tdelete\r\n\t\t</span>\r\n\t\t<span class=\"material-icons\" onclick=\"editFacade.duplicateItem()\" title=\"Duplicate this field\">\r\n\t\t\tcontent_copy\r\n\t\t</span>\r\n\t\t<span class=\"material-icons\" onclick=\"editFacade.rearrangeItems('<%-item.section.id%>')\" title=\"Rearrange fields\">\r\n\t\t\tmove_up\r\n\t\t</span>\r\n\t<% } %>\r\n      \t<span class=\"material-icons\" onclick=\"editFacade.showMapping()\" title=\"Configure key fields\">edit_note</span>\r\n\t</div>\r\n\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveWidget(this)\">\r\n\t\tSave\r\n\t</button>\r\n</div>\r\n","create":"<%\r\n  var frm = scraped?scraped:form;\r\n  var fc = facade?facade:{};\r\n  if(!fc) fc = {};\r\n  var item = getItem();\r\n  if(!item) item = getFields()[0];\r\n  var fitem = getFacadeItem();\r\n  var showWeight = true;\r\n  if(creating.product && creating.product.type)\r\n    showWeight = false;\r\n%>\r\n<style>\r\n  .titleHelp{ margin-top:10px; }\r\n  .titleHelp a{ color:blue; text-decoration:underline; }\r\n  .titleFeedback{ margin-top:10px; color:red; }\r\n  .titleFeedback a{ color:red; text-decoration:underline; }\r\n  .insertPane .material-icons{ font-size:12px; line-height:24px; padding:2px; }\r\n  .insertPane .insertDetail{ display:none; }\r\n  .newtype .material-icons{ font-size:84px; color:#444; }\r\n  .card-type, .card-type label{ cursor:pointer; }\r\n</style>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Add <%-creating.type?creating.type:'new'%></h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<form class=\"modal-body\" id=\"TitleTab\" onsubmit=\"return false;\">\r\n  <input type=\"hidden\" name=\"type\" value=\"<%=creating.type%>\"/>\r\n  <% if(creating.soldby=='quantity'){ %>\r\n    <label>Do you have different sizes of this product?</label>\r\n    <div class=\"form-group\">\r\n      <input type=\"radio\" name=\"qtysize\" value=\"yes\" id=\"qtyyes\"/> \r\n      <label for=\"qtyyes\">Yes</label>\r\n      <br/>\r\n      <input type=\"radio\" name=\"qtysize\" value=\"no\" id=\"qtyno\" checked/> \r\n      <label for=\"qtyno\">No</label>\r\n    </div>\r\n    <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.confirmCreate(this.form)\">\r\n      Create\r\n    </button>\r\n  <% } else if(creating.soldby=='weight'){ %>\r\n    <label>Do you weigh the product every time it is sold or is this packaged?</label>\r\n    <div class=\"form-group\">\r\n      <input type=\"radio\" name=\"wgttype\" value=\"loose\" id=\"wgtloose\" checked/> \r\n      <label for=\"wgtloose\">Every time</label>\r\n      <br/>\r\n      <input type=\"radio\" name=\"wgttype\" value=\"package\" id=\"wgtpackage\"/> \r\n      <label for=\"wgtpackage\">Packaged</label>\r\n    </div>\r\n    <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.confirmCreate(this.form)\">\r\n      Create\r\n    </button>\r\n  <% } else if(creating.type){ %>\r\n    <div class=\"form-group\">\r\n      <label for=\"title\">Title</label>\r\n      <input type=\"text\" name=\"title\" class=\"form-control\"/>\r\n    </div>\r\n    <div class=\"form-group insertPane\">\r\n      <label>\r\n        Insert after \r\n        <a href=\"javascript:void(0)\" onclick=\"jQuery('.insertDetail').toggle(); jQuery(this).toggle();\">\r\n          <%-getItem().title%>\r\n          <i class=\"material-icons\">edit</i>\r\n        </a>\r\n      </label>\r\n      <div class=\"insertDetail\">\r\n        <select name=\"insertAfter\" class=\"form-control\"/>\r\n          <option value=\"root\"><%-frm.title%></option>\r\n        <% \r\n          var itms = getFields();\r\n          itms.forEach(itm=>{ \r\n        %>\r\n          <option value=\"<%-itm.id%>\" <%-itm.id==itemId?'selected':''%>>\r\n            <%-itm.title%>\r\n          </option>\r\n        <% }) %>\r\n        </select>\r\n      </div>\r\n    </div>\r\n    <% if(creating.type=='product'){ %>\r\n      <label>Sold by</label>\r\n      <div class=\"form-group\">\r\n        <input type=\"radio\" name=\"soldby\" value=\"quantity\" id=\"sbqty\" checked/> \r\n        <label for=\"sbqty\">Quantity</label>\r\n        <br/>\r\n        <% if(showWeight) { %>\r\n          <input type=\"radio\" name=\"soldby\" value=\"weight\" id=\"sbwgt\"/> \r\n          <label for=\"sbwgt\">Weight</label>\r\n        <% } %>\r\n      </div>\r\n      <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.create(this.form)\">\r\n        Next\r\n      </button>\r\n    <% } else if(creating.type=='field'){ %>\r\n        <div class=\"form-group\">\r\n          <label for=\"widget\">Widget</label>\r\n          <select id=\"widget\" name=\"widget\" class=\"form-control\">\r\n          <% \r\n            var widgets = {\r\n              TextItem:'Text box', ParagraphTextItem:'Text area', ListItem:'Drop-down', MultipleChoiceItem:'Radio buttons', \r\n              CheckboxItem:'Check boxes', DateItem:'Date', GridItem:'Grid', FileUpload:'File upload',ImageItem: 'Image'\r\n            };\r\n            if(fc.formesign){\r\n              widgets['Signature'] = 'E-Signature'\r\n            }\r\n            if(!formsApiEnabled())\r\n              delete widgets.ImageItem;\r\n            for(var wgd in widgets){\r\n          %>\r\n            <option value=\"<%=wgd%>\"><%-widgets[wgd]%></option>\r\n          <% } %>\r\n          </select>\r\n        </div>\r\n        <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.confirmCreate(this.form)\">\r\n          Create\r\n        </button>\r\n    <% } else if(creating.type=='header' || creating.type=='page'){ %>\r\n        <input type=\"hidden\" name=\"widget\" value=\"<%-creating.type=='page'?'PageBreakItem':'SectionHeaderItem'%>\"/>\r\n        <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.confirmCreate(this.form)\">\r\n          Create\r\n        </button>\r\n    <% } %>\r\n  <% } else{ %>\r\n      <div class=\"form-group row newtype\">\r\n        <% \r\n          var typs = { \r\n            'product':{display:'Product', icon:'shopping_cart'}, \r\n            'field':{display:'Form field', icon:'toggle_off'},\r\n            'header':{display:'Header', icon:'title'},\r\n            'page':{display:'Page', icon:'article'}\r\n          };\r\n          if(item.type=='PAGE_BREAK' || item.type=='SECTION_HEADER' || item.product)\r\n            typs.product.selected = true;\r\n          else\r\n            typs.field.selected = true;\r\n          for(var tnm in typs){\r\n            var typ = typs[tnm];\r\n        %>\r\n        <div class=\"col-6\">\r\n          <label class=\"card-type card text-center bg-light pt-3 mb-3\" for=\"<%-tnm%>\">\r\n            <span class=\"material-icons\"><%-typ.icon%></span>\r\n            <div class=\"card-body\" style=\"padding:1rem 0.5rem;\">\r\n              <p class=\"card-text\">\r\n                <input type=\"radio\" <%-typ.selected?'checked':''%>\r\n                  id=\"<%-tnm%>\" name=\"type\" value=\"<%-tnm%>\"> \r\n                <label for=\"<%-tnm%>\"><%-typ.display%></label>\r\n              </p>\r\n            </div>\r\n          </label>\r\n        </div>\r\n        <%\r\n          } \r\n        %>\r\n      </div>\r\n      <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.create(this.form)\">\r\n        Next\r\n      </button>\r\n  <% } %>\r\n</form>\r\n\r\n","createprice":"<%\r\n  var frm = scraped||form||{};\r\n\tvar {mapping, peergateway} = facade||{};\r\n  var {step, title, insertAfter, type, calculation} = creatingprice||{};\r\n  var typs = { \r\n    'service':'Service',\r\n    'amount':'Order Amount',\r\n    'delivery-fee':'Delivery Fee',\r\n    'discount':'Discount',\r\n    'taxes':'Tax',\r\n    'tip':'Tip',\r\n    'donation':'Donation',\r\n    'net-amount':'Net Amount'\r\n  };\r\n  if(!peergateway) delete typs.service;\r\n  for(var tnm in typs) if(mapping?.[tnm]) delete typs[tnm];\r\n  var calculations = {percentage:'Percentage %'};\r\n  if(type=='tip')\r\n  {\r\n    calculations.user = 'User entered amount';\r\n  }\r\n  else if(type=='donation')\r\n  {\r\n    calculations.fixed = 'Fixed amount';\r\n    calculations.user = 'User entered amount';\r\n  }\r\n  else if(type=='taxes')\r\n  {\r\n    delete calculations.percentage;\r\n    calculations.standard = 'Standard calculation using TAX()';\r\n    calculations.percentage = 'Percentage %';\r\n    calculations.prompted = 'Custom calculation';\r\n  }\r\n  else if(type=='amount')\r\n  {\r\n    delete calculations.percentage;\r\n    calculations.standard = 'Standard calculation using TOTAL()';\r\n    calculations.prompted = 'Custom calculation';\r\n  }\r\n  else if(type=='net-amount')\r\n  {\r\n    delete calculations.percentage;\r\n    calculations.standard = 'Standard calculation using NETTOTAL()';\r\n    calculations.prompted = 'Custom calculation';\r\n  }\r\n  else\r\n  {\r\n    calculations.fixed = 'Fixed amount';\r\n    calculations.prompted = 'Custom calculation';\r\n  }\r\n%>\r\n<style>\r\n  .titleHelp{ margin-top:10px; }\r\n  .titleHelp a{ color:blue; text-decoration:underline; }\r\n  .titleFeedback{ margin-top:10px; color:red; }\r\n  .titleFeedback a{ color:red; text-decoration:underline; }\r\n  .insertPane .material-icons{ font-size:12px; line-height:24px; padding:2px; }\r\n  .insertPane .insertDetail{ display:none; }\r\n  .newtype .material-icons{ font-size:84px; color:#444; }\r\n  .card-type, .card-type label{ cursor:pointer; }\r\n</style>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Add price field</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<form class=\"modal-body\" id=\"TitleTab\" onsubmit=\"return false;\">\r\n  <% if(step==2){ %>\r\n    <% if(calculation=='percentage'){ %>\r\n      <div class=\"form-group\">\r\n        <label for=\"percentage\"><%-calculations.percentage%></label>\r\n      </div>\r\n\t\t\t<div class=\"input-group mb-2\">\r\n\t\t\t\t<input type=\"number\" name=\"percentage\" class=\"form-control\" value=\"1\"/>\r\n\t\t\t\t<div class=\"input-group-append\">\r\n\t\t\t\t  <div class=\"input-group-text\">%</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n      <div class=\"form-group\">\r\n        <label>Of</label>\r\n        <select name=\"of\" class=\"form-control\"/>\r\n          <option value=\"\">-- Select --</option>\r\n        <% \r\n          var itms = getFields();\r\n          itms.forEach(itm=>{ \r\n        %>\r\n          <option value=\"<%-itm.id%>\" <%-itm.id==mapping?.amount?'selected':''%>>\r\n            <%-itm.title%>\r\n          </option>\r\n        <% }) %>\r\n        </select>\r\n      </div>\r\n    <% } else if(calculation=='fixed'){ %>\r\n      <div class=\"form-group\">\r\n        <label for=\"fixed\"><%-calculations.fixed%></label>\r\n        <input type=\"number\" name=\"fixed\" class=\"form-control\" value=\"1\"/>\r\n      </div>\r\n    <% } else if(calculation=='standard'){ %>\r\n      <div class=\"form-group\">\r\n        <label for=\"standard\">Standard calculation</label>\r\n        <input type=\"text\" name=\"standard\" class=\"form-control\" \r\n          value=\"<%-calculations.standard.split(' using ').pop().trim()%>\"/>\r\n      </div>\r\n    <% } else if(calculation=='user'){ %>\r\n      <div class=\"form-group\">\r\n        <label for=\"user\">User will be able to enter this amount</label>\r\n      </div>\r\n    <% } else{ %>\r\n      <div class=\"form-group\">\r\n        <label for=\"prompted\">Logic for calculating <%-title%></label>\r\n        <textarea name=\"prompted\" class=\"form-control\" rows=\"4\"\r\n          placeholder=\"Write in plain English\"></textarea>\r\n      </div>\r\n    <% } %>\r\n    <input type=\"hidden\" name=\"step\" value=\"3\"/>\r\n    <button type=\"button\" class=\"btn btn-primary mt-1\" \r\n      onclick=\"editFacade.confirmPrice(this.form); this.innerHTML='Creating...'; this.disabled=true;\">\r\n      Create\r\n    </button>\r\n  <% } else if(step==1){ %>\r\n    <div class=\"form-group\">\r\n      <label for=\"title\">Title</label>\r\n      <input type=\"text\" name=\"title\" class=\"form-control\" value=\"<%=typs[type||'service']%>\"/>\r\n    </div>\r\n    <div class=\"form-group insertPane\">\r\n      <label>\r\n        Insert after \r\n        <a href=\"javascript:void(0)\" onclick=\"jQuery('.insertDetail').toggle(); jQuery(this).toggle();\">\r\n          <%-getItem(insertAfter)?.title%>\r\n          <i class=\"material-icons\">edit</i>\r\n        </a>\r\n      </label>\r\n      <div class=\"insertDetail\">\r\n        <select name=\"insertAfter\" class=\"form-control\"/>\r\n          <option value=\"root\"><%-frm.title%></option>\r\n        <% \r\n          var itms = getFields();\r\n          itms.forEach(itm=>{ \r\n        %>\r\n          <option value=\"<%-itm.id%>\" <%-itm.id==insertAfter?'selected':''%>>\r\n            <%-itm.title%>\r\n          </option>\r\n        <% }) %>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group mt-4 mb-0\">\r\n        <label>Calculate amount by</label>\r\n      </div>\r\n      <% Object.entries(calculations).forEach((calc,c)=>{ %>\r\n          <div class=\"form-group mb-0\">\r\n              <input type=\"radio\" <%-c==0?'checked':''%>\r\n                id=\"<%-calc[0]%>\" name=\"calculation\" value=\"<%-calc[0]%>\"> \r\n              <label for=\"<%-calc[0]%>\"><%-calc[1]%></label>\r\n          </div>\r\n      <% }) %>\r\n    </div>\r\n    <input type=\"hidden\" name=\"step\" value=\"2\"/>\r\n    <button type=\"button\" class=\"btn btn-primary mt-1\" onclick=\"editFacade.createPrice(this.form)\">\r\n      Next\r\n    </button>\r\n  <% } else{ %>\r\n        <% for(var tnm in typs){ %>\r\n            <div class=\"form-group mb-0\">\r\n                <input type=\"radio\" <%-tnm=='service'?'checked':''%>\r\n                  id=\"<%-tnm%>\" name=\"type\" value=\"<%-tnm%>\"> \r\n                <label for=\"<%-tnm%>\"><%-typs[tnm]%></label>\r\n            </div>\r\n        <% } %>\r\n      <input type=\"hidden\" name=\"step\" value=\"1\"/>\r\n      <button type=\"button\" class=\"btn btn-primary mt-3\" onclick=\"editFacade.createPrice(this.form)\">\r\n        Next\r\n      </button>\r\n  <% } %>\r\n</form>\r\n\r\n","product":"<% \r\n\tvar frm = scraped?scraped:form;\r\n\tvar fc = facade?facade:{};\r\n\tvar unit = 'kg';\r\n\tif(fc.setting && fc.setting.currencyCode=='USD')\r\n\t\tunit = 'lbs'\r\n\tif(!fc) fc = {};\r\n\tvar item = getItem();\r\n\tvar fitem = getFacadeItem();\r\n\tvar lstprc = fitem.price?fitem.price:price(item.help, facade.setting.currency)\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n\t<ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link active\" id=\"pills-question-tab\" data-toggle=\"pill\" href=\"#pills-question\" role=\"tab\" aria-controls=\"pills-question\" aria-selected=\"true\">product</a>\r\n\t  </li>\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link\" id=\"pills-advanced-tab\" data-toggle=\"pill\" href=\"#pills-advanced\" role=\"tab\" aria-controls=\"pills-advanced\" aria-selected=\"false\">Advanced</a>\r\n\t  </li>\r\n\t</ul>\r\n\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t<span aria-hidden=\"true\">&times;</span>\r\n\t</button>\r\n</div>\r\n<style>\r\n\t#WidgetTab .tab-pane{ position:relative; min-height:300px; }\r\n\t#WidgetTab .prdimage{ \r\n\t\tdisplay:block; text-align:center; margin:auto; padding:10px;\r\n\t\twidth:180px; background-color: #fff; border-radius:.25rem;\r\n\t}\r\n\t#WidgetTab .prdimagebox{ cursor:pointer; width:120px; height:120px; object-fit:cover; }\r\n\t#WidgetTab #prdimagelbl{ display:block; text-align:center; padding-top:10px; }\r\n\t#WidgetTab .imagefile{ display:none; }\r\n\t#WidgetTab .configurables .input-group-prepend .priced{ margin-left:5px; }\r\n\t#WidgetTab .configurables .input-group-append{ margin-left:5px; }\r\n\t#WidgetTab .variants .input-group-prepend .priced{ margin-left:5px; }\r\n\t#WidgetTab .variants .input-group-append{ margin-left:5px; }\r\n\t#WidgetTab .addons .input-group-prepend .priced{ margin-left:5px; }\r\n\t#WidgetTab .addons .input-group-append{ margin-left:5px; }\r\n\t#WidgetTab .choices .input-group-prepend .discounted{ margin-left:5px; }\r\n\t#WidgetTab .choices .input-group-append{ margin-left:5px; }\r\n\t#WidgetTab #stockCard input{ width:80px; }\r\n</style>\r\n<form class=\"modal-body\" id=\"WidgetTab\" onsubmit=\"return false;\">\r\n\t<div class=\"tab-content\" id=\"pills-tabContent\">\r\n\t  <div class=\"tab-pane fade show active\" id=\"pills-question\" role=\"tabpanel\" aria-labelledby=\"pills-question\">\r\n\t\t  <div class=\"form-group prdimage\">\r\n\t\t\t<%\r\n\t\t\t\tvar prdimage = '/img/insert_photo.svg';\r\n\t\t\t\tif(item.titleImage) prdimage = 'https://neartail.com/itemimg/'+params.publishId+'/item/'+itemId+'/title/'+item.titleImage.blob;\r\n\t\t\t\tif(fitem.prdimage) prdimage = fitem.prdimage;\r\n\t\t\t%>\r\n\t\t\t<img class=\"prdimagebox\" src=\"<%-prdimage%>\" onclick=\"document.getElementById('prdimagefile').click()\"/>\r\n\t\t\t<label id=\"prdimagelbl\">\r\n\t\t\t<% if(fitem.prdimage){ %>\r\n\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"document.getElementById('prdimagefile').click()\">\r\n\t\t\t\t\tChange\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href=\"javascript:void(0)\" style=\"padding-left:10px; color:#dc3545;\"\r\n\t\t\t\t\tonclick=\"jQuery('#prdimagehdn').val(''); jQuery('.prdimagebox').attr('src', '/img/insert_photo.svg');\">\r\n\t\t\t\t\tDelete\r\n\t\t\t\t</a>\r\n\t\t\t<% } else{ %>\r\n\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"document.getElementById('prdimagefile').click()\">\r\n\t\t\t\t\tChange image\r\n\t\t\t\t</a>\r\n\t\t\t<% } %>\r\n\t\t\t</label>\r\n\t\t\t<input type=\"hidden\" name=\"widget\" value=\"product\">\r\n\t\t\t<input type=\"hidden\" id=\"prdimagehdn\" name=\"prdimage\" value=\"<%=fitem.prdimage%>\">\r\n\t\t\t<input type=\"hidden\" id=\"prdorgimagehdn\" name=\"prdorgimage\" value=\"<%=fitem.prdorgimage%>\">\r\n\t\t\t<input type=\"file\" accept=\"image/*\" id=\"prdimagefile\" class=\"imagefile\"\r\n\t\t\t\tonclick=\"this.value=null;\" onchange=\"editFacade.showCropper(this)\"/>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"title\">\r\n\t\t    \tTitle\r\n\t\t    </label>\r\n\t\t    <input type=\"text\" name=\"title\" class=\"form-control\" \r\n\t\t\t\tvalue=\"<%=fitem.title?fitem.title:item.title%>\"/>\r\n\t\t  </div>\r\n\t\t  <div class=\"addbar prddetailMDCard\" style=\"display:<%-fitem.prddetailMD?'none':'block'%>\"\r\n\t\t  \tonclick=\"jQuery('.prddetailMDCard').toggle()\">\r\n\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t  \tDescription\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group prddetailMDCard\" style=\"display:<%-fitem.prddetailMD?'block':'none'%>\">\r\n\t\t\t<label for=\"primary\">Description</label>\r\n\t\t\t<div id=\"mdEditor\"><%-fitem.prddetailMark%></div>\r\n\t\t\t<textarea name=\"prddetailMD\" id=\"md-input\" hidden><%-fitem.prddetailMD%></textarea>\r\n\t\t\t<textarea name=\"prddetailMark\" id=\"md-input-html\" hidden><%-fitem.prddetailMark%></textarea>\r\n\t\t    <div class=\"prddetailFeedback\"></div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group pt-3\">\r\n\t\t    <label for=\"price\">\r\n\t\t    \tPrice\r\n\t\t    </label>\r\n\t\t\t<div class=\"input-group mb-2\">\r\n\t\t\t\t<div class=\"input-group-prepend\">\r\n\t\t\t\t  <div class=\"input-group-text\"><%-facade.setting.currency%></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"number\" name=\"price\" class=\"form-control\" \r\n\t\t\t\t\tvalue=\"<%=lstprc%>\" min=\"0\"/>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t  <% if(fitem.fullprice || fitem.measure!='Configurable'){ %>\r\n\t\t  <div class=\"addbar fullpriceCard\" style=\"display:<%-fitem.fullprice?'none':'block'%>\"\r\n\t\t  \tonclick=\"jQuery('.fullpriceCard').toggle()\">\r\n\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t  \tFull price\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group fullpriceCard\" style=\"display:<%-fitem.fullprice?'block':'none'%>\">\r\n\t\t    <label for=\"fullprice\">Full price</label>\r\n\t\t\t<div class=\"input-group mb-2\">\r\n\t\t\t\t<div class=\"input-group-prepend\">\r\n\t\t\t\t  <div class=\"input-group-text\"><%-facade.setting.currency%></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"number\" name=\"fullprice\" class=\"form-control\" \r\n\t\t\t\t\tvalue=\"<%=fitem.fullprice%>\" min=\"0\"/>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t  <% } %>\r\n\t\t  <div class=\"addbar taxCard\" style=\"display:<%-fitem.tax?'none':'block'%>\"\r\n\t\t  \tonclick=\"jQuery('.taxCard').toggle()\">\r\n\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t  \tTax\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group taxCard\" style=\"display:<%-fitem.tax?'block':'none'%>\">\r\n\t\t    <label for=\"tax\">Tax (in %)</label>\r\n\t\t\t<div class=\"input-group mb-2\">\r\n\t\t\t\t<input type=\"number\" name=\"tax\" class=\"form-control\" value=\"<%=fitem.tax%>\"/>\r\n\t\t\t\t<div class=\"input-group-append\">\r\n\t\t\t\t  <div class=\"input-group-text\">%</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t  <% \r\n\t\t  \tif(fitem.measure=='Configurable'){ \r\n\t\t  \t\tvar vrns = [];\r\n\t\t  \t\tvar vrnmap = fitem.variants;\r\n\t\t  \t\tif(!vrnmap)\r\n\t\t  \t\t{\r\n\t\t  \t\t\tvrnmap = {};\r\n\t\t  \t\t\tvrnmap[new Date().getTime()] = {name:'Untitled'};\r\n\t\t  \t\t}\r\n\t\t  \t\tfor(var idx in vrnmap)\r\n\t\t  \t\t\tvrns.push(Object.assign({index:idx}, vrnmap[idx]));\r\n\t\t\t\tvar hasprices = vrns.filter(d=>d.price).length>0;\r\n\t\t  %>\r\n\t\t\t<div class=\"form-group configurables pt-3 variant-section\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<label class=\"col-6\" for=\"configurables\">\r\n\t\t\t\t\t\tVariants\r\n\t\t\t  \t\t\t<span class=\"material-icons soldby\" title=\"This product is sold as variants. Your users can buy this product in small or medium or large size.\">help</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div class=\"col-6 addright priced pricedvar\" onclick=\"jQuery('.pricedvar').toggle()\"\r\n\t\t\t\t\t\tstyle=\"display:<%-hasprices?'none':'inline-block'%>\">\r\n\t\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\t\tVariant price\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"configurable\">\r\n\t\t\t\t<% vrns.forEach((vrn, v)=>{ %>\r\n\t\t\t\t\t<div class=\"input-group variant-item\">\r\n\t\t\t\t\t\t<input type=\"text\" name=\"variant.name\" class=\"form-control input-row\" value=\"<%=vrn.name%>\"/>\r\n\t\t\t\t\t\t<div class=\"input-group-prepend\">\r\n\t\t\t\t\t\t  <div class=\"input-group-text priced pricedvar\"\r\n\t\t\t\t\t\t\tstyle=\"display:<%-hasprices?'block':'none'%>\">\r\n\t\t\t\t\t\t  \t<%-facade.setting.currency%>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"hidden\" name=\"variant.index\" value=\"<%=vrn.index%>\"/>\r\n\t\t\t\t\t\t<input type=\"number\" name=\"variant.price\" class=\"form-control priced pricedvar\"\r\n\t\t\t\t\t\t\tstyle=\"display:<%-hasprices?'block':'none'%>\" value=\"<%=vrn.price%>\"/>\r\n\t\t\t\t\t\t<div class=\"input-group-append\" onclick=\"editFacade.removeVariant(this)\">\r\n\t\t\t\t\t\t\t<div class=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<div class=\"material-icons\">close</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<% }) %>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Add option\"\r\n\t\t\t\t\t\tonfocus=\"editFacade.addRow('.configurables .configurable .input-group')\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"form-group pt-1 variant-section\">\r\n\t\t\t\t<input type=\"hidden\" id=\"multiselect\" name=\"multiselect\" value=\"<%-fitem.multiselect%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"multiselectcheck\" <%-fitem.multiselect=='yes'?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#multiselect').val(this.checked?'yes':'no')\"/>\r\n\t\t\t    <label for=\"multiselectcheck\">Allows users to select multiple variants</label>\r\n\t\t\t</div>\r\n\t\t  <% } %>\r\n\t\t  <% \r\n\t\t  \tif(fitem.rows)\r\n\t\t  \t\titem.rows = fitem.rows.map(ch=>Object.assign({value:ch}));\r\n\t\t  \tif(item.rows){ \r\n\t\t  %>\r\n\t\t\t<div class=\"form-group variants pt-3\">\r\n\t\t\t\t<label for=\"rows\">\r\n\t\t\t\t\tVariants\r\n\t\t\t\t</label>\r\n\t\t\t\t<div class=\"variant\">\r\n\t\t\t\t<% item.rows.forEach((rw, w)=>{ %>\r\n\t\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"text\" name=\"rows\" class=\"form-control input-row\" value=\"<%=rw.value%>\"/>\r\n\t\t\t\t\t\t<div class=\"input-group-append\" onclick=\"jQuery(this).parent().remove()\">\r\n\t\t\t\t\t\t\t<div class=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<div class=\"material-icons\">close</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<% }) %>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Add option\"\r\n\t\t\t\t\t\tonfocus=\"editFacade.addRow('.variants .variant .input-group')\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t  <% } %>\r\n\t\t  <% \r\n\t\t  \tif(fitem.choices)\r\n\t\t  \t\titem.choices = fitem.choices.map(ch=>Object.assign({value:ch}));\r\n\t\t  \tif(fitem.columns)\r\n\t\t  \t\titem.choices = fitem.columns.map(ch=>Object.assign({value:ch}));\r\n\t\t  \tif(item.choices){ \r\n\t\t\t\tvar qntchs = item.choices.filter(ch=>isNaN(ch.value)==false);\r\n\t\t\tif(!fitem.discounted) fitem.discounted = [];\r\n\t\t\tvar hasdiscount = fitem.discounted.filter(d=>d).length>0;\r\n\t\t  %>\r\n\t\t\t<div class=\"form-group choices pt-3\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<label class=\"col-6\" for=\"<%-item.type=='GRID'?'columns':'choices'%>\">\r\n\t\t\t\t\t\t<% if(fitem.measure=='Quantity'){ %>\r\n\t\t\t\t\t\t\t<%-fitem.measure%>\r\n\t\t\t  \t\t\t\t<span class=\"material-icons soldby\" title=\"This product is sold by quantity. Your users can buy 1 or 2 or 3 units of this product.\">help</span>\r\n\t\t\t\t\t\t<% } else if(fitem.measure=='Weight'){ %>\r\n\t\t\t\t\t\t\t<%-fitem.measure%> (<%-unit%>)\r\n\t\t\t  \t\t\t\t<span class=\"material-icons soldby\" title=\"This product is sold by weight. Your users can buy 1<%-unit%> or 1.5<%-unit%> or 2<%-unit%> of this product.\">help</span>\r\n\t\t\t\t\t\t<% } else{ %>\r\n\t\t\t\t\t\t\t<%-qntchs.length==item.choices.length?'Quantity':'Choices'%>\r\n\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<% if(fitem.type=='GRID'){ %>\r\n\t\t\t\t\t<% } else if(fitem.measure=='Configurable'){ %>\r\n\t\t\t\t\t<% } else if(fitem.measure){ %>\r\n\t\t\t\t\t<div class=\"col-6 addright discounted\" onclick=\"jQuery('.discounted').toggle()\"\r\n\t\t\t\t\t\tstyle=\"display:<%-hasdiscount?'none':'inline-block'%>\">\r\n\t\t\t\t\t\t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t\t\tBulk Discount\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<% } %>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"choice\">\r\n\t\t\t\t<% item.choices.forEach((ch, c)=>{ %>\r\n\t\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"number\" name=\"<%-item.type=='GRID'?'columns':'choices'%>\" \r\n\t\t\t\t\t\t\tclass=\"form-control input-row\" value=\"<%=ch.value%>\"/>\r\n\t\t\t\t\t\t<% if(fitem.measure){ %>\r\n\t\t\t\t\t\t\t<div class=\"input-group-prepend\">\r\n\t\t\t\t\t\t\t  <div class=\"input-group-text discounted\"\r\n\t\t\t\t\t\t\t\tstyle=\"display:<%-hasdiscount?'block':'none'%>\">\r\n\t\t\t\t\t\t\t  \t<%-facade.setting.currency%>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<input type=\"number\" name=\"discounted\" class=\"form-control discounted\" \r\n\t\t\t\t\t\t\t\tstyle=\"display:<%-hasdiscount?'block':'none'%>\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"<%=lstprc*(isNaN(ch.value)?1:Number(ch.value))%>\" \r\n\t\t\t\t\t\t\t\tvalue=\"<%=fitem.discounted[c]%>\"/>\r\n\t\t\t\t\t\t<% } %>\r\n\t\t\t\t\t\t<div class=\"input-group-append\" onclick=\"jQuery(this).parent().remove()\">\r\n\t\t\t\t\t\t\t<div class=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<div class=\"material-icons\">close</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<% }) %>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"input-group\">\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Add option\"\r\n\t\t\t\t\t\tonfocus=\"editFacade.addRow('.choices .choice .input-group')\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t  <% } else if(fitem.measure=='Quantity'){ %>\r\n\t\t  \t<!-- Add choices -->\r\n\t\t  <% } %>\r\n\t  </div>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-advanced\" role=\"tabpanel\" aria-labelledby=\"pills-profile-advanced\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t  <% if(fitem.mode=='hide'){ %>\r\n\t\t    <label>Show this product to users</label>\r\n\t\t    <button type=\"button\" class=\"btn btn-xs btn-primary\"\r\n\t\t    \tonclick=\"editFacade.hideWidget({mode:null}, this)\">Show</button>\r\n\t\t  <% } else{ %>\r\n\t\t    <label>Don't show this product to users</label>\r\n\t\t    <button type=\"button\" class=\"btn btn-xs btn-secondary\"\r\n\t\t    \tonclick=\"editFacade.hideWidget({mode:'hide'}, this)\">Hide</button>\r\n\t\t  <% } %>\r\n\t\t  </div>\r\n\t\t  <% if(false){ %>\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t\t<input type=\"hidden\" id=\"reqfield\" name=\"required\" value=\"<%-item.required?'yes':'no'%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"reqcheckbox\" <%-item.required?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#reqfield').val(this.checked?'yes':'no')\"/>\r\n\t\t\t    <label for=\"reqcheckbox\">Mark this product as required</label>\r\n\t\t\t  </div>\r\n\t\t  <% } %>\r\n\t\t  <% if(item.type=='GRID'){ %>\r\n\t\t  <% } else if(fitem.measure){ %>\r\n\t\t\t  <div class=\"form-group pt-3\">\r\n\t\t\t\t<input type=\"hidden\" id=\"inventory\" name=\"inventory\" value=\"<%-fitem.inventory%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"inventorycheck\" <%-fitem.inventory=='yes'?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#inventory').val(this.checked?'yes':'no'); jQuery('.stockCard').css('display', this.checked?'block':'none');\"/>\r\n\t\t\t    <label for=\"inventorycheck\">Enable inventory</label>\r\n\t\t\t  </div>\r\n\t\t\t  <% if(fitem.measure=='Configurable' && fitem.variants){ %>\r\n\t\t\t  \t<div class=\"form-group stockCard\" style=\"display:<%-fitem.inventory=='yes'?'block':'none'%>\">\r\n\t\t\t    \t<label>Available stock for</label>\r\n\t\t\t  \t</div>\r\n\t\t\t  \t<%\r\n\t\t\t  \t\tfor(var vid in fitem.variants){\r\n\t\t\t  \t\t\tvar vrn = fitem.variants[vid];\r\n\t\t\t  \t%>\r\n\t\t\t\t  <div class=\"form-group stockCard\" style=\"display:<%-fitem.inventory=='yes'?'block':'none'%>\">\r\n\t\t\t\t    <label for=\"stock.<%-vid%>\">\r\n\t\t\t\t    \t<%-vrn.name%>\r\n\t\t\t\t    </label>\r\n\t\t\t\t\t<input type=\"number\" class=\"form-control pull-right shorten\" id=\"stock.<%-vid%>\" name=\"stock.<%-vid%>\" value=\"<%-vrn.remain||vrn.remain==0?vrn.remain:vrn.stock%>\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t<% } %>\r\n\t\t\t  <% } else{ %>\r\n\t\t\t\t  <div class=\"form-group stockCard\" style=\"display:<%-fitem.inventory=='yes'?'block':'none'%>\">\r\n\t\t\t\t    <label for=\"stock\">\r\n\t\t\t\t    \t<%-fitem.measure%> you have in stock\r\n\t\t\t\t    \t<br/>\r\n\t\t\t\t    \t<small>Mark as <b>Sold out</b>, when stock goes to zero</small>\r\n\t\t\t\t    </label>\r\n\t\t\t\t\t<input type=\"number\" class=\"form-control pull-right shorten\" id=\"stock\" name=\"stock\" value=\"<%-fitem.remain||fitem.remain==0?fitem.remain:fitem.stock%>\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t  <% } %>\r\n\r\n\t\t\t  <div class=\"form-group pt-3\">\r\n\t\t\t\t<input type=\"hidden\" id=\"supplied\" name=\"supplied\" value=\"<%-fitem.supplied%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"suppliedcheck\" <%-fitem.supplied=='yes'?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#supplied').val(this.checked?'yes':'no'); jQuery('.supplyCard').css('display', this.checked?'block':'none');\"/>\r\n\t\t\t    <label for=\"suppliedcheck\">Enable supply chain</label>\r\n\t\t\t  </div>\r\n\t\t\t  <div class=\"form-group supplyCard\" style=\"display:<%-fitem.supplied=='yes'?'block':'none'%>\">\r\n\t\t\t    <label for=\"supplier\">Supplier code</label>\r\n\t\t\t\t<input type=\"text\" class=\"form-control pull-right shorten\" id=\"supplier\" name=\"supplier\" value=\"<%-fitem.supplier%>\"/>\r\n\t\t\t  </div>\r\n\r\n\t\t\t  <div class=\"form-group pt-3\">\r\n\t\t\t\t<input type=\"hidden\" id=\"shipped\" name=\"shipped\" value=\"<%-fitem.shipped%>\"/>\r\n\t\t\t\t<input type=\"checkbox\" id=\"shippedcheck\" <%-fitem.shipped=='yes'?'checked':''%> \r\n\t\t\t\t\tonchange=\"jQuery('#shipped').val(this.checked?'yes':'no'); jQuery('.shipCard').css('display', this.checked?'block':'none');\"/>\r\n\t\t\t    <label for=\"shippedcheck\">Enable shipping</label>\r\n\t\t\t  </div>\r\n\t\t\t  <% if(fitem.measure=='Configurable' && fitem.variants){ %>\r\n\t\t\t  \t<div class=\"form-group shipCard\" style=\"display:<%-fitem.shipped=='yes'?'block':'none'%>\">\r\n\t\t\t    \t<label>Shipping weight (in <%-unit%>) for</label>\r\n\t\t\t  \t</div>\r\n\t\t\t  \t<%\r\n\t\t\t  \t\tfor(var vid in fitem.variants){\r\n\t\t\t  \t\t\tvar vrn = fitem.variants[vid];\r\n\t\t\t  \t%>\r\n\t\t\t\t  <div class=\"form-group shipCard\" style=\"display:<%-fitem.shipped=='yes'?'block':'none'%>\">\r\n\t\t\t\t    <label for=\"ship.<%-vid%>\">\r\n\t\t\t\t    \t<%-vrn.name%>\r\n\t\t\t\t    </label>\r\n\t\t\t\t\t<input type=\"number\" class=\"form-control pull-right shorten\" id=\"ship.<%-vid%>\" name=\"ship.<%-vid%>\" value=\"<%-vrn.ship%>\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t<% } %>\r\n\t\t\t  <% } else{ %>\r\n\t\t\t\t  <div class=\"form-group shipCard\" style=\"display:<%-fitem.shipped=='yes'?'block':'none'%>\">\r\n\t\t\t\t    <label for=\"ship\">Shipping weight (in <%-unit%>)</label>\r\n\t\t\t\t\t<input type=\"number\" class=\"form-control pull-right shorten\" id=\"ship\" name=\"ship\" value=\"<%-fitem.ship%>\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t  <% } %>\r\n\t\t  <% } %>\r\n\r\n\t\t  <div class=\"form-group\">\r\n\t\t\t<% if(fitem.measure) { \r\n\t\t\t\tvar productTypes = getProductTypes();\r\n\t\t\t%>\r\n\t\t\t\t<label> This product unit of measure is <%-productTypes[fitem.measure].title %> </label>\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-xs btn-secondary\"\r\n\t\t    \tonclick=\"$('#convert_product').show()\">Change</button>\r\n\t\t\t\t\r\n\t\t\t<% } %>\r\n\t\t  </div>\r\n\r\n\r\n\t\t<div class=\"form-group row newtype\" id=\"convert_product\" style=\"display:none;\">\r\n\t\t\t<div class=\"col-12\">\r\n\t\t\t\t<p style=\"font-weight:bold;\"> Convert to: </p>\t\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<% for(var productType in productTypes) { %>\r\n\t\t\t\t<% if(fitem.measure != productType) { %>\r\n\t\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t\t<label class=\"card-type card text-center bg-light pt-3 mb-3\" for=\"<%-'convert-'+productTypes[productType].title %>\">\r\n\t\t\t\t\t\t\t<span class=\"material-icons\">settings_suggest</span>\r\n\t\t\t\t\t\t\t<div class=\"card-body\" style=\"padding:1rem 0.5rem;\">\r\n\t\t\t\t\t\t\t\t<p class=\"card-text\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" id=\"<%-'convert-'+productTypes[productType].title %>\" name=\"changeProductType\" value=\"<%- productTypes[productType].measure %>\"> \r\n\t\t\t\t\t\t\t\t\t<label for=\"product\"><%- productTypes[productType].title %></label>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t<% } %>\r\n\t\t\t<% } %>\r\n\t\t</div>\t\r\n\t  </div>\r\n\t</div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n\t<div class=\"quickbar\">\r\n\t\t<span class=\"material-icons trash\" onclick=\"editFacade.deleteItem()\" title=\"Delete this product\">\r\n\t\t\tdelete\r\n\t\t</span>\r\n\t\t<span class=\"material-icons\" onclick=\"editFacade.duplicateItem()\" title=\"Duplicate this product\">\r\n\t\t\tcontent_copy\r\n\t\t</span>\r\n\t\t<span class=\"material-icons\" onclick=\"editFacade.rearrangeItems('<%-item.section.id%>')\" title=\"Rearrange products\">\r\n\t\t \tmove_up\r\n\t\t</span>\r\n\t\t<span class=\"material-icons\" onclick=\"formFacade.showProduct(<%-itemId%>)\" title=\"Preview product selection\">\r\n\t\t \tremove_red_eye\r\n\t\t</span>\r\n\t</div>\r\n\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveProduct(this)\">\r\n\t \tSave\r\n\t</button>\r\n</div>\r\n","rearrangeItems":"<%\r\n  var frm = scraped?scraped:form;\r\n  var secs = formFacade.getSections();\r\n%>\r\n<style>\r\n  #EditModal{ grid-template-rows: 57px 1fr !important; }\r\n  .rehead{ display:flex; align-items:center; }\r\n  .retitle{ padding-left:10px; }\r\n</style>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Rearrange</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\" id=\"ItemsTab\">\r\n  <ul id=\"RearrangeItems\" class=\"list-group\">\r\n  <% secs.forEach(sec=>{ %>\r\n    <li id=\"<%-sec.id==titleId?'resec':'reoth'%>-<%-sec.id%>\" class=\"rerow resec list-group-item d-flex justify-content-between align-items-center\">\r\n      <span class=\"rehead font-weight-bold\">\r\n        <%-sec.title%>\r\n      </span>\r\n      <% if(sec.id==titleId){ %>\r\n        <span type=\"button\" class=\"material-icons retoggle\" onclick=\"editFacade.rearrangePages()\">remove_circle</span>\r\n      <% } else{ %>\r\n        <span type=\"button\" class=\"material-icons retoggle\" onclick=\"editFacade.rearrangeItems('<%-sec.id%>')\">add_circle</span>\r\n      <% } %>\r\n      <% if(false){ %>\r\n        <span class=\"badge badge-primary badge-pill font-weight-bold\"><%-sec.items.length%></span>\r\n      <% } %>\r\n    </li>\r\n    <% \r\n      if(sec.id===titleId){\r\n        sec.items.forEach(itm=>{\r\n    %>\r\n        <li id=\"reitm-<%-itm.id%>\" type=\"button\" class=\"rerow reitem list-group-item d-flex align-items-center\">\r\n          <span class=\"material-icons rehandle\">drag_indicator</span>\r\n          <span class=\"retitle\"><%-itm.title%></span>\r\n        </li>\r\n    <% \r\n        })\r\n        if(sec.items.length==0){\r\n    %>\r\n        <li class=\"list-group-item d-flex align-items-center\">\r\n          <span class=\"material-icons\">filter_none</span>\r\n          <span class=\"retitle\">No items</span>\r\n        </li>\r\n    <%\r\n        }\r\n      } \r\n    %>\r\n  <% }) %>\r\n  </ul>\r\n</div>\r\n","rearrangePages":"<%\r\n  var frm = scraped?scraped:form;\r\n  var secs = formFacade.getSections();\r\n%>\r\n<style>\r\n  #EditModal{ grid-template-rows: 57px 1fr 0px !important; }\r\n  .retitle{ display:flex; align-items:center; }\r\n  .retitle .rehandle{ padding-right:10px; }\r\n</style>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Rearrange</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\" id=\"ItemsTab\">\r\n  <ul id=\"RearrangePages\" class=\"list-group\">\r\n  <% secs.forEach(sec=>{ %>\r\n    <li id=\"reoth-<%-sec.id%>\" type=\"button\" class=\"rerow list-group-item d-flex justify-content-between align-items-center\">\r\n      <span class=\"retitle font-weight-bold\">\r\n        <span class=\"material-icons rehandle\"><%-sec.id=='root'?'do_not_touch':'drag_indicator'%></span>\r\n        <%-sec.title%>\r\n      </span>\r\n      <span type=\"button\" class=\"material-icons retoggle\" \r\n        onclick=\"Promise.resolve(editFacade.rpprm).then(_=>editFacade.rearrangeItems('<%-sec.id%>'))\">\r\n        add_circle\r\n      </span>\r\n    </li>\r\n  <% }) %>\r\n  </ul>\r\n</div>\r\n","deleteItems":"\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Delete fields in this page?</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\" id=\"ItemsTab\">\r\n  <ul id=\"RearrangeItems\" class=\"list-group\">\r\n  <% tobedeleted.forEach(itm=>{ %>\r\n    <li id=\"reitm-<%-itm.id%>\" type=\"button\" class=\"list-group-item d-flex justify-content-between align-items-center\">\r\n      <span class=\"retitle\"><%-itm.title%></span>\r\n      <span type=\"button\" class=\"material-icons\" onclick=\"editFacade.deleteItems(<%-itm.id%>)\">\r\n        delete\r\n      </span>\r\n    </li>\r\n  <% }) %>\r\n  </ul>\r\n</div>\r\n","theme":"<%\r\n\tvar info = team?.info||{};\r\n%>\r\n<div class=\"modal-header\" id=\"edittheme\">\r\n<ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n  <li class=\"nav-item\">\r\n    <a class=\"nav-link active\" id=\"pills-theme-tab\" data-toggle=\"pill\" href=\"#pills-theme\" role=\"tab\" aria-controls=\"pills-theme\" aria-selected=\"false\">Theme</a>\r\n  </li>\r\n  <li class=\"nav-item\">\r\n    <a class=\"nav-link\" id=\"pills-title-tab\" data-toggle=\"pill\" href=\"#pills-title\" role=\"tab\" aria-controls=\"pills-title\" aria-selected=\"true\">Page</a>\r\n  </li>\r\n</ul>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" data-reload=\"yes\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n<style>\r\n\t#ThemeForm .btn{ display:inline; width:80px; float:right; }\r\n\t#ThemeForm .imagefile{ float:right; direction:rtl; }\r\n\t#ThemeForm .themecard{ display:inline-block; width:210px; margin-right:10px; background-color:transparent !important; }\r\n\t#ThemeForm .font-picker{ box-shadow:none; background-color:#fff; border:solid 1px rgba(0,0,0,0.1); }\r\n\t#ThemeForm .font-picker .dropdown-button,\r\n\t#ThemeForm .font-picker .dropdown-button:hover, \r\n\t#ThemeForm .font-picker .dropdown-button:focus{ box-shadow:none; background-color:#fff; }\r\n\t#ThemeForm .font-picker ul{ box-shadow:none; background-color:#fff; border:solid 1px rgba(0,0,0,0.1); }\r\n\t#ThemeForm .color-control{ display:inline; width:80px; float:right; }\r\n\t#ThemeForm .ffc-size-control{ width:200px; }\r\n\t#ThemeForm .ffc-size{ width:100%; }\r\n\t#ThemeForm .ffc-sizelist{ width:100%; font-size:10px; display:flex; justify-content:space-between; }\r\n</style>\r\n<form id=\"ThemeForm\">\r\n<div class=\"tab-content\" id=\"pills-tabContent\">\r\n  <div class=\"tab-pane active\" id=\"pills-theme\" role=\"tabpanel\" aria-labelledby=\"pills-theme-tab\">\r\n\t  <div class=\"form-group\">\r\n\t  \t<%\r\n\t    \tvar selname = info.theme;\r\n\t  \t\tvar thememap = getThemes();\r\n\t\t\tvar seltheme = thememap[selname];\r\n\t  \t\tfor(var thnm in thememap){\r\n\t  \t\t\tvar theme = thememap[thnm];\r\n\t  \t%>\r\n\t\t\t<div class=\"card themecard\">\r\n\t\t\t  <label class=\"card-img-top\" for=\"<%-thnm%>\">\r\n\t\t\t\t<svg viewBox=\"0 0 100 40\" style='background-color:<%-theme.pri%>'>\r\n\t\t\t\t\t<% if(thnm=='colorful'){ %>\r\n\t\t\t\t\t\t<rect x=\"75\" y=\"0\" width=\"25%\" height=\"100%\" fill='<%-theme.sec%>'/>\r\n\t\t\t\t\t<% } %>\r\n\t\t\t\t\t<text x=\"10\" y=\"25\" fill=\"#fff\"><%-thnm%></text>\r\n\t\t\t\t</svg>\r\n\t\t\t  </label>\r\n\t\t\t  <div class=\"card-body\" style=\"background-color:#fff;\">\r\n\t\t\t    <p class=\"card-text\">\r\n\t\t\t    \t<input type=\"radio\" name=\"theme\" value=\"<%-thnm%>\" \r\n\t\t\t    \tid=\"<%-thnm%>\" <%-thnm==selname?'checked':''%>\r\n\t\t\t    \tonchange=\"if(this.checked){ jQuery('.cardColor').hide(); jQuery('.'+this.id+'Color').show(); jQuery('.cardFont').hide(); jQuery('.'+this.id+'Font').show(); jQuery('.cardSize').hide(); jQuery('.'+this.id+'Size').show(); jQuery('.cardReset').hide(); jQuery('.'+this.id+'Reset').show();  }\"> \r\n\t\t\t    \t<label for=\"<%-thnm%>\">Apply this theme</label>\r\n\t\t\t    </p>\r\n\t\t\t  </div>\r\n\t\t\t</div>\r\n\t\t<% } %>\r\n\t  </div>\r\n\t\t<% \r\n\t  \t\tfor(var thnm in thememap){\r\n\t  \t\t\tvar theme = thememap[thnm];\r\n\t  \t%>\r\n\t\t  <div class=\"form-group pt-3 cardColor <%-thnm%>Color\" style=\"display:<%-thnm==selname?'block':'none'%>\">\r\n\t\t    <label for=\"<%-thnm%>pri\">Primary color</label>\r\n\t\t    <input type=\"color\" name=\"<%-thnm%>pri\" value=\"<%=theme.pri%>\" \r\n\t\t    \tclass=\"form-control ffc-color\" class=\"pull-right\"/>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group cardColor <%-thnm%>Color\" style=\"display:<%-thnm==selname?'block':'none'%>\">\r\n\t\t    <label for=\"<%-thnm%>sec\"><%-thnm=='minimal'?'Background':'Secondary'%> color</label>\r\n\t\t    <input type=\"color\" name=\"<%-thnm%>sec\" value=\"<%=theme.sec%>\" \r\n\t\t    \tclass=\"form-control ffc-color\" class=\"pull-right\"/>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group pt-3 cardFont <%-thnm%>Font\" style=\"display:<%-thnm==selname?'block':'none'%>\">\r\n\t\t    <label for=\"font-picker-<%-thnm%>head\">Heading</label>\r\n\t        <input type=\"hidden\" id=\"<%-thnm%>head\" name=\"<%-thnm%>head\" value=\"<%=theme.head%>\"/>\r\n\t        <div id=\"font-picker-<%-thnm%>head\" class=\"font-picker font-picker-<%-thnm%>head pull-right\" style=\"z-index:100\"></div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group cardFont <%-thnm%>Font\" style=\"display:<%-thnm==selname?'block':'none'%>\">\r\n\t\t    <label for=\"font-picker-<%-thnm%>para\">Form fields</label>\r\n\t        <input type=\"hidden\" id=\"<%-thnm%>para\" name=\"<%-thnm%>para\" value=\"<%=theme.para%>\"/>\r\n\t        <div id=\"font-picker-<%-thnm%>para\" class=\"font-picker font-picker-<%-thnm%>para pull-right\"></div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group pb-3 cardSize <%-thnm%>Size\" style=\"display:<%-thnm==selname?'block':'none'%>\">\r\n\t\t    <label for=\"<%-thnm%>size\">Font size</label>\r\n\t\t    <div class=\"ffc-size-control pull-right\">\r\n\t\t\t\t<input type=\"range\" list=\"<%-thnm%>sizelist\" name=\"<%-thnm%>size\" min=\"12\" max=\"20\" value=\"<%=theme.size?theme.size:14%>\" class=\"form-control ffc-size\">\r\n\t\t\t\t<datalist id=\"<%-thnm%>sizelist\" class=\"ffc-sizelist\">\r\n\t\t\t\t\t<option value=\"12\" label=\"Smaller\"></option>\r\n\t\t\t\t\t<option value=\"14\" label=\"Small\"></option>\r\n\t\t\t\t\t<option value=\"16\" label=\"Normal\"></option>\r\n\t\t\t\t\t<option value=\"18\" label=\"Large\"></option>\r\n\t\t\t\t\t<option value=\"20\" label=\"Larger\"></option>\r\n\t\t\t\t</datalist>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group pt-3 cardReset <%-thnm%>Reset\" style=\"display:<%-thnm==selname?'block':'none'%>\">\r\n\t\t    <label for=\"<%-thnm%>Reset\">Back to default style</label>\r\n\t    \t<button type=\"button\" class=\"btn btn-xs btn-danger\" id=\"<%-thnm%>Reset\"\r\n\t\t  \t\tonclick=\"editFacade.resetTheme('<%-thnm%>')\">Reset</button>\r\n\t\t  </div>\r\n\t  <% } %>\r\n  </div>\r\n  <div class=\"tab-pane\" id=\"pills-title\" role=\"tabpanel\" aria-labelledby=\"pills-title-tab\">\r\n\t  <div class=\"form-group\">\r\n\t    <label for=\"title\">Title</label>\r\n\t    <input type=\"text\" class=\"form-control\" name=\"title\" value=\"<%=info.title%>\" placeholder=\"Enter the name of this site\"/>\r\n\t  </div>\r\n\t  <div class=\"form-group\">\r\n\t    <label id=\"logolbl\">\r\n\t    \tLogo\r\n\t    \t<% if(info.logo){ %>\r\n\t    \t\t<a href=\"<%-info.logo%>\" target=\"_blank\">\r\n\t    \t\t\t<i class=\"material-icons\">launch</i>\r\n\t    \t\t</a>\r\n\t    \t<% } %>\r\n\t    </label>\r\n\t    <input type=\"hidden\" id=\"logohdn\" name=\"logo\" value=\"<%=info.logo%>\">\r\n\t\t<input type=\"hidden\" id=\"logoorghdn\" name=\"logoorg\" value=\"<%=info.logoorg%>\">\r\n\t    <% if(info.logo){ %>\r\n\t    \t<button type=\"button\" class=\"btn btn-xs btn-danger\"\r\n\t\t  \t\tonclick=\"editFacade.deleteImage('logo')\">Delete</button>\r\n\t    <% } else{ %>\r\n\t    \t<input type=\"file\" accept=\"image/*\" class=\"imagefile\" onchange=\"editFacade.uploadFile('<%=params.userId%>', 'logo', this)\"/>\r\n\t    <% } %>\r\n\t  </div>\r\n\t  <div class=\"form-group pt-3\">\r\n\t    <label for=\"description\">Description</label>\r\n\t    <textarea class=\"form-control\" name=\"description\" placeholder=\"Enter the site description\"><%-info.description%></textarea>\r\n\t  </div>\r\n\t  <div class=\"form-group\">\r\n\t    <label id=\"bgimagelbl\">\r\n\t    \tBackground image\r\n\t    \t<% if(info.bgimage){ %>\r\n\t    \t\t<a href=\"<%-info.bgimage%>\" target=\"_blank\">\r\n\t    \t\t\t<i class=\"material-icons\">launch</i>\r\n\t    \t\t</a>\r\n\t    \t<% } %>\r\n\t    </label>\r\n\t    <input type=\"hidden\" id=\"bgimagehdn\" name=\"bgimage\" value=\"<%=info.bgimage%>\">\r\n\t\t<input type=\"hidden\" id=\"bgimageorghdn\" name=\"bgimageorg\" value=\"<%=info.bgimageorg%>\">\r\n\t    <% if(info.bgimage){ %>\r\n\t    \t<button type=\"button\" class=\"btn btn-xs btn-danger\"\r\n\t\t  \t\tonclick=\"editFacade.deleteImage('bgimage')\">Delete</button>\r\n\t    <% } else{ %>\r\n\t    \t<input type=\"file\" accept=\"image/*\" class=\"imagefile\" onchange=\"editFacade.uploadFile('<%=params.userId%>', 'bgimage', this)\"/>\r\n\t    <% } %>\r\n\t  </div>\r\n\t  <div class=\"form-group pt-3\">\r\n\t    <label for=\"title\">Footer</label>\r\n\t    <input type=\"text\" class=\"form-control\" name=\"footer\" value=\"<%=info.footer%>\" placeholder=\"Enter the footer for this site\"/>\r\n\t  </div>\r\n\t  <div class=\"form-group pt-3\">\r\n\t    <label for=\"language\">Language</label>\r\n\t    <select class=\"form-control\" name=\"language\">\r\n\t    <% \r\n\t    \tvar sellang = info.language?info.language:'en';\r\n\t    \tvar langarr = [];\r\n\t    \tfor(var ln in langs)\r\n\t    \t\tlangarr.push({code:ln, display:langs[ln]});\r\n\t    \tlangarr.sort(function(a,b){ return a.display.localeCompare(b.display); });\r\n\t    \tlangarr.forEach(function(lng){\r\n\t    %>\r\n\t    \t<option value=\"<%-lng.code%>\" <%-sellang==lng.code?'selected':''%>><%-lng.display%></option>\r\n\t    <% }) %>\r\n\t    </select>\r\n\t  </div>\r\n  </div>\r\n  <div class=\"tab-pane\" id=\"pills-contact\" role=\"tabpanel\" aria-labelledby=\"pills-contact-tab\">\r\n\t  <div class=\"form-group\">\r\n\t    <label for=\"themePrimary\">Primary color</label>\r\n\t    <input type=\"color\" name=\"themePrimary\" value=\"<%=info.themePrimary%>\" class=\"form-control color-control\"/>\r\n\t  </div>\r\n\t  <div class=\"form-group\">\r\n\t    <label for=\"themeSecondary\">Secondary color</label>\r\n\t    <input type=\"color\" name=\"themeSecondary\" value=\"<%=info.themeSecondary%>\" class=\"form-control color-control\" class=\"pull-right\"/>\r\n\t  </div>\r\n  </div>\r\n</div>\r\n</form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.setTheme(document.forms.ThemeForm)\">\r\n  \tSave\r\n  </button>\r\n</div>\r\n\r\n","prefill":"<% \r\n  var links = prefill.links?prefill.links:{};\r\n%>\r\n<% if(prefill.status=='name'){ %>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">New link</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<form id=\"prefillForm\" class=\"modal-body\" onsubmit=\"return false;\">\r\n    <div class=\"input-group mb-3\">\r\n      <div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\"><%-shareFacade.getShortLink()%>/</span>\r\n      </div>\r\n      <input type=\"text\" class=\"form-control\" id=\"prefillName\" \r\n      placeholder=\"Enter prefill name\" title=\"Min 4 characters. Only lower-case letters, numbers & hypen allowed.\"\r\n      pattern=\"^[a-zA-Z0-9-]+$\" minlength=\"4\" required onchange=\"editFacade.prefill.name=this.value\">\r\n    </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n    <button class=\"btn btn-primary\" onclick=\"if(document.getElementById('prefillName').checkValidity()){ editFacade.renderPrefill('fill') }else{ jQuery('#prefillName').tooltip('show') }\">\r\n      Next\r\n    </button>\r\n</div>\r\n<% } else if(prefill.status=='fill'){ %>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Prefill the form</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body ff-prefill-body\">\r\n  \r\n  <div id=\"ff-prefill-compose\">\r\n    <h3 id=\"prefill-loader\"> Loading...</h3>\r\n  </div>\r\n\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <div class=\"quickbar\">\r\n    <% if(prefill.savedId) { \r\n        var fullLink = `${location.origin}/sm/${shareFacade.short.shortId}/${prefill.prefillId}}`\r\n    %>\r\n      <% if(editFacade.hasEmailMapping()) {%>\r\n        <span class=\"material-icons\" style=\"color: #522AE9;float: left;\" onclick=\"prefillList.renderEmail('<%-prefill.name%>');$('div[role=tooltip]').remove();\" title=\"Send Email\"> mail </span>\r\n      <% } %>\r\n      <span class=\"material-icons trash\" onclick=\"editFacade.deletePrefill()\" title=\"Delete\"> delete </span>\r\n    <% } %>\r\n  </div>\r\n  <button class=\"btn btn-primary\" onclick=\"editFacade.savePrefill()\">\r\n    <%-prefill.savedId? 'Save' : 'Create'%>\r\n  </button>\r\n</div>\r\n<% } else if(prefill.status=='detail'){ %>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Link created successfully!</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"input-group mb-3\">\r\n      <input type=\"text\" class=\"form-control\" id=\"prefillUrl\" value=\"<%-shareFacade.getShortLink()%>/<%-prefill.name%>\" readonly>\r\n      <div class=\"input-group-append\" onclick=\"navigator.clipboard.writeText(document.getElementById('prefillUrl').value)\">\r\n        <span class=\"input-group-text\">Copy</span>\r\n      </div>\r\n    </div>\r\n    <%-getSummary(prefill)%>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <div class=\"quickbar\">\r\n    <span class=\"material-icons trash\" onclick=\"editFacade.deletePrefill()\" title=\"Delete\">\r\n      delete\r\n    </span>\r\n  </div>\r\n  <button class=\"btn btn-primary\" onclick=\"shareFacade.shareURL('<%-shareFacade.getShortLink()%>/<%-prefill.name%>')\">\r\n    Share\r\n  </button>\r\n</div>\r\n<% } else if(prefill.status=='email'){ %>\r\n<div class=\"modal-header\" id=\"prefill-email-header\">\r\n  <span class=\"material-icons back-discard\" onclick='editFacade.prefill=<%-JSON.stringify(prefill)%>; editFacade.renderPrefill(\"fill\");'>\r\n    arrow_back\r\n  </span>\r\n  <h5 class=\"modal-title\">Send email</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\" id=\"prefill-email-body\">\r\n  <form onsubmit=\"return false;\">\r\n    <div class=\"form-group\">\r\n      <label for=\"su\">To</label>\r\n      <input type=\"text\" name=\"to\" id=\"to\" class=\"form-control\" disabled\r\n        placeholder=\"<%=prefill.emailInfo.to%>\" value=\"<%=prefill.emailInfo.to%>\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"su\">Subject</label>\r\n      <input type=\"hidden\" name=\"to\" id=\"to\" class=\"form-control\"\r\n        placeholder=\"<%=prefill.emailInfo.to%>\" value=\"<%=prefill.emailInfo.to%>\">\r\n      <input type=\"text\" name=\"subject\" id=\"subject\" class=\"form-control\" \r\n        placeholder=\"<%=prefill.emailInfo.subject%>\" value=\"<%=prefill.emailInfo.subject%>\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label for=\"body\">Message</label>\r\n        <textarea class=\"form-control\" name=\"body\" id=\"body\" \r\n        rows=\"9\" placeholder=\"<%=prefill.emailInfo.body%>\"><%-prefill.emailInfo.body%></textarea>\r\n    </div>\r\n  </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button class=\"btn btn-outline-primary\" onclick=\"prefillList.configurePrefillEmailTemplate()\">\r\n    Edit Template\r\n  </button>\r\n  <button class=\"btn btn-primary\" onclick=\"prefillList.submitEmail('<%-prefill.name%>');\">\r\n    Send\r\n  </button>\r\n</div>\r\n<% } else{ %>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Prefill links</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"form-group\">\r\n    <% if(Object.keys(links).length==0){ %>\r\n      You haven't created any prefill link yet.\r\n    <% } else{ %>\r\n      <% \r\n        for(var nm in links){ \r\n          var link = links[nm];\r\n          link.name = nm;\r\n      %>\r\n        <div class=\"card bg-light mb-3\" \r\n          onclick='editFacade.prefill=<%-JSON.stringify(link)%>; editFacade.renderPrefill(\"fill\");'>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\"><%-link.name%></h5>\r\n            <div class=\"card-text\">\r\n              <%-getSummary(link, 3)%>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      <% } %>\r\n    <% } %>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button class=\"btn btn-primary\" onclick=\"editFacade.renderPrefill('name')\">\r\n    <span class=\"material-icons\">add</span> New link\r\n  </button>\r\n</div>\r\n<% } %>","customize":"<% \r\n\tvar frm = scraped||form;\r\n\tvar fc = facade||{};\r\n\tvar setting = fc.setting||{};\r\n\tvar enhance = fc.enhance||{};\r\n\tvar ttl = {title:frm.title, description:frm.description};\r\n\tvar ottl = fc?.titles?.root||{};\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n\t<ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link active\" id=\"pills-title-tab\" data-toggle=\"pill\" href=\"#pills-title\" role=\"tab\" aria-controls=\"pills-title\" aria-selected=\"false\">Header</a>\r\n\t  </li>\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link\" id=\"pills-layout-tab\" data-toggle=\"pill\" href=\"#pills-layout\" role=\"tab\" aria-controls=\"pills-layout\" aria-selected=\"true\">Appearance</a>\r\n\t  </li>\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link\" id=\"pills-advanced-tab\" data-toggle=\"pill\" href=\"#pills-advanced\" role=\"tab\" aria-controls=\"pills-advanced\" aria-selected=\"false\">Advanced</a>\r\n\t  </li>\r\n\t</ul>\r\n\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" data-reload=\"yes\">\r\n\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t</button>\r\n</div>\r\n<style>\r\n\t#CustomizeTab .tab-pane{ position:relative; min-height:300px; }\r\n\t#CustomizeTab input[type=\"color\"]{ display:inline; width:80px; float:right; }\r\n\t#CustomizeTab .btn{ display:inline; width:80px; float:right; }\r\n\t#CustomizeTab .font-filter{ display:inline; width:140px; float:right; }\r\n\t#CustomizeTab .font-picker{ display:block; width:100%; }\r\n\t#CustomizeTab .overimagefile{ float:right; direction:rtl; width:200px; }\r\n\t#CustomizeTab input[type=\"checkbox\"]{ vertical-align:middle; }\r\n\t#CustomizeTab #transparent{ float:right; margin-top:8px; }\r\n\t#CustomizeTab textarea{ height:80px; }\r\n\t#CustomizeTab .btn{ display:inline; width:80px; float:right; }\r\n\t#CustomizeTab .imagefile{ float:right; direction:rtl; }\r\n\t#CustomizeTab .themed .form-control{ width:140px; line-height:36px; font-weight:450; }\r\n\t#CustomizeTab #ttl{ overflow:hidden; white-space:nowrap; text-overflow: ellipsis; }\r\n</style>\r\n<form class=\"modal-body\" id=\"CustomizeTab\" onsubmit=\"return false;\">\r\n\t<div class=\"tab-content\" id=\"pills-tabContent\">\r\n\t  <div class=\"tab-pane fade show active\" id=\"pills-title\" role=\"tabpanel\" aria-labelledby=\"pills-title-tab\">\r\n\t    <div class=\"form-group\">\r\n\t      <label for=\"field\">Title</label>\r\n\t      <input type=\"text\" name=\"title\" placeholder=\"<%=ttl.title%>\" value=\"<%=ottl.title?ottl.title:(hasCreatorOrEditor()?ttl.title:null)%>\"\r\n\t        class=\"form-control\"/>\r\n\t    </div>\r\n\t    <div class=\"form-group pt-3\">\r\n\t      <label for=\"primary\">Description</label>\r\n\t      <br/>\r\n\t      <% \r\n\t        var hlp = ttl.help?ttl.help:(ttl.description?ttl.description:'');\r\n\t      %>\r\n\t\t  <div id=\"mdEditor\"><%-ottl.messageMark?ottl.messageMark:(hasCreatorOrEditor()?hlp:null)%></div>\r\n\t      <textarea name=\"messageMD\" id=\"md-input\" \r\n\t\t  \thidden><%-ottl.messageMD?ottl.messageMD:(hasCreatorOrEditor()?hlp:null)%></textarea>\r\n\t      <textarea name=\"messageMark\" id=\"md-input-html\" \r\n\t\t  \thidden><%-ottl.messageMark?ottl.messageMark:(hasCreatorOrEditor()?hlp:null)%></textarea>\r\n\t      <div class=\"titleHelp\"></div>\r\n\t      <div class=\"titleFeedback\">\r\n\t          <%\r\n\t            var ntfuncs = ['TOTAL(','AMT(','AMOUNT('].filter(function(ntfunc){ \r\n\t              if(ottl.messageMD) return ottl.messageMD.toUpperCase().indexOf(ntfunc)>=0;\r\n\t            });\r\n\t            if(!user.neartail && ntfuncs.length>0){\r\n\t          %>\r\n\t            Install\r\n\t            <a href=\"https://gsuite.google.com/marketplace/app/neartail/743172720058\" target=\"_blank\">Neartail</a>\r\n\t            addon for order forms.\r\n\t          <% } %>\r\n\t      </div>\r\n\t    </div>\r\n\t\t<div class=\"addbar bannerCard\" style=\"display:<%-ottl.banner?'none':'block'%>\"\r\n\t\t  \tonclick=\"jQuery('.bannerCard').toggle()\">\r\n\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t  \tBanner\r\n\t\t</div>\r\n\t\t<div class=\"form-group bannerCard pt-3\" style=\"display:<%-ottl.banner?'block':'none'%>\">\r\n\t\t    <label id=\"bannerlbl\">\r\n\t\t    \tBanner image\r\n\t\t    \t<% if(ottl.banner){ %>\r\n\t\t    \t\t<a href=\"<%-ottl.banner%>\" target=\"_blank\">\r\n\t\t    \t\t\t<i class=\"material-icons\">launch</i>\r\n\t\t    \t\t</a>\r\n\t\t    \t<% } %>\r\n\t\t    </label>\r\n\t\t    <input type=\"hidden\" id=\"bannerhdn\" name=\"banner\" value=\"<%=ottl.banner%>\">\r\n\t\t\t<input type=\"hidden\" id=\"bannerorghdn\" name=\"bannerorg\" value=\"<%=ottl.bannerorg%>\">\r\n\t\t    <% if(ottl.banner){ %>\r\n\t\t    \t<button type=\"button\" class=\"btn btn-xs btn-danger\"\r\n\t\t\t  \t\tonclick=\"$('#bannerhdn,#bannerorghdn').val(''); editFacade.saveCustomize(this);\">Delete</button>\r\n\t\t    <% } else{ %>\r\n\t\t    \t<input type=\"file\" class=\"imagefile\" accept=\"image/*\" onchange=\"editFacade.uploadBanner('root', this)\"/>\r\n\t\t    <% } %>\r\n\t  \t</div>\r\n\t  </div>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-layout\" role=\"tabpanel\" aria-labelledby=\"pills-layout-tab\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <% \r\n\t\t    \tvar sellayout = enhance.layout;\r\n\t\t    \tvar layouts = { \r\n\t\t    \t\t'2column':{display:fc.neartail?'Card':'Compact', image:'https://formfacade.com/img/2column.png'}, \r\n\t\t    \t\t'1column':{display:fc.neartail?'List':'Comfortable', image:'https://formfacade.com/img/1column.png'},\r\n\t\t    \t\t'default':{display:'Default', image:'https://formfacade.com/img/fittopage.png'}\r\n\t\t    \t};\r\n\t\t    \tfor(var lid in layouts){\r\n\t\t    \t\tvar layout = layouts[lid];\r\n\t\t    %>\r\n\t\t\t\t<label for=\"<%-lid%>\" class=\"card\" style=\"display:inline-block; width:120px; margin-left:5px; margin-right:5px; margin-bottom:15px; border:0px;\">\r\n\t\t\t\t  <img class=\"card-img-top\" src=\"<%-layout.image%>\" for=\"<%-lid%>\"/>\r\n\t\t\t\t  <div class=\"card-body\" style=\"padding:1rem 0.5rem;\">\r\n\t\t\t\t    <p class=\"card-text\">\r\n\t\t\t\t    \t<input type=\"radio\" id=\"<%-lid%>\" name=\"layout\" value=\"<%-lid%>\" <%-sellayout==lid?'checked':''%>\r\n\t\t\t\t    \tonchange=\"this.value=='default'&&this.checked?jQuery('#pills-colors-tab').hide():jQuery('#pills-colors-tab').show()\"> \r\n\t\t\t\t    \t<label for=\"<%-lid%>\"><%-layout.display%></label>\r\n\t\t\t\t    </p>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</label>\r\n\t\t    <%\r\n\t\t    \t} \r\n\t\t    %>\r\n\t\t  </div>\r\n\r\n\t\t  <% \r\n\t\t  \tvar thememap = getThemes();\r\n\t\t  \tvar selname = getCurrentTheme();\r\n\t\t  \tvar seltheme = thememap[selname];\r\n\t\t  \tvar ttl = team?.info?.title||`${user?.displayName}'s Site`;\r\n\t\t  %>\r\n\t\t  <div class=\"form-group pt-3\">\r\n\t\t    <label for=\"themename\">\r\n\t\t    \t<b>Theme - <%-selname%></b>\r\n\t\t    \t<br/>\r\n\t\t    \t<small>Applies to all forms</small>\r\n\t\t    </label>\r\n\t    \t<button type=\"button\" class=\"btn btn-xs btn-secondary\" id=\"themename\" onclick=\"editFacade.showTheme()\">\r\n\t    \t\tEdit\r\n\t    \t</button>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group themed\">\r\n\t\t    <label for=\"ttl\">Page Title</label>\r\n\t\t    <div id=\"ttl\" class=\"form-control pull-right\" ondblclick=\"editFacade.showTheme('#pills-title-tab')\" title=\"Double click to edit\">\r\n\t\t    \t<%-ttl%>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t\t  <%\r\n\t\t  \tvar attrs = {pri:'Primary color', sec:'Secondary color', head:'Heading', para:'Form fields'};\r\n\t\t  \tfor(var anm in attrs){\r\n\t\t  %>\r\n\t\t  <% } %>\r\n\t\t  <div class=\"form-group themed\">\r\n\t\t    <label for=\"pri\">Primary color</label>\r\n\t\t    <div id=\"pri\" class=\"form-control pull-right\" style=\"background-color:<%-seltheme.pri%>; color:#fff;\"><%-seltheme.pri%></div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group themed\">\r\n\t\t    <label for=\"sec\">Secondary color</label>\r\n\t\t    <div id=\"sec\" class=\"form-control pull-right\" style=\"background-color:<%-seltheme.sec%>; color:<%-selname=='minimal'?'#333':'#fff'%>;\"><%-seltheme.sec%></div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group themed\">\r\n\t\t    <label for=\"head\">Heading</label>\r\n\t\t    <div id=\"head\" class=\"form-control pull-right\" style=\"font-family:'<%-seltheme.head%>'; color:#666;\"><%-seltheme.head%></div>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group themed\">\r\n\t\t    <label for=\"para\">Form fields</label>\r\n\t\t    <div id=\"para\" class=\"form-control pull-right\" style=\"font-family:'<%-seltheme.para%>'; color:#666;\"><%-seltheme.para%></div>\r\n\t\t  </div>\r\n\r\n\t\t  <div class=\"addbar color-group pt-3\" style=\"display:<%-enhance?.fontColor||enhance?.transparent?'none':'block'%>\" onclick=\"jQuery('.color-group').toggle()\">\r\n\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t  \tForm specific style\r\n\t\t  </div>\r\n\t\t  <div class=\"color-group pt-4\"  style=\"display:<%-enhance?.fontColor||enhance?.transparent?'block':'none'%>\">\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t    <label>\r\n\t\t\t    \t<b>Form specific style</b>\r\n\t\t\t    \t<br/>\r\n\t\t\t    \t<small>to embed in website</small>\r\n\t\t\t    </label>\r\n\t\t    \t<button type=\"button\" class=\"btn btn-xs btn-danger\" title=\"Reset form specific style to theme style\" onclick=\"editFacade.resetCustomize()\">\r\n\t\t    \t\tReset\r\n\t\t    \t</button>\r\n\t\t\t  </div>\r\n\t\t  \t<% if(setting.primary){ %>\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t    <label for=\"field\">Primary color <br/><small>Applies to all buttons in this form</small></label>\r\n\t\t\t    <input type=\"color\" name=\"primary\" value=\"<%=setting.primary?setting.primary:'#5d33fb'%>\" \r\n\t\t\t    \tclass=\"form-control ffc-color\" class=\"pull-right\"/>\r\n\t\t\t  </div>\r\n\t\t  \t<% } %>\r\n\t\t  \t<% if(enhance.background){ %>\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t    <label for=\"background\">Background color for the form</label>\r\n\t\t\t    <input type=\"color\" name=\"background\" value=\"<%=enhance.background?enhance.background:'#f4f7f8'%>\" \r\n\t\t\t    \tclass=\"form-control ffc-color\" class=\"pull-right\"/>\r\n\t\t\t  </div>\r\n\t\t  \t<% } %>\r\n\t\t  \t<% if(enhance.overimage){ %>\r\n\t\t\t  <div class=\"form-group\" style=\"display:<%-enhance.overimage?'block':'none'%>\">\r\n\t\t\t    <label for=\"overimage\" id=\"overimagelbl\">\r\n\t\t\t    \tBackground image\r\n\t\t\t    \t<% if(enhance.overimage){ %>\r\n\t\t\t    \t\t<a href=\"<%-enhance.overimage%>\" target=\"_blank\">\r\n\t\t\t    \t\t\t<i class=\"material-icons\">launch</i>\r\n\t\t\t    \t\t</a>\r\n\t\t\t    \t<% } %>\r\n\t\t\t    </label>\r\n\t\t\t    <input type=\"hidden\" id=\"overimagehdn\" name=\"overimage\" value=\"<%=enhance.overimage%>\">\r\n\t\t\t    <% if(enhance.overimage){ %>\r\n\t\t\t    \t<button type=\"button\" class=\"btn btn-xs btn-danger\"\r\n\t\t\t\t  \t\tonclick=\"editFacade.deleteBackground()\">Delete</button>\r\n\t\t\t    <% } else{ %>\r\n\t\t\t    \t<input type=\"file\" class=\"overimagefile\" onchange=\"editFacade.uploadFile('<%=params.userId%>', 'overimage', this)\"/>\r\n\t\t\t    <% } %>\r\n\t\t\t  </div>\r\n\t\t  \t<% } %>\r\n\t\t  \t<% if(enhance.fontSize){ %>\r\n\t\t\t  <div class=\"form-group\" style=\"display:<%-enhance.fontSize?'block':'none'%>\">\r\n\t\t\t    <label for=\"fontSize\">Font size</label>\r\n\t\t\t    <strong id=\"fontSizeNow\"><%=enhance.fontSize?enhance.fontSize:16%>px</strong>\r\n\t\t\t    <input type=\"range\" name=\"fontSize\" value=\"<%=enhance.fontSize?enhance.fontSize:14%>\" \r\n\t\t\t    \tclass=\"form-control-range\" class=\"pull-right\" onchange=\"jQuery('#fontSizeNow').html(this.value+'px')\"/>\r\n\t\t\t  </div>\r\n\t\t  \t<% } %>\r\n\t\t  \t<% if(enhance.field){ %>\r\n\t\t\t  <div class=\"form-group\" style=\"display:<%-enhance.field?'block':'none'%>\">\r\n\t\t\t    <label for=\"field\">Background color for the form fields</label>\r\n\t\t\t    <input type=\"color\" name=\"field\" value=\"<%=enhance.field?enhance.field:'#e8eeef'%>\" \r\n\t\t\t    \tclass=\"form-control ffc-color\" class=\"pull-right\"/>\r\n\t\t\t  </div>\r\n\t\t  \t<% } %>\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t    <label for=\"fontColor\">Font color</label>\r\n\t\t\t    <input type=\"color\" name=\"fontColor\" value=\"<%=enhance.fontColor?enhance.fontColor:'#202124'%>\" class=\"form-control ffc-color\" class=\"pull-right\"/>\r\n\t\t\t  </div>\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t    <label for=\"transparent\">Transparent background</label>\r\n\t          \t<input type=\"hidden\" id=\"transparentform\" name=\"transparent\" value=\"<%-enhance.transparent%>\"/>\r\n\t\t\t    <input type=\"checkbox\" id=\"transparent\" <%-enhance.transparent=='on'?'checked':''%> onclick=\"jQuery('#transparentform').val(this.checked?'on':'off')\"/>\r\n\t\t\t  </div>\r\n\t\t  </div>\r\n\t  </div>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-advanced\" role=\"tabpanel\" aria-labelledby=\"pills-profile-advanced\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label>Edit this form with Google Forms</label>\r\n\t\t    <button type=\"button\" class=\"btn btn-xs btn-secondary\"\r\n\t\t    \tonclick=\"showGoogleForms()\">Launch</button>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"locale\">Locale</label>\r\n\t\t\t<select class=\"form-control\" id=\"locale\" name=\"locale\">\r\n\t\t\t\t<option value=\"\">- None -</option>\r\n\t\t\t<%\r\n\t\t\t\tvar stdsp = {of:ln=>ln};\r\n\t\t\t\tif(Intl.DisplayNames)\r\n\t\t\t\t\tstdsp = new Intl.DisplayNames('en', {type:'language', languageDisplay:'standard'});\r\n\t\t\t\tnavigator.languages.forEach(ln=>{\r\n\t\t\t%>\r\n\t\t\t\t<option <%-setting.locale==ln?'selected':''%> value=\"<%-ln%>\"><%-stdsp.of(ln)%></option>\r\n\t\t\t<% }) %>\r\n\t\t\t</select>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"closed\">Close this form</label>\r\n          \t<input type=\"hidden\" id=\"closedform\" name=\"closed\" value=\"<%-enhance.closed%>\"/>\r\n\t\t    <input type=\"checkbox\" <%-enhance.closed=='on'?'checked':''%> onclick=\"jQuery('#closedform').val(this.checked?'on':'off')\"/>\r\n\t\t    <textarea name=\"closedmsg\" class=\"form-control\"\r\n\t\t    \tplaceholder=\"e.g: Closed for the weekend. Please come back on Monday.\"><%-enhance.closedmsg%></textarea>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"css\">Custom CSS</label>\r\n\t\t    <textarea name=\"css\" class=\"form-control\"\r\n\t\t    \tplaceholder=\".ff-form{ /* Your form related CSS goes here */ }&#10;.ff-form input{ /* Your form field CSS goes here */ }\"><%-enhance.css%></textarea>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"js\">Execute Javascript after displaying the form</label>\r\n\t\t    <textarea name=\"js\" class=\"form-control\"\r\n\t\t    \tplaceholder=\"e.g: callYourFunction()\"><%-enhance.js%></textarea>\r\n\t\t  </div>\r\n\t  </div>\r\n\t</div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n\t<div class=\"quickbar\">\r\n      \t<span class=\"material-icons\" onclick=\"editFacade.showMapping()\" title=\"Configure key fields\">edit_note</span>\r\n\t\t<% if(hasCreatorOrEditor()){ %>\r\n\t\t<span class=\"material-icons\" onclick=\"editFacade.rearrangePages()\" title=\"Rearrange pages\">\r\n\t\t  move_up\r\n\t\t</span>\r\n\t\t<% } %>\r\n\t</div>\r\n\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveCustomize(this)\">\r\n\t\tSave\r\n\t</button>\r\n</div>\r\n","next":"<% \r\n  var fc = facade||{};\r\n  var setting = fc.setting||{};\r\n  var itms = scraped.items||{};\r\n  var secs = formFacade.getSections();\r\n  var secidx = secs.findIndex(sec=>sec.id==sectionId);\r\n  var section = secs[secidx]||{};\r\n  var nxtsection = secs[secidx+1]||{};\r\n  var next = itms[nxtsection.id]||{};\r\n  var sections = getGoToSections(true);\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n  <ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link active\" id=\"pills-display-tab\" data-toggle=\"pill\" href=\"#pills-display\" role=\"tab\" aria-controls=\"pills-display\" aria-selected=\"true\">Navigation</a>\r\n    </li>\r\n  </ul>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<style>\r\n  #NextTab .tab-pane{ position:relative; min-height:300px; }\r\n  #NextTab .btn-link{ text-transform:none; text-align:left; }\r\n  #NextTab .tab-pane button .material-icons{ padding-right:5px; font-size:18px; text-decoration:none; }\r\n  #NextTab .tab-pane button .material-icons:hover{ text-decoration:none !important; }\r\n  #NextTab .tab-pane input[type=\"checkbox\"]{ float:right; }\r\n</style>\r\n<form class=\"modal-body\" id=\"NextTab\" onsubmit=\"return false;\">\r\n  <div class=\"tab-content\" id=\"pills-tabContent\">\r\n    <div class=\"tab-pane fade show active\" id=\"pills-display\" role=\"tabpanel\" aria-labelledby=\"pills-display\">\r\n      <div class=\"form-group\">\r\n        <label for=\"navcheck\">On submit</label>\r\n        <input type=\"hidden\" id=\"title\" name=\"title\" value=\"<%-section.title%>\"/>\r\n        <select type=\"number\" name=\"sectionNavigtaion\" class=\"form-control\">\r\n          <% for (var i=0; i < sections.length; i++) {\r\n            var section = sections[i];\r\n            var pos = i + 1;\r\n          %>\r\n            <option value=\"<%-section.id%>\" <%-parseInt(section.id)==parseInt(next.navigateTo)?'selected=\"selected\"':''%>> \r\n              <%-section.title%>\r\n            </option>\r\n          <% } %>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveNext(this, <%-nxtsection.id%>)\">\r\n    Save\r\n  </button>\r\n</div>\r\n","submit":"<% \r\n\tvar frm = scraped?scraped:form;\r\n\tvar fc = facade?facade:{};\r\n\tvar setting = fc.setting||{};\r\n\tvar mapping = fc.mapping||{};\r\n\tvar submit = {};\r\n\tif(fc&&fc.submit&&fc.submit[submitSectionId])\r\n\t\tsubmit = fc.submit[submitSectionId];\r\n\tvar itmlst = getFields();\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n\t<ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link active\" id=\"pills-display-tab\" data-toggle=\"pill\" href=\"#pills-display\" role=\"tab\" aria-controls=\"pills-display\" aria-selected=\"true\">Button</a>\r\n\t  </li>\r\n\t  <li class=\"nav-item\">\r\n\t    <a class=\"nav-link\" id=\"pills-onsubmit-tab\" data-toggle=\"pill\" href=\"#pills-onsubmit\" role=\"tab\" aria-controls=\"pills-onsubmit\" aria-selected=\"false\">On submit</a>\r\n\t  </li>\r\n\t</ul>\r\n\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" data-reload=\"yes\">\r\n\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t</button>\r\n</div>\r\n<style>\r\n\t#SubmitTab .tab-pane{ position:relative; min-height:300px; }\r\n\t#SubmitTab .btn-link{ text-transform:none; text-align:left; }\r\n\t#SubmitTab .tab-pane button .material-icons{ padding-right:5px; font-size:18px; text-decoration:none; }\r\n\t#SubmitTab .tab-pane button .material-icons:hover{ text-decoration:none !important; }\r\n\t#SubmitTab .tab-pane button:not(.collapsed) .checked{ display:inline; }\r\n\t#SubmitTab .tab-pane button:not(.collapsed) .unchecked{ display:none; }\r\n\t#SubmitTab .tab-pane button.collapsed .checked{ display:none; }\r\n\t#SubmitTab .tab-pane button.collapsed .unchecked{ display:inline; }\r\n\t#SubmitTab .card-header{ padding-left:3px; }\r\n\t#SubmitTab input, #SubmitTab select{ display:inline; width:155px; float:right; }\r\n\t#SubmitTab .pay-options{ display:none; }\r\n\t#SubmitTab textarea{ min-height:90px; }\r\n</style>\r\n<form class=\"modal-body\" id=\"SubmitTab\" onsubmit=\"return false;\">\r\n\t<div class=\"tab-content\" id=\"pills-tabContent\">\r\n\t  <div class=\"tab-pane fade show active\" id=\"pills-display\" role=\"tabpanel\" aria-labelledby=\"pills-display\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"background\">Language <br/><small>Applies to this form only</small></label>\r\n\t\t    <select class=\"form-control\" name=\"language\">\r\n\t\t    <% \r\n\t\t    \tvar sellang = setting.language?setting.language:'en';\r\n\t\t    \tvar langarr = [];\r\n\t\t    \tfor(var ln in langs)\r\n\t\t    \t\tlangarr.push({code:ln, display:langs[ln]});\r\n\t\t    \tlangarr.sort(function(a,b){ return a.display.localeCompare(b.display); });\r\n\t\t    \tlangarr.forEach(function(lng){\r\n\t\t    %>\r\n\t\t    \t<option value=\"<%-lng.code%>\" <%-sellang==lng.code?'selected':''%>><%-lng.display%></option>\r\n\t\t    <% }) %>\r\n\t\t    </select>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group pt-3\">\r\n\t\t    <label for=\"primary\">Caption <br/><small>Leave it empty for default text</small></label>\r\n\t\t    <input type=\"text\" name=\"displayName\" value=\"<%=submit.displayName%>\" \r\n\t\t    \tclass=\"form-control\" class=\"pull-right\" placeholder=\"e.g: Send\"/>\r\n\t\t  </div>\r\n\t\t  <% \r\n\t\t  \tif(fc.neartail && setting.currency && setting.currencyCode){\r\n\t\t  \t\tvar payConfig = 'disabled';\r\n\t\t  \t\tif(submit.payConfig)\r\n\t\t  \t\t\tpayConfig = submit.payConfig;\r\n\t\t  \t\telse if(submit.amountFrom)\r\n\t\t  \t\t\tpayConfig = 'stripe';\r\n\t\t  %>\r\n\t\t    <% if(payConfig=='peergateway'){ %>\r\n\t\t\t  <div class=\"form-group pt-3\">\r\n\t\t\t    <label>You have enabled payment</label>\r\n\t\t\t    <button type=\"button\" class=\"btn btn-xs btn-danger\" style=\"float:right\"\r\n\t\t\t    \tonclick=\"editFacade.disablePeergateway('<%-submitSectionId%>'); jQuery(this).html('Disabling...');\">\r\n\t\t\t    \tDisable\r\n\t\t\t    </button>\r\n\t\t\t  </div>\r\n\t\t\t  <% if(mapping.amount || mapping['net-amount'] || submit.amountFrom){ %>\r\n\t\t\t\t<div id=\"PaymentConfig\">\r\n\t\t\t\t\t<h3>Loading...</h3>\r\n\t\t\t\t</div>\r\n\t          <% } else{ %>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tAmount field not configured\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<a class=\"card-link\" style=\"float:right;\" href=\"javascript:void(0)\" onclick=\"editFacade.showMapping()\">Configure</a>\r\n\t\t\t\t</div>\r\n\t          <% } %>\r\n\t\t    <% } else if(payConfig=='stripe'){ %>\r\n\t\t\t  <div class=\"form-group pt-3\">\r\n\t\t\t    <label for=\"amountFrom\">\r\n\t\t\t    \tPick amount from <br/>\r\n\t\t\t    \t<small>\r\n\t\t\t    \t\t<a href=\"javascript:jQuery('.pay-options').toggle()\">\r\n\t\t\t    \t\t\tMore options\r\n\t\t\t    \t\t</a>\r\n\t\t\t    \t</small>\r\n\t\t\t    </label>\r\n\t\t\t    <select id=\"amountFrom\" name=\"amountFrom\" class=\"form-control\" class=\"pull-right\">\r\n\t\t\t    \t<option value=\"\">-Select field-</option>\r\n\t\t\t\t\t<% \r\n\t\t\t\t\t\tvar itmlst = getFields();\r\n\t\t\t\t\t\titmlst.forEach(function(itm){ \r\n\t\t\t\t\t%>\r\n\t\t\t\t\t<option <%-submit.amountFrom==itm.id?'selected':''%> value=\"<%-itm.id%>\">\r\n\t\t\t\t\t\t<%-itm.title%>\r\n\t\t\t\t\t</option>\r\n\t\t\t\t\t<% }) %>\r\n\t\t\t    </select>\r\n\t\t\t  </div>\r\n\t\t\t  <div class=\"form-group pay-options\">\r\n\t\t\t\t<label for=\"primary\">\r\n\t\t\t\t\tPayment configuration\r\n\t\t\t\t</label>\r\n\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"jQuery('#amountFrom').val(''); editFacade.saveSubmit();\"\r\n\t\t\t\t\tclass=\"btn btn-danger\" style=\"float:right\">\r\n\t\t\t\t\tDisable\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href=\"/payment/<%-user.uid%>/modify/<%-user.stripe%>\" target=\"_blank\" \r\n\t\t\t\t\tclass=\"btn btn-primary\" style=\"float:right; margin-right:10px;\">\r\n\t\t\t\t\tModify\r\n\t\t\t\t</a>\r\n\t\t\t  </div>\r\n\t\t\t  <div class=\"form-group\">\r\n\t\t\t    <label>\r\n\t\t\t    \tNew version of payment is available\r\n\t\t\t    </label>\r\n\t\t\t    <button class=\"btn btn-primary\" style=\"float:right\"\r\n\t\t\t    \tonclick=\"editFacade.migratetoPeergateway('<%-submitSectionId%>'); jQuery(this).html('Migrating...');\">\r\n\t\t\t    \tMigrate\r\n\t\t\t    </button>\r\n\t\t\t  </div>\r\n\t\t    <% } else{ %>\r\n\t\t\t  <div class=\"form-group pt-3\">\r\n\t\t\t    <label>Do you want to collect payment?</label>\r\n\t\t\t    <button class=\"btn btn-primary\" style=\"float:right\"\r\n\t\t\t    \tonclick=\"editFacade.enablePeergateway('<%-submitSectionId%>'); jQuery(this).html('Enabling...');\">\r\n\t\t\t    \tEnable\r\n\t\t\t    </button>\r\n\t\t\t  </div>\r\n\t\t    <% } %>\r\n\t\t  <% } %>\r\n\t  </div>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-onsubmit\" role=\"tabpanel\" aria-labelledby=\"pills-onsubmit\">\r\n\t  \t<% \r\n\t  \t\tvar submitto = 'default';\r\n\t  \t\tif(submit.submitto)\r\n\t  \t\t\tsubmitto = submit.submitto;\r\n\t  \t\telse if(fc.whatsapp && fc.whatsapp.phone)\r\n\t  \t\t\tsubmitto = 'whatsapp';\r\n\t  \t\telse if(submit.onsubmit)\r\n\t  \t\t\tsubmitto = submit.onsubmit;\r\n\t  \t%>\r\n\t  \t<input type=\"hidden\" id=\"submitto\" name=\"submitto\" value=\"<%-submitto%>\">\r\n\t\t<div class=\"accordion\" id=\"accordionSubmit\">\r\n\t\t  <div class=\"card\">\r\n\t\t    <div class=\"card-header\" id=\"headingOne\">\r\n\t\t      <h2 class=\"mb-0\">\r\n\t\t        <button class=\"btn btn-link <%-submitto=='default'?'active':'collapsed'%>\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\" \r\n\t\t        onclick=\"jQuery('#submitto').attr('value','default')\">\r\n\t\t        \t<span class=\"material-icons checked\">radio_button_checked</span>\r\n\t\t        \t<span class=\"material-icons unchecked\">radio_button_unchecked</span>\r\n\t\t        \tShow Google Forms confirmation message\r\n\t\t        </button>\r\n\t\t      </h2>\r\n\t\t    </div>\r\n\t\t    <div id=\"collapseOne\" class=\"collapse <%-submitto=='default'?'show':''%>\" aria-labelledby=\"headingOne\" data-parent=\"#accordionSubmit\">\r\n\t\t      <div class=\"card-body\">\r\n\t\t      \t<h4 class=\"text-center\"> \r\n\t\t        \t&#8220;<%-frm&&frm.message?frm.message:'Your response has been recorded'%>&#8221;\r\n\t\t        </h4>\r\n\t\t      </div>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t\t  <div class=\"card\">\r\n\t\t    <div class=\"card-header\" id=\"headingTwo\">\r\n\t\t      <h2 class=\"mb-0\">\r\n\t\t        <button class=\"btn btn-link <%-submitto=='custom'?'active':'collapsed'%>\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\"\r\n\t\t        onclick=\"jQuery('#submitto').attr('value','custom')\">\r\n\t\t        \t<span class=\"material-icons checked\">radio_button_checked</span>\r\n\t\t        \t<span class=\"material-icons unchecked\">radio_button_unchecked</span>\r\n\t\t        \tShow customized message for this button\r\n\t\t        </button>\r\n\t\t      </h2>\r\n\t\t    </div>\r\n\t\t    <div id=\"collapseTwo\" class=\"collapse <%-submitto=='custom'?'show':''%>\" aria-labelledby=\"headingTwo\" data-parent=\"#accordionSubmit\">\r\n\t\t      <div class=\"card-body\">\r\n\t\t\t\t<div id=\"mdEditor\"><%-submit.messageMark%></div>\r\n\t            <textarea name=\"messageMD\" \r\n\t\t\t\t\tid=\"md-input\" hidden><%-submit.messageMD%></textarea>\r\n\t\t\t\t<textarea name=\"messageMark\" \r\n\t\t\t\t\tid=\"md-input-html\" hidden><%-submit.messageMark%></textarea>\r\n\t\t      </div>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t      <%\r\n\t      \tif(fc.scorecery){\r\n\t      \t\tvar scrid = submit.ifmsg?submit.ifmsg.source:null;\r\n\t      \t\tvar scrfld = frm&&frm.items?frm.items[scrid]:null;\r\n\t      %>\r\n\t\t  <div class=\"card\">\r\n\t\t    <div class=\"card-header\" id=\"headingTwoPlus\">\r\n\t\t      <h2 class=\"mb-0\">\r\n\t\t        <button class=\"btn btn-link <%-submitto=='ifmsg'?'active':'collapsed'%>\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwoPlus\" aria-expanded=\"false\" aria-controls=\"collapseTwoPlus\"\r\n\t\t        onclick=\"jQuery('#submitto').attr('value','ifmsg')\">\r\n\t\t        \t<span class=\"material-icons checked\">radio_button_checked</span>\r\n\t\t        \t<span class=\"material-icons unchecked\">radio_button_unchecked</span>\r\n\t\t        \tShow conditional message based on score\r\n\t\t        </button>\r\n\t\t      </h2>\r\n\t\t    </div>\r\n\t\t    <div id=\"collapseTwoPlus\" class=\"collapse <%-submitto=='ifmsg'?'show':''%>\" aria-labelledby=\"headingTwoPlus\" data-parent=\"#accordionSubmit\">\r\n\t\t      <div class=\"card-body\">\r\n\t\t      <% \r\n\t\t      \tvar ifmsg = submit.ifmsg?submit.ifmsg:{};\r\n\t\t      \tif(scrfld && ifmsg.ifs){ \r\n\t\t      %>\r\n\t\t      \t<%-getIf('ifmsg', submit.ifmsg)%>\r\n\t\t      \t<div class=\"pt-3\">\r\n\t\t            <button class=\"btn btn-sm btn-primary\" onclick=\"editFacade.showIf('submit', '<%-submitSectionId%>', 'ifmsg', '<%-scrid%>')\">\r\n\t\t            \tEdit\r\n\t\t            </button>\r\n\t\t            <button class=\"btn btn-sm btn-secondary\" onclick=\"editFacade.previewIf('<%-submitSectionId%>')\">\r\n\t\t            \tPreview\r\n\t\t            </button>\r\n\t            </div>\r\n\t\t      <% } else{ %>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t    <label for=\"basedon\">Conditional message based on</label>\r\n\t\t\t\t\t<select id=\"basedon\" class=\"form-control\">\r\n\t\t\t\t\t\t<option value=\"\">- Select score field -</option>\r\n\t\t\t\t\t\t<% itmlst.forEach(function(itm){ %>\r\n\t\t\t\t\t\t<option <%-scrid==itm.id?'selected':''%> value=\"<%-itm.id%>\">\r\n\t\t\t\t\t\t\t<%-itm.title%>\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<% }) %>\r\n\t\t\t\t\t</select>\r\n\t\t      \t</div>\r\n\t\t      \t<div class=\"form-group\">\r\n\t\t            <button class=\"btn btn-sm btn-secondary pull-right\" onclick=\"editFacade.createIf('submit', '<%-submitSectionId%>', 'ifmsg', jQuery('#basedon').val())\">\r\n\t\t            \tCreate\r\n\t\t            </button>\r\n\t\t      \t</div>\r\n\t\t      <% } %>\r\n\t\t      </div>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t      <%\r\n\t      \t}\r\n\t      %>\r\n\t\t  <div class=\"card\">\r\n\t\t    <div class=\"card-header\" id=\"headingThree\">\r\n\t\t      <h2 class=\"mb-0\">\r\n\t\t        <button class=\"btn btn-link <%-submitto=='redirect'?'active':'collapsed'%>\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseThree\" aria-expanded=\"false\" aria-controls=\"collapseThree\"\r\n\t\t        onclick=\"jQuery('#submitto').attr('value','redirect')\">\r\n\t\t        \t<span class=\"material-icons checked\">radio_button_checked</span>\r\n\t\t        \t<span class=\"material-icons unchecked\">radio_button_unchecked</span>\r\n\t\t        \tRedirect to a webpage\r\n\t\t        </button>\r\n\t\t      </h2>\r\n\t\t    </div>\r\n\t\t    <div id=\"collapseThree\" class=\"collapse <%-submitto=='redirect'?'show':''%>\" aria-labelledby=\"headingThree\" data-parent=\"#accordionSubmit\">\r\n\t\t      <div class=\"card-body\">\r\n\t\t    \t<textarea name=\"redirect\" class=\"form-control\"\r\n\t\t    \t\tplaceholder=\"e.g: https://www.domain.com/page?name=value\"><%-submit.redirect%></textarea>\r\n\t\t      </div>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t  \t<% \r\n\t  \t\tif(fc.whatsapp || fc.neartail){ \r\n\t  \t\t\tvar ttl = frm.title?frm.title:frm.form;\r\n\t  \t\t\tvar premsg = [ttl, '${TEXTSUMMARY(true)}', '(Press send to confirm)']\r\n\t  \t%>\r\n\t\t  <div class=\"card\">\r\n\t\t    <div class=\"card-header\" id=\"headingFour\">\r\n\t\t      <h2 class=\"mb-0\">\r\n\t\t        <button class=\"btn btn-link <%-submitto=='whatsapp'?'active':'collapsed'%>\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseFour\" aria-expanded=\"false\" aria-controls=\"collapseFour\"\r\n\t\t        onclick=\"jQuery('#submitto').attr('value','whatsapp')\">\r\n\t\t        \t<span class=\"material-icons checked\">radio_button_checked</span>\r\n\t\t        \t<span class=\"material-icons unchecked\">radio_button_unchecked</span>\r\n\t\t        \tSubmit response to WhatsApp\r\n\t\t        </button>\r\n\t\t      </h2>\r\n\t\t    </div>\r\n\t\t    <div id=\"collapseFour\" class=\"collapse <%-submitto=='whatsapp'?'show':''%>\" aria-labelledby=\"headingFour\" data-parent=\"#accordionSubmit\">\r\n\t\t      <div class=\"card-body\">\r\n\t\t\t\t  <div class=\"form-group\">\r\n\t\t\t\t    <label for=\"waphone\">\r\n\t\t\t\t    \tRoute to this number\r\n\t\t\t\t    </label>\r\n\t\t\t\t    <input type=\"text\" id=\"waphone\" name=\"waphone\" class=\"form-control\" value=\"<%=submit.waphone?submit.waphone:(fc.whatsapp?fc.whatsapp.phone:null)%>\" placeholder=\"e.g: +1 650 354 2345\"/>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"addbar routerCard\" style=\"display:<%-submit.router?'none':'block'%>\"\r\n\t\t\t\t  \tonclick=\"jQuery('.routerCard').toggle()\">\r\n\t\t\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t  \tDynamic routing\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"form-group routerCard\" style=\"display:<%-submit.router?'block':'none'%>\">\r\n\t\t\t\t    <label for=\"router\">\r\n\t\t\t\t    \tGet number from this form field\r\n\t\t\t\t    </label>\r\n\t\t\t\t    <select id=\"router\" name=\"router\" class=\"form-control\">\r\n\t\t\t\t\t\t<option value=\"\">- None -</option>\r\n\t\t\t\t\t\t<% \r\n\t\t\t\t\t\t\tvar itmlst = getFields();\r\n\t\t\t\t\t\t\titmlst.forEach(function(itm){ \r\n\t\t\t\t\t\t%>\r\n\t\t\t\t\t\t<option <%-submit.router==itm.id?'selected':''%> value=\"<%-itm.id%>\">\r\n\t\t\t\t\t\t\t<%-itm.title%>\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<% }) %>\r\n\t\t\t\t    </select>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"addbar wamsgCard\" style=\"display:<%-submit.wamsg?'none':'block'%>\"\r\n\t\t\t\t  \tonclick=\"jQuery('.wamsgCard').toggle()\">\r\n\t\t\t\t  \t<span class=\"material-icons\">add_circle</span>\r\n\t\t\t\t  \tWhatsApp message\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"form-group wamsgCard\" style=\"display:<%-submit.wamsg?'block':'none'%>\">\r\n\t\t\t\t    <label for=\"css\">Customize WhatsApp message</label>\r\n\t\t\t\t    <textarea name=\"wamsg\" class=\"form-control\"\r\n\t\t\t\t    \tplaceholder=\"<%=premsg.join('\\n\\n')%>\"><%-submit.wamsg%></textarea>\r\n\t\t\t\t  </div>\r\n\t\t      </div>\r\n\t\t    </div>\r\n\t\t  </div>\r\n\t\t<% } %>\r\n\t\t</div>\r\n\t  </div>\r\n\t  <div class=\"tab-pane fade\" id=\"pills-advanced\" role=\"tabpanel\" aria-labelledby=\"pills-profile-advanced\">\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"css\">Custom CSS for this button</label>\r\n\t\t    <textarea name=\"css\" class=\"form-control\"\r\n\t\t    \tplaceholder=\"e.g: font-size:18px;\"><%-submit.css%></textarea>\r\n\t\t  </div>\r\n\t\t  <div class=\"form-group\">\r\n\t\t    <label for=\"css\">Execute this Javascript on submit</label>\r\n\t\t    <textarea name=\"js\" class=\"form-control\"\r\n\t\t    \tplaceholder=\"e.g: callYourFunction()\"><%-submit.js%></textarea>\r\n\t\t  </div>\r\n\t  </div>\r\n\t</div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveSubmit(this)\">\r\n  \tSave\r\n  </button>\r\n</div>\r\n","editIf":"<% \r\n  var frm = scraped||form||{};\r\n  var itms = frm.items||{};\r\n  var src = itms[condition.selected.source];\r\n  var fc = facade||{};\r\n  var fcitms = fc.items||{};\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n<% if(condition.index<0 || condition.index>0){ %>\r\n  <span class=\"material-icons back-discard\" onclick=\"editFacade.saveIfItem(<%-condition.index%>)\">\r\n    arrow_back\r\n  </span>\r\n<% } else{ %>\r\n  <span class=\"material-icons back-discard\" onclick=\"editFacade.saveIf()\">\r\n    arrow_back\r\n  </span>\r\n<% } %>\r\n  <ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link active\" id=\"pills-display-tab\" data-toggle=\"pill\" href=\"#pills-display\" role=\"tab\" aria-controls=\"pills-display\" aria-selected=\"true\">\r\n      <% if(condition.type=='ifmsg'){ %>\r\n        Conditional message\r\n      <% } else{ %>\r\n        Conditional value\r\n      <% } %>\r\n      </a>\r\n    </li>\r\n  </ul>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<style>\r\n  #IfItemTab .editop .row div{ padding:5px; line-height:32px; }\r\n  #IfItemTab .wmd-input{ min-height:160px; }\r\n  #IfTab .list-group-item .editif-icon{ display:none !important; }\r\n  #IfTab .list-group-item:hover .editif-icon{ display:inline-block !important; cursor:pointer; }\r\n</style>\r\n<% \r\n  var opmap = operators[condition.type];\r\n  var selcond = condition.selected;\r\n  var ifs = condition.selected.ifs;\r\n  var els = condition.selected.els;\r\n  var editcond = null;\r\n  if(condition.index>0)\r\n    editcond = ifs[condition.index-1];\r\n  else if(condition.index<0)\r\n    editcond = els?els:{};\r\n  if(editcond){\r\n%>\r\n<form class=\"modal-body\" id=\"IfItemTab\" onsubmit=\"return false;\">\r\n  <div class=\"tab-content\" id=\"pills-tabContent\">\r\n    <div class=\"tab-pane fade show active\" id=\"pills-display\" role=\"tabpanel\" aria-labelledby=\"pills-display\">\r\n      <div class=\"container editop\">\r\n        <% if(condition.index>0){ %>\r\n          <div class=\"row\">\r\n            <div class=\"col-4\">\r\n              If <%-src.title%> is\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <select name=\"op\" class=\"form-control\" onchange=\"this.value=='><'?jQuery('.altval').show():jQuery('.altval').hide()\">\r\n                <% for(var opid in opmap){ %>\r\n                  <option <%-opid==editcond.op?'selected':''%> value=\"<%-opid%>\">\r\n                    <%-opmap[opid]%>\r\n                  </option>\r\n                <% } %>\r\n              </select>\r\n            </div>\r\n            <div class=\"col-4\">\r\n              <input name=\"val\" type=\"number\" class=\"form-control\" value=\"<%=editcond.val%>\"/>\r\n            </div>\r\n            <div class=\"col-4 altval\" style=\"display:<%-editcond.op=='><'?'block':'none'%>\">\r\n              and\r\n            </div>\r\n            <div class=\"col-4 altval\" style=\"display:<%-editcond.op=='><'?'block':'none'%>\">\r\n              <input name=\"altval\" type=\"number\" class=\"form-control\" value=\"<%=editcond.altval%>\"/>\r\n            </div>\r\n          </div>\r\n          <div class=\"row pt-3\">\r\n            <div class=\"col-12\">\r\n              Show:\r\n            </div>\r\n          </div>\r\n        <% } else{ %>\r\n          <div class=\"row\">\r\n            <div class=\"col-12\">\r\n              Else, show:\r\n            </div>\r\n          </div>\r\n        <% } %>\r\n        <div class=\"row\">\r\n          <div class=\"col-12\">\r\n            <div id=\"mdEditor\"><%-editcond.re%></div>\r\n            <textarea name=\"md\" id=\"md-input\" hidden><%-editcond.md%></textarea>\r\n            <textarea name=\"re\" id=\"md-input-html\" hidden><%-editcond.re%></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <div class=\"quickbar\">\r\n    <span class=\"material-icons trash\" onclick=\"editFacade.deleteIfItem(<%-condition.index%>)\">\r\n      delete\r\n    </span>\r\n  </div>\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveIfItem(<%-condition.index%>)\">\r\n    Save\r\n  </button>\r\n</div>\r\n<% } else{ %>\r\n<form class=\"modal-body\" id=\"IfTab\" onsubmit=\"return false;\">\r\n  <div class=\"tab-content\" id=\"pills-tabContent\">\r\n    <div class=\"tab-pane fade show active\" id=\"pills-display\" role=\"tabpanel\" aria-labelledby=\"pills-display\">\r\n      <div class=\"list-group\">\r\n        <% \r\n          ifs.forEach((cnd,c)=>{\r\n            var opnm = opmap[cnd.op];\r\n        %>\r\n        <div onclick=\"editFacade.selectIf(<%-c+1%>)\" class=\"list-group-item list-group-item-action flex-column align-items-start\">\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <h5 class=\"mb-1\">\r\n              If <%-src.title%> is <%-opnm.toLowerCase()%> <%-cnd.val%>\r\n              <% if(cnd.op=='><'){ %>\r\n                and <%-cnd.altval?cnd.altval:0%>\r\n              <% } %>\r\n            </h5>\r\n            <span class=\"editif-icon material-icons\">edit</span>\r\n          </div>\r\n          <div class=\"mb-1\"><%-cnd.re?cnd.re:'(No message)'%></div>\r\n        </div>\r\n        <% }) %>\r\n        <div onclick=\"editFacade.selectIf(-1)\" class=\"list-group-item list-group-item-action flex-column align-items-start\">\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <h5 class=\"mb-1\">Else</h5>\r\n            <span class=\"editif-icon material-icons\">edit</span>\r\n          </div>\r\n          <div class=\"mb-1\"><%-els&&els.re?els.re:'(No message)'%></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"pt-3\">\r\n        <button class=\"btn btn-sm btn-secondary pull-right\" onclick=\"editFacade.addIfItem()\">\r\n          + Condition\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveIf()\">\r\n    Save\r\n  </button>\r\n</div>\r\n<% } %>","mapping":"<% \r\n  var frm = scraped||form;\r\n  var fc = facade||{};\r\n  var fcitems = fc.items||{};\r\n  var setting = fc.setting||{};\r\n  var mapping = fc.mapping||{};\r\n  var tabs;\r\n  if(setting.currency)\r\n  {\r\n    tabs = {\r\n      Summary:['amount', 'delivery-fee', 'taxes', 'tip', 'discount', 'net-amount'],\r\n      Customer:['name', 'email', 'phone', 'address', 'delivery-zone', 'delivery-date', 'remarks']\r\n    };\r\n    if(fc.peergateway) tabs.Summary.unshift('service');\r\n  }\r\n  else\r\n  {\r\n    tabs = {\r\n      Respondent:['name', 'email', 'phone', 'customer-id'],\r\n      Notes:['line-1', 'line-2', 'line-3']\r\n    };\r\n    if(fc.hipaache)\r\n      tabs.Notes = ['score', 'diagnosis'].concat(tabs.Notes);\r\n    else if(fc.scorecery)\r\n      tabs.Notes = ['score'].concat(tabs.Notes);\r\n  }\r\n  var secs = formFacade.getSections();\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n  <ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n    <% for(var tnm in tabs){ %>\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link <%-tnm=='Summary'||tnm=='Respondent'?'active':''%>\" id=\"pills-<%-tnm%>-tab\" data-toggle=\"pill\" href=\"#pills-<%-tnm%>\" role=\"tab\" aria-controls=\"pills-<%-tnm%>\" aria-selected=\"true\"><%-tnm%></a>\r\n    </li>\r\n    <% } %>\r\n  </ul>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<style>\r\n  #MappingTab .tab-pane{ position:relative; min-height:300px; }\r\n</style>\r\n<form class=\"modal-body\" id=\"MappingTab\" onsubmit=\"return false;\">\r\n  <div class=\"tab-content\" id=\"pills-tabContent\">\r\n    <% \r\n      for(var tnm in tabs){\r\n        var tab = tabs[tnm];\r\n    %>\r\n    <div class=\"tab-pane fade <%-tnm=='Summary'||tnm=='Respondent'?'show active':''%>\" id=\"pills-<%-tnm%>\" role=\"tabpanel\" aria-labelledby=\"pills-<%-tnm%>-tab\">\r\n      <% \r\n        tab.forEach(mp=>{\r\n          var mnm = mp.split('-').join(' ');\r\n          var unm = mnm.charAt(0).toUpperCase() + mnm.slice(1);\r\n          var mval = mapping[mp];\r\n      %>\r\n      <div class=\"addbar <%-mp%>Card\" style=\"display:<%-mval?'none':'block'%>\"\r\n        onclick=\"jQuery('.<%-mp%>Card').toggle()\">\r\n        <span class=\"material-icons\">add_circle</span>\r\n        <%-unm%>\r\n      </div>\r\n      <div class=\"form-group <%-mp%>Card\" style=\"display:<%-mval?'block':'none'%>\">\r\n        <label for=\"<%-mp%>\">Get <%-mnm%> from</label>\r\n        <select class=\"form-control\" name=\"<%-mp%>\">\r\n          <option value=\"\">- None -</option>\r\n          <%\r\n            secs.forEach(sec=>{\r\n              sec.headers.forEach(head=>{\r\n                var itms = head.items.filter(itm=>fcitems?.[itm.id]?.widget=='product'?false:true);\r\n                itms.forEach(itm=>{\r\n          %>\r\n            <option <%-mval==itm.id?'selected':''%> value=\"<%-itm.id%>\">\r\n              <%-itm.title%>\r\n            </option>\r\n          <%\r\n                })\r\n              })\r\n            })\r\n          %>\r\n        </select>\r\n      </div>\r\n      <% }) %>\r\n    </div>\r\n    <% } %>\r\n  </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveMapping(this)\">\r\n    Save\r\n  </button>\r\n</div>\r\n","navigation":"<% \r\n  var frm = scraped?scraped:form;\r\n  var fc = facade?facade:{};\r\n  var secs = formFacade.getSections();\r\n  var setting = {};\r\n  if(fc&&fc.setting)\r\n    setting = fc.setting;\r\n  var nxts = fc.next;\r\n  if(!nxts) nxts = {};\r\n%>\r\n\r\n<div class=\"modal-header\">\r\n  <ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n    <li class=\"nav-item\">\r\n      <a class=\"nav-link active\" id=\"pills-display-tab\" data-toggle=\"pill\" href=\"#pills-display\" role=\"tab\" aria-controls=\"pills-display\" aria-selected=\"true\">Show categories</a>\r\n    </li>\r\n  </ul>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<style>\r\n  #NextTab .tab-pane{ position:relative; min-height:300px; }\r\n  #NextTab .btn-link{ text-transform:none; text-align:left; }\r\n  #NextTab .tab-pane button .material-icons{ padding-right:5px; font-size:18px; text-decoration:none; }\r\n  #NextTab .tab-pane button .material-icons:hover{ text-decoration:none !important; }\r\n  #NextTab .tab-pane input[type=\"checkbox\"]{ float:right; }\r\n</style>\r\n<form class=\"modal-body\" id=\"NavigationTab\" onsubmit=\"return false;\">\r\n  <div class=\"tab-content\" id=\"pills-tabContent\">\r\n    <div class=\"tab-pane fade show active\" id=\"pills-display\" role=\"tabpanel\" aria-labelledby=\"pills-display\">\r\n      <%\r\n        var ctgs = [];\r\n        var osecs = [];\r\n        secs.forEach(sec=>{\r\n          var prds = sec.items.filter(itm=>itm.product);\r\n          if(prds.length>0)\r\n            ctgs.push(sec);\r\n          else\r\n            osecs.push(sec);\r\n        });\r\n        ctgs.forEach(sec=>{\r\n          var nxt = nxts[sec.id];\r\n      %>\r\n        <div class=\"form-group\">\r\n          <label for=\"navigation\"><%-sec.title%></label>\r\n          <input type=\"checkbox\" class=\"pull-right\" name=\"navigation\" value=\"<%-sec.id%>\" <%-nxt&&nxt.navigation=='added'?'checked':''%> />\r\n        </div>\r\n      <% }) %>\r\n      <div class=\"form-group pt-3\">\r\n        <label for=\"checkout\">Configure the checkout page</label>\r\n        <select class=\"form-control\" name=\"checkout\">\r\n          <option value=\"\">- None -</option>\r\n          <% osecs.forEach(sec=>{ %>\r\n            <option <%-setting.checkout==sec.id?'selected':''%> value=\"<%-sec.id%>\"><%-sec.title%></option>\r\n          <% }) %>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group pt-3\">\r\n        <label for=\"checkout\">Ask users to login at this page</label>\r\n        <select class=\"form-control\" name=\"loginpage\">\r\n          <option value=\"\">- None -</option>\r\n          <% osecs.forEach(sec=>{ %>\r\n            <option <%-setting.loginpage==sec.id?'selected':''%> value=\"<%-sec.id%>\"><%-sec.title%></option>\r\n          <% }) %>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveNavigation()\">\r\n    Save\r\n  </button>\r\n</div>\r\n","qrcode":"<%\r\n  var frm = scraped?scraped:form;\r\n  var fc = facade?facade:{};\r\n  if(!fc) fc = {};\r\n  var ttl = {title:frm.title, description:frm.description};\r\n  var qr = fc.qrcode?fc.qrcode:{};\r\n%>\r\n<style>\r\n  .titleHelp{ margin-top:10px; }\r\n  .titleHelp a{ color:blue; text-decoration:underline; }\r\n  .titleFeedback{ margin-top:10px; color:red; }\r\n  .titleFeedback a{ color:red; text-decoration:underline; }\r\n</style>\r\n<div class=\"modal-header\">\r\n  <h5 class=\"modal-title\">Edit</h5>\r\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<form class=\"modal-body\" id=\"QRcodeTab\" onsubmit=\"return false;\">\r\n    <div class=\"form-group\">\r\n      <label for=\"field\">Title</label>\r\n      <input type=\"text\" name=\"title\" placeholder=\"<%=ttl.title%>\" value=\"<%=qr.title%>\"\r\n        class=\"form-control\"/>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"primary\">Message</label>\r\n      <br/>\r\n      <div id=\"mdEditor\"><%-qr.messageMark%></div>\r\n      <textarea name=\"messageMD\" id=\"md-input\" hidden><%-qr.messageMD%></textarea>\r\n      <textarea name=\"messageMark\" id=\"md-input-html\" hidden><%-qr.messageMark%></textarea>\r\n    </div>\r\n</form>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveQRcode(this)\">\r\n  \tSave\r\n  </button>\r\n</div>\r\n\r\n","image":"<%\r\n    var frm=scraped?scraped:form;\r\n    var fc=facade?facade:{};\r\n    var pubfrm = form||{};\r\n    var embeds = pubfrm.embeds||{};\r\n    var unit='kg';\r\n    if(fc.setting && fc.setting.currencyCode=='USD' ) \r\n        unit='lbs';\r\n    if(!fc) fc={}; \r\n    var item=getItem(); \r\n    var fitem=getFacadeItem();\r\n    var imageSrc;\r\n    if(!item.blob && item.image)\r\n        imageSrc = `https://formfacade.com/itemload/item/${encode(item.image)}`;\r\n    else if(item.blob || embeds[item.id])\r\n        imageSrc=`https://formfacade.com/itemembed/${params.publishId}/item/${item.id}/image/${item.blob}`;\r\n    else if(fitem.contentUri)\r\n        imageSrc=fitem.contentUri;\r\n    else if(fitem.image)\r\n        imageSrc=fitem.image;\r\n%>\r\n\r\n    <div class=\"modal-header\">\r\n        <ul class=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link active\" id=\"pills-question-tab\" data-toggle=\"pill\" href=\"#pills-question\" role=\"tab\"\r\n                    aria-controls=\"pills-question\" aria-selected=\"true\">image</a>\r\n            </li>\r\n        </ul>\r\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <style>\r\n        #WidgetTab .tab-pane { position: relative; min-height: 300px; }\r\n        #WidgetTab .prdimage { display: block; text-align: center; margin: auto; padding: 10px; width: 180px; background-color: #fff; border-radius: .25rem; }\r\n        #WidgetTab .imageItemBox { cursor: pointer; width: 120px; height: 120px; object-fit: cover;}\r\n        #WidgetTab #prdimagelbl { display: block; text-align: center; padding-top: 10px; }\r\n        #WidgetTab .imagefile { display: none;}\r\n    </style>\r\n    <form class=\"modal-body\" id=\"WidgetTab\" onsubmit=\"return false;\">\r\n        <div class=\"tab-content\" id=\"pills-tabContent\">\r\n            <div class=\"tab-pane fade show active\" id=\"pills-question\" role=\"tabpanel\" aria-labelledby=\"pills-question\">\r\n                <div class=\"form-group prdimage\">\r\n                    <img class=\"imageItemBox\" src=\"<%-imageSrc%>\"\r\n                        onclick=\"document.getElementById('imageItemFile').click()\" />\r\n                    <% if(formsApiEnabled()) { %>\r\n                        <label id=\"prdimagelbl\">\r\n                            <a href=\"javascript:void(0)\" onclick=\"document.getElementById('imageItemFile').click()\">\r\n                                Change\r\n                            </a>\r\n                        </label>\r\n                    <% } %>\r\n                    <input type=\"file\" accept=\"image/*\" id=\"imageItemFile\" class=\"imagefile\"\r\n                        onchange=\"editFacade.uploadImageItem(this)\" />\r\n                    <input type=\"hidden\" id=\"imageItemHdn\" name=\"image\" value=\"\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"title\">\r\n                        Title\r\n                    </label>\r\n                    <input type=\"text\" name=\"title\" class=\"form-control\"\r\n                        value=\"<%=fitem.title?fitem.title:item.title%>\" />\r\n                </div>\r\n\r\n                <% var desc=fitem.helpMD; var deschtml=fitem.helpMark; %>\r\n                    <div class=\"addbar prddetailMDCard\" style=\"display:<%-desc?'none':'block'%>\"\r\n                        onclick=\"jQuery('.prddetailMDCard').toggle()\">\r\n                        <span class=\"material-icons\">add_circle</span>\r\n                        Description\r\n                    </div>\r\n                    <div class=\"form-group prddetailMDCard\" style=\"display:<%-desc?'block':'none'%>\">\r\n                        <label for=\"primary\">Description</label>\r\n                        <div id=\"mdEditor\">\r\n                            <%-deschtml%>\r\n                        </div>\r\n                        <textarea name=\"helpMD\" id=\"md-input\" hidden><%-desc%></textarea>\r\n                        <textarea name=\"helpMark\" id=\"md-input-html\" hidden><%-deschtml%></textarea>\r\n                        <textarea name=\"prddetailMD\" id=\"md-input\" hidden><%-fitem.prddetailMD%></textarea>\r\n                        <textarea name=\"prddetailMark\" id=\"md-input-html\" hidden><%-fitem.prddetailMark%></textarea>\r\n                    </div>\r\n\r\n                    <% if(formsApiEnabled()) { %>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"title\"> Alignment </label>\r\n\r\n                            <select name=\"image_alignment\" class=\"form-control\" />\r\n                                <option value=\"\">Default</option>\r\n                                <% var alignmentPosition=(item.size && item.size.align) || 0; var alignment;\r\n                                    if(alignmentPosition==0) alignment='Left';\r\n                                    else if(alignmentPosition==1) alignment='Center';\r\n                                    else if(alignmentPosition==2) alignment='Right'; \r\n                                    ['Left', 'Right' , 'Center' ].forEach((name, index)=>{\r\n                                %>\r\n                                    <option value=\"<%-index+1%>\" <%-alignment==name?'selected':''%>>\r\n                                        <%-name%>\r\n                                    </option>\r\n                                <% }) %>\r\n                            </select>\r\n                        </div>\r\n                    <% } %>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <div class=\"modal-footer\">\r\n        <div class=\"quickbar\">\r\n            <span class=\"material-icons trash\" onclick=\"editFacade.deleteItem()\" title=\"Delete this field\">\r\n                delete\r\n            </span>\r\n            <span class=\"material-icons\" onclick=\"editFacade.duplicateItem()\" title=\"Duplicate this product\">\r\n                content_copy\r\n            </span>\r\n            <span class=\"material-icons\" onclick=\"editFacade.rearrangeItems('<%-item.section.id%>')\"\r\n                title=\"Rearrange products\">\r\n                move_up\r\n            </span>\r\n            <span class=\"material-icons\" onclick=\"formFacade.showProduct(<%-itemId%>)\"\r\n                title=\"Preview product selection\">\r\n                remove_red_eye\r\n            </span>\r\n        </div>\r\n        <button type=\"button\" class=\"btn btn-primary\" onclick=\"editFacade.saveWidget(this)\">\r\n            Save\r\n        </button>\r\n    </div>"};
  editFacade.langs = {"en":"English","ar":"Arabic","af":"Afrikaans","bn":"Bengali","de":"German","da":"Danish","nb":"Norwegian","es":"Spanish","fr":"French","fi":"Finnish","el":"Greek","hr":"Croatian","ro":"Romanian","eu":"Basque","fa":"Persian","hi":"Hindi","ko":"Korean","hu":"Hungarian","he":"Hebrew","it":"Italian","id":"Indonesian","ja":"Japanese","pt":"Portuguese","pt-br":"Portuguese (Brazil)","pl":"Polish","ru":"Russian","uk":"Ukrainian","cs":"Czech","ta":"Tamil","tr":"Turkish","nl":"Dutch","ms":"Malay","lv":"Latvian","lt":"Lithuanian","vi":"Vietnamese","zh":"Chinese","ur":"Urdu","sl":"Slovenian","sw":"Swedish","sk":"Slovak"};
  editFacade.themes = {"minimal":{"pri":"#77cde3","sec":"#f5f5f5","head":"Work Sans","para":"Work Sans","size":"14"},"colorful":{"pri":"#5d33fb","sec":"#b161fc","head":"Poppins","para":"Roboto","size":"14"}};
  editFacade.headers = {"host":"us-central1-formfacade.cloudfunctions.net","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-language":"en,en,he","cache-control":"private,no-store","cdn-loop":"Fastly, Fastly","fastly-client":"1","fastly-client-ip":"81.199.140.44","fastly-ff":"s48hDkrIORDrAz3sjuyh5gIWcInqIjSROZ47KAY+w/I=!FRA!cache-fra-etou8220099-FRA, s48hDkrIORDrAz3sjuyh5gIWcInqIjSROZ47KAY+w/I=!FRA!cache-fra-eddf8230066-FRA","fastly-orig-accept-encoding":"gzip, deflate, br","fastly-ssl":"1","fastly-temp-xff":"81.199.140.44, 81.199.140.44","pragma":"no-cache","sec-ch-ua":"\"Chromium\";v=\"116\", \"Not)A;Brand\";v=\"24\", \"Google Chrome\";v=\"116\"","sec-ch-ua-mobile":"?0","sec-ch-ua-platform":"\"macOS\"","sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1","upgrade-insecure-requests":"1","via":"1.1 Firebase Hosting","x-country-code":"IL","x-firebase-channel":"live","x-firebase-hosting-channel":"live","x-forwarded-for":"81.199.140.44,66.249.93.231","x-forwarded-host":"formfacade.com","x-forwarded-server":"cache-fra-etou8220099-FRA","x-forwarded-url":"/dashboard/116151664779909850301/editor/form/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ","x-orig-accept-language":"en-US,en;q=0.9,he;q=0.8","x-timer":"S1694587061.673502,VS0","x-varnish":"154837940, 3361989963","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36","x-cloud-trace-context":"d445641d86db5017adb561aaf32ad037/6964431431250764346","x-appengine-country":"ZZ","traceparent":"00-d445641d86db5017adb561aaf32ad037-60a6a17cd244623a-00","x-appengine-appversionid":"s~o331d1207138c1f8f-tp/9e1c16507b9d775edd1a7abaaaeb2696:1787.454874577342885275","x-appengine-timeout-ms":"599999","x-appengine-https":"on","x-appengine-user-ip":"66.249.93.231","x-forwarded-proto":"https","forwarded":"for=\"66.249.93.231\";proto=https","accept-encoding":"br, gzip","x-appengine-request-log-id":"650158a000ff0ccbac617b643a0001737e6f333331643132303731333863316638662d7470000139653163313635303762396437373565646431613761626161616562323639363a313738370001014e","x-appengine-default-version-hostname":"o331d1207138c1f8f-tp.appspot.com","function-execution-id":"f6gday9bh6sd"};
</script>

<script>
  function addLinkTag(url, id) {
    // If id is not passed, take it from url
    id = id ? id : url.split('/').pop();

    if (!document.getElementById(id)) {
      var relm = document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0];
      var link = document.createElement('link');
      link.id = id;
      link.rel = 'stylesheet';
      link.href = url;
      relm.appendChild(link);
    }
  }

  function loadScript(url, callback) {
      var script = document.createElement("script")
      script.type = "text/javascript";
      if (script.readyState){  //IE
          script.onreadystatechange = function(e){
              if (script.readyState == "loaded" || script.readyState == "complete"){
                  script.onreadystatechange = null;
                  callback(e);
              }
          };
      } else {
          script.onload = script.onerror = function(e){
              callback(e);
          };
      }
      script.src = url;
      document.getElementsByTagName("head")[0].appendChild(script);
  }

  function loadScripts(srcs) {
      var curr = this;
      var prms = srcs.map(function(src){
          return new Promise(function(resolve, reject){
              curr.loadScript(src, resolve);
          });
      });
      return Promise.all(prms);
  }

  window.loadingScripts = loadScripts([
    '/js/toastui-editor-all-3.2.0.min.js', '/js/Sortable.js', '/js/FontPicker.js', 
    '/js/tribute.js', '/js/jquery.caret.js', '/js/jquery.atwho.js', 'https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js'
  ]);
  addLinkTag("/css/toastui-editor-3.2.0.min.css", 'tui-editor');
  addLinkTag("/js/tribute.css", 'tribute');
  addLinkTag("/css/jquery.atwho.css", 'at-who');
  addLinkTag("https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css", 'cropper');
</script>
<script>
  editFacade.load({"userId":"116151664779909850301","page":"editor","publishId":"1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ"}, {});
  function initEdit()
  {
    fetch('/forms/d/e/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ/scrape?nocache='+new Date().getTime()+'&userId=116151664779909850301');
  }
  function reloadEdit()
  {
    formFacade.__sections = null;
    formFacade.render();
  }
</script>

<div class="container pt-4 pb-4" id="upgradesection">
  
    <div class="row">
        <div class="col-xs-12 col-md-8 ml-auto mr-auto">
          <div class="alert alert-warning trial-alert" role="alert">
            <p>Your trial period for
            <a href="https://formfacade.com/website/pricing.html?userId=116151664779909850301" 
            onclick='mixpanel.track("trialOn", {"userId":"116151664779909850301","page":"editor","publishId":"1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ"})'
            target="_blank">paid features</a>
            ends in 7 days.</p>
            <a href="https://formfacade.com/website/pricing.html?userId=116151664779909850301" class="btn btn-primary"
              onclick='mixpanel.track("trialOn", {"userId":"116151664779909850301","page":"editor","publishId":"1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ"})'>Upgrade</a>
          </div>
        </div>
    </div>
  
</div>

<script type="text/javascript">
  function showGoogleForms()
  {
    firebase.database().ref('/publish/1FAIpQLSc3eUpEJkmTDZ5RI2xPq48H7hPVTnCkAoj9_ONaccoJTnCEHQ').once('value').then(snap=>{
      var frm = snap.val();
      var editurl = 'https://docs.google.com/forms/d/'+frm.id+'/edit';
      window.open(editurl, 'gforms');
    });
  }
</script>


</body>
</html>
